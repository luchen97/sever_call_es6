{"version":3,"sources":["module/Notification.js","module/Socket.js","reducers/largeVideoReducer.js","reducers/roomCreateReducer.js","reducers/streamReducer.js","reducers/userOnRoomReducer.js","reducers/uiReducer.js","reducers/remoteReducer.js","reducers/modalReducer.js","reducers/messageReducer.js","reducers/remoteElementReducer.js","reducers/localElementReducer.js","redux/rootReducer.js","redux/store.js","Components/Video/Video.jsx","Components/Audio/Audio.jsx","Components/Video/UserComponent.jsx","global/UserRoom.js","Components/Video/Audio.jsx","Components/Video/UserCloneComponent.jsx","Components/RemoteVideo/RemoteVideo.jsx","Components/LocalVideo/LocalVideo.jsx","Layouts/SliderRight.jsx","Components/Clock/Clock.jsx","Components/Video/LargeVideo.jsx","events/EVENTS.js","global/Role.js","module/RoomClient.js","Components/Option/CameraOption.jsx","Layouts/SliderLeft.jsx","Components/Menu/Menu.jsx","Components/Option/MicOption.jsx","Components/Footer/FooterTool.jsx","Components/MutilpleMedia/MediaElement.jsx","Components/MutilpleMedia/MultipleMediaContainer.jsx","Components/Modal/ModalComponent.jsx","Components/Chat/Chat.jsx","Layouts/Container.jsx","Layouts/Start.jsx","module/RoomClientClone.js","Pages/HomePage.jsx","App.jsx","reportWebVitals.js","index.js"],"names":["Notification","type","message","notification","description","placement","SocketClone","url","request","data","Promise","resolve","reject","socket","emit","status","this","io","connect","ACTION_TYPES","setLargeVideo","stream","payload","setRoomCreate","room","initializeStream","local","remote","setStream","setUserOnRoom","viewOneCamera","setViewOneCamera","Map","setRemoteStream","visible","header","render","setModal","initializeMessage","setMessage","setRemoteElement","element","videos","audio","screenCast","setLocalElementReducer","combineReducers","streamRemoteState","state","action","streamState","largeVideoState","userOnRoomState","roomCreateState","ui","modalState","messageState","remoteElementState","localElementState","middleware","thunk","store","createStore","rootReducer","applyMiddleware","Video","componentDidMount","videoRef","srcObject","props","componentDidUpdate","prevProps","onClick","console","log","id","autoPlay","ref","width","height","style","background","paddingTop","PureComponent","ColorList","UserComponent","item","audioRef","video","setState","hasVideo","prevProp","mute","e","preventDefault","muted","onHandleSetLargeVideos","dispatch","peerId","border","active","position","display","justifyContent","alignItems","color","fontWeight","maxWidth","bottom","peerName","shape","danger","top","left","zIndex","icon","className","borderRadius","backgroundColor","Math","floor","random","verticalAlign","size","Component","Audio","UserCloneComponent","onVideoClick","length","map","index","RemoteVideo","onHandleSetLargeVideo","setActive","currentStream","j","i","LocalVideo","textShadow","window","roomClient","username","screen","SliderRight","Clock","count","seconds","minutes","hours","formatted","right","margin","fontSize","LargeVideo","el","EVENTS","RTC_EVENTS","Role","micEnable","cameraEnable","password","undefined","mediaType","_EVENTS","exitRoom","openRoom","startVideo","stopVideo","startAudio","stopAudio","startScreen","stopScreen","RoomClient","mediasoupClient","room_id","name","successCallback","createRoom","roomName","a","reponse","join","loadDevice","device","initTransports","myRoom","newMap","socketId","currentMap","getState","get","set","filter","value","routerRtpCapabilities","Device","error","load","forceTcp","rtpCapabilities","producerTransport","createSendTransport","on","callback","errback","dtlsParameters","transport_id","kind","rtpParameters","producerTransportId","producer_id","producer_name","close","consumerTransport","createRecvTransport","initSockets","consumer_id","removeConsumer","consume","exit","produce","deviceId","mediaConstraints","min","ideal","canProduce","producerLabel","has","navigator","mediaDevices","getDisplayMedia","getUserMedia","track","getAudioTracks","getVideoTracks","params","encodings","rid","maxBitrate","scalabilityMode","codecOptions","videoGoogleStartBitrate","producer","producers","push","closeProducer","delete","event","userOnRoom","cloneMap","getConsumeStream","then","consumer","consumers","currentUser","producerId","consumerTransportId","ssrc","MediaStream","addTrack","resumeProducer","resume","forEach","user","getAllRemoteVideo","dataMap","key","getAllChat","messages","roomInfo","info","changePassword","res","evt","eventListeners","isOpen","_isOpen","Object","keys","pause","offline","clean","off","catch","warn","finally","CameraOption","enumerateDevices","devices","deviceInfo","onActiveOptionCamera","currentVideo","label","SliderLeft","MenuComponent","openFullscreen","elem","document","documentElement","fullscreen","exitFullscreen","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","MicOption","mic","speaker","onActiveOptionMic","currentMic","currentSpeaker","FooterTool","onChangeView","openCamera","openMic","onDisplayChat","onDisplayRoomInfo","overlay","Menu","trigger","onStartScreenShare","onStopMic","forceRender","onOpenMic","onEndCall","onStopCamera","onOpenCamera","onShareLink","onDisplayRemote","MediaElement","elementWidth","match","MultipleMediaContainer","widthMediaElement","clone","Array","from","ModalComponent","handleCancel","onOk","title","onCancel","closable","Footer","Layout","Content","Chat","sendMessage","values","sendMessageChat","formRef","resetFields","span","padding","src","marginTop","marginBottom","marginRight","marginLeft","float","layout","onFinish","Item","placeholder","htmlType","Header","Sider","Container","chatElement","getElementById","getMessageInRoom","addonBefore","TwitterOutlined","disabled","Password","onChange","target","Modal","content","Search","onSearch","select","execCommand","allowClear","enterButton","data-clipboard-target","CopyOutlined","location","href","footer","linkInput","onCreateRoom","overflow","RoomClientClone","roomname","initRoomClient","create","initSocket","joinRoom","initRTC","getRouterCapabilities","routerCapabilities","initProducerTransport","initConsumeTransport","consumeTransport","getProducerOfRoom","consumerId","closeConsumer","remoteElement","rl","findIndex","remoteElementClone","cs","serverIp","port","listProducer","enableUdp","preferUdp","transport","listProduce","videoProduce","audios","audioProduce","screenProduce","splice","HomePage","form","displayName","rules","required","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM"],"mappings":"8VAEMA,EAAe,SAACC,EAAMC,GACxBC,IAAaF,GAAM,CACfC,QAAS,mBACTE,YAAaF,EACbG,UAAW,iBCFbC,EACJ,WAAYC,GAAM,IAAD,gCAIjBC,QAAU,SAACP,GAAqB,IAAfQ,EAAc,uDAAP,GACtB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3B,EAAKC,OAAOC,KAAKb,EAAMQ,GAAM,SAACA,GACV,IAAdA,EAAKM,QACPf,EAAa,QAAQS,EAAKP,SAE1BU,EAAOH,EAAKA,OAEZE,EAAQF,EAAKA,aAXnBO,KAAKH,OAASI,IAAGC,QAAQX,I,wBCNhBY,EACM,kBAebC,EAAgB,SAACC,GACrB,MAAO,CACLpB,KAAMkB,EACNG,QAASD,IClBAF,EACK,iBA8BZI,EAAgB,SAACC,GACrB,MAAO,CACLvB,KAAMkB,EACNG,QAASE,ICnCAL,EACC,aAERM,EAAmB,CAAEC,MAAO,GAAIC,OAAQ,IAaxCC,EAAY,SAACP,GACjB,MAAO,CACLpB,KAAMkB,EACNG,QAASD,IClBAF,EACK,iBAEZM,EAAkB,GA4BlBI,EAAgB,SAACL,GACrB,MAAO,CACLvB,KAAMkB,EACNG,QAASE,I,OClCAL,EACkB,sBAEzBM,EAAmB,CACfK,eAAe,GAanBC,EAAmB,WACf,MAAO,CACG9B,KAAOkB,ICpBdA,EACgB,oBAEvBM,EAAmB,IAAIO,IAavBC,EAAkB,SAACZ,GACf,MAAO,CACGpB,KAAMkB,EACNG,QAASD,ICnBhBF,EACA,YAEPM,EAAmB,CAAES,SAAS,EAAOC,OAAQ,GAAIC,OAAQ,MAazDC,EAAW,SAAChB,GAChB,MAAO,CACLpB,KAAMkB,EACNG,QAASD,ICnBAF,EACE,cAETmB,EAAoB,GAapBC,EAAa,SAAClB,GAClB,MAAO,CACLpB,KAAMkB,EACNG,QAASD,ICnBAF,EACW,qBAElBM,EAAmB,GAanBe,EAAmB,SAACC,GACtB,MAAO,CACHxC,KAAMkB,EACNG,QAASmB,ICnBJtB,EACU,oBAEjBM,EAAmB,CAAEiB,OAAQ,GAAIC,MAAO,GAAIC,WAAY,IAaxDC,EAAyB,SAACJ,GAC5B,MAAO,CACHxC,KAAMkB,EACNG,QAASmB,ICPFK,cAAgB,CAC7BC,kBLR0B,WAAuC,IAAtCC,EAAqC,uDAA7BvB,EAAkBwB,EAAW,uCACxD,OAAQA,EAAOhD,MACL,KAAKkB,EAEK,OADA6B,EAAQC,EAAO3B,QAGzB,QACU,OAAO0B,IKEnCE,YRToB,WAAuC,IAAtCF,EAAqC,uDAA7BvB,EAAkBwB,EAAW,uCAC1D,OAAQA,EAAOhD,MACb,KAAKkB,EAEH,OADA6B,EAAQC,EAAO3B,QAGjB,QACE,OAAO0B,IQGXG,gBVVwB,WAAuC,IAAtCH,EAAqC,uDAFvC,KAE4BC,EAAW,uCAC9D,OAAQA,EAAOhD,MACb,KAAKkB,EAEH,OADA6B,EAAQC,EAAO3B,QAGjB,QACE,OAAO0B,IUIXI,gBPVwB,WAAuC,IAAtCJ,EAAqC,uDAA7BvB,EAAkBwB,EAAW,uCAC9D,OAAQA,EAAOhD,MACb,KAAKkB,EAEH,OADA6B,EAAQC,EAAO3B,QAEjB,QACE,OAAO0B,IOKXK,gBTXwB,WAAuC,IAAtCL,EAAqC,wDAAXC,EAAW,uCAC9D,OAAQA,EAAOhD,MACb,KAAKkB,EAEH,OADA6B,EAAQC,EAAO3B,QAEjB,QACE,OAAO0B,ISMXM,GNVgB,WAAuC,IAAtCN,EAAqC,uDAA7BvB,EAAkBwB,EAAW,uCAC9C,OAAQA,EAAOhD,MACL,KAAKkB,EAEK,OADA6B,EAAMlB,eAAiBkB,EAAMlB,cACtB,eAAIkB,GACrB,QACU,OAAOA,IMKnCO,WJdmB,WAAuC,IAAtCP,EAAqC,uDAA7BvB,EAAkBwB,EAAW,uCACzD,OAAQA,EAAOhD,MACb,KAAKkB,EAEH,OADA6B,EAAQC,EAAO3B,QAGjB,QACE,OAAO0B,IIQXQ,aHfqB,WAAwC,IAAvCR,EAAsC,uDAA9BV,EAAmBW,EAAW,uCAC5D,OAAQA,EAAOhD,MACb,KAAKkB,EAEH,OADA6B,EAAQC,EAAO3B,QAGjB,QACE,OAAO0B,IGSXS,mBFhB2B,WAAuC,IAAtCT,EAAqC,uDAA7BvB,EAAkBwB,EAAW,uCAC/D,OAAQA,EAAOhD,MACX,KAAKkB,EAED,OADA6B,EAAQC,EAAO3B,QAGnB,QACI,OAAO0B,IEUjBU,kBDjB0B,WAAuC,IAAtCV,EAAqC,uDAA7BvB,EAAkBwB,EAAW,uCAC9D,OAAQA,EAAOhD,MACX,KAAKkB,EAED,OADA6B,EAAQC,EAAO3B,QAGnB,QACI,OAAO0B,MEKbW,EAAa,C,OACfC,GAEEC,EAAQC,YAAYC,EAAaC,IAAe,WAAf,EAAmBL,I,gCCgB3CM,E,4MAjCbC,kBAAoB,WAAO,IAAD,EACxB,EAAKC,SAASC,UAAd,UAA0B,EAAKC,aAA/B,aAA0B,EAAYD,W,EAGxCE,mBAAqB,SAACC,GACW,IAAD,EAA1BA,IAAc,EAAKF,QACrB,EAAKF,SAASC,UAAd,UAA0B,EAAKC,aAA/B,aAA0B,EAAYD,Y,EAI1CI,QAAQ,WACJ,EAAKH,MAAMG,QAAQ,EAAKL,W,uDAGlB,IAAD,OAGP,OAFAM,QAAQC,IAAI1D,KAAKqD,OAGf,uBACEM,GAAG,QACHC,UAAU,EACVC,IAAK,SAACA,GACJ,EAAKV,SAAWU,GAElBC,MAAO,OACPC,OAAQ,IACRC,MAAO,CAAEC,WAAY,QAASC,WAAY,GAC1CV,QAASxD,KAAKwD,c,GA5BFW,iB,ICCAA,gB,2BCKdC,ICRO,IAAIpD,I,ODQC,CAChB,UACA,UACA,UACA,kBACA,UACA,UACA,kBACA,YAEIqD,G,kDACJ,WAAYhB,GAAQ,IAAD,8BACjB,cAAMA,IAIRH,kBAAoB,WAAO,IAAD,IAClBoB,EAAK,EAAKjB,MAAMiB,KACtB,EAAKC,SAASnB,UAAd,OAA0BkB,QAA1B,IAA0BA,GAA1B,UAA0BA,EAAM3C,aAAhC,aAA0B,EAAatB,OACvC,EAAK8C,SAASC,UAAd,OAA0BkB,QAA1B,IAA0BA,GAA1B,UAA0BA,EAAME,aAAhC,aAA0B,EAAanE,OACnC,EAAK8C,SAASC,UAChB,EAAKqB,SAAS,CAAEC,UAAU,IAE1B,EAAKD,SAAS,CAAEC,UAAU,KAZX,EAgBnBpB,mBAAqB,SAACqB,GACpB,GAAI,EAAKtB,MAAMiB,OAASK,EAASL,KAAM,CAAC,IAAD,IAC7BA,EAAK,EAAKjB,MAAMiB,KACtB,EAAKC,SAASnB,UAAd,OAA0BkB,QAA1B,IAA0BA,GAA1B,UAA0BA,EAAM3C,aAAhC,aAA0B,EAAatB,OACvC,EAAK8C,SAASC,UAAd,OAA0BkB,QAA1B,IAA0BA,GAA1B,UAA0BA,EAAME,aAAhC,aAA0B,EAAanE,OACnC,EAAK8C,SAASC,UAChB,EAAKqB,SAAS,CAAEC,UAAU,IAE1B,EAAKD,SAAS,CAAEC,UAAU,MAxBf,EA6BnBE,KAAO,SAACC,GACNA,EAAEC,iBACF,IAAMF,EAAO,EAAK5C,MAAM4C,KAItB,EAAKL,SAASQ,OAHXH,EAKL,EAAKH,SAAS,CAAEG,MAAOA,KArCN,EAwCnBxE,cAAgB,SAACyE,GACf,EAAKxB,MAAM2B,yBACXnC,EAAMoC,SAAS7E,EAAc,CAAEC,OAAQ,EAAK8C,SAASC,cAxCrD,EAAKpB,MAAQ,CAAE4C,MAAM,EAAOF,UAAU,GAFrB,E,qDA6CT,IAAD,WACP,OACE,sBACEf,GAAI3D,KAAKqD,MAAMiB,KAAKY,OACpB1B,QAASxD,KAAKI,cACd4D,MAAO,CACLmB,OAAQnF,KAAKqD,MAAMiB,KAAKc,OAAS,gBAAkB,OACnDC,SAAU,WACVvB,MAAO,OACPC,OAAQ,OACRuB,QAAS,OACTC,eAAgB,SAChBC,WAAY,UAVhB,UAaE,sBAAMxB,MAAO,CAAEyB,MAAO,OAAQC,WAAY,OAAQL,SAAU,WAAYM,SAAU,MAAOC,OAAQ,GAAjG,mBACG5F,KAAKqD,MAAMiB,YADd,aACG,EAAiBuB,WAEnB7F,KAAKgC,MAAM4C,KACV,cAAC,KAAD,CACEpB,QAASxD,KAAK4E,KACd3F,KAAK,OACL6G,MAAM,SACNC,QAAM,EACN/B,MAAO,CAAEqB,SAAU,WAAYW,IAAK,EAAGC,KAAM,EAAGC,OAAQ,IACxDC,KAAM,mBAAGC,UAAU,iBAAb,0BAGR,cAAC,KAAD,CACE5C,QAASxD,KAAK4E,KACd3F,KAAK,OACL6G,MAAM,SACNC,QAAM,EACN/B,MAAO,CAAEqB,SAAU,WAAYW,IAAK,EAAGC,KAAM,EAAGC,OAAQ,IACxDC,KAAM,mBAAGC,UAAU,iBAAb,yBAGRpG,KAAKgC,MAAM0C,SAuBT,KAtBF,qBACEf,GAAG,cACHK,MAAO,CACLyB,MAAO,OACPH,QAAS,OACTE,WAAY,SACZD,eAAgB,SAChBF,SAAU,WACVgB,aAAc,MACdvC,MAAO,GACPC,OAAQ,IAVZ,SAaE,cAAC,KAAD,CACEC,MAAO,CAAEsC,gBAAgB,GAAD,OAAKlC,GAAUmC,KAAKC,MAAsB,GAAhBD,KAAKE,YAAmBC,cAAe,UACzFC,KAAK,QAFP,mBAIG3G,KAAKqD,MAAMiB,YAJd,aAIG,EAAiBuB,aAMxB,uBACEhC,IAAK,SAACA,GACJ,EAAKV,SAAWU,GAElBF,GAAG,QACHC,UAAU,EACVE,MAAO,OACPC,OAAQ,IACRC,MAAO,CAAEC,WAAY,QAASkB,OAAQ,uBAExC,uBACEtB,IAAK,SAACA,GACJ,EAAKU,SAAWV,GAElBF,GAAG,QACHC,UAAU,W,GA1HQgD,aAgJb1G,aAff,SAAyB8B,GACvB,MAAO,CACLD,kBAAmBC,EAAMD,kBACzBU,mBAAmBT,EAAMS,sBAYW,KAAzBvC,CAA+BmE,IAA/BnE,IEtIA2G,G,4MAzBb3D,kBAAoB,WAAO,IAAD,EACxB,EAAKqB,SAASnB,UAAd,UAA0B,EAAKC,aAA/B,aAA0B,EAAYD,W,EAGxCE,mBAAqB,SAACC,GACW,IAAD,EAA1BA,IAAc,EAAKF,QACrB,EAAKkB,SAASnB,UAAd,UAA0B,EAAKC,aAA/B,aAA0B,EAAYD,Y,uDAIhC,IAAD,OACC2B,EAAU/E,KAAKqD,MAAf0B,MACR,OACE,uBACEf,MAAO,CAAEF,MAAO,OAAQC,OAAQ,OAAQuB,QAAS,QACjDzB,IAAK,SAACA,GACJ,EAAKU,SAAWV,GAElBF,GAAG,QACHC,UAAUmB,Q,GApBEZ,iBCMdC,GAAY,CAChB,UACA,UACA,UACA,kBACA,UACA,UACA,kBACA,WAmEa0C,G,kDA/Db,WAAYzD,GAAQ,IAAD,8BACjB,cAAMA,IAIR0D,aAAe,SAACvC,GACd,EAAKnB,MAAM2B,yBACXnC,EAAMoC,SAAS7E,EAAc,CAAEC,OAAQmE,EAAMpB,cAL7C,EAAKpB,MAAQ,CAAE+C,OAAO,GAFL,E,qDAUT,IAAD,eACCA,EAAU/E,KAAKgC,MAAf+C,MACR,OACE,sBACEqB,UAAU,wBADZ,UAGE,cAAC,KAAD,CACEpC,MAAO,CAAEqB,SAAU,WAAYW,IAAK,EAAGC,KAAM,EAAEC,OAAO,GACtD1C,QAAS,WACP,EAAKiB,SAAS,CAAEM,OAAQA,KAE1BoB,KAAMpB,EAAQ,mBAAGqB,UAAU,iBAAb,wBAA+C,mBAAGA,UAAU,iBAAb,yBAE/D,qBACEA,UAAU,WADZ,mBAGGpG,KAAKqD,MAAMiB,YAHd,aAGG,EAAiBuB,WAEc,IAAjC7F,KAAKqD,MAAMiB,KAAKE,MAAMwC,OACrB,qBACErD,GAAG,cACHK,MAAO,CACLyB,MAAO,OACPH,QAAS,OACTE,WAAY,SACZD,eAAgB,SAChBF,SAAU,WACVgB,aAAc,MACdvC,MAAO,GACPC,OAAQ,IAVZ,SAaE,cAAC,KAAD,CACEC,MAAO,CAAEsC,gBAAgB,GAAD,OAAKlC,GAAUmC,KAAKC,MAAsB,GAAhBD,KAAKE,YAAmBC,cAAe,UACzFC,KAAK,QAFP,mBAIG3G,KAAKqD,MAAMiB,YAJd,aAIG,EAAiBuB,aAKpB,KACH7F,KAAKqD,MAAMiB,KAAKE,MAAMyC,KAAI,SAACzC,EAAO0C,GACjC,OAAO,cAAC,EAAD,CAAmB9D,UAAWoB,EAAMnE,OAAQmD,QAAS,EAAKuD,cAA9CG,MAErB,cAAC,GAAD,CAAO9D,UAAS,UAAEpD,KAAKqD,MAAMiB,YAAb,iBAAE,EAAiB3C,aAAnB,aAAE,EAAwBtB,OAAQ0E,MAAOA,W,GAxDhC6B,aCN3BO,G,kDACJ,WAAY9D,GAAQ,IAAD,8BACjB,cAAMA,IAIR+D,sBAAwB,SAAC9C,EAAM4C,GAC7B,EAAKG,UAAUH,IANE,EASnBG,UAAY,SAACH,GAGX,IAFA,IAAMI,EAAa,eAAQ,EAAKjE,MAAMnB,aAChCxB,EAAQ4G,EAAc5G,MACnB6G,EAAI,EAAGA,EAAI7G,EAAMsG,OAAQO,IAAK,CACrB7G,EAAM6G,GACdnC,QAAS,EAEnB,IAAK,IAAIoC,EAAI,EAAGA,EAAI,EAAKnE,MAAMjB,gBAAgB4E,OAAQQ,IAAK,CAC1D,IAAM/F,EAAU,EAAK4B,MAAMjB,gBAAgBoF,GAEzC/F,EAAQ2D,OADNoC,IAAMN,EAMZ,EAAK7D,MAAMxC,cAAc,EAAKwC,MAAMjB,iBACpC,EAAKiB,MAAMzC,UAAX,eAA0B0G,KAvB1B,EAAK/C,SAAW,KAFC,E,qDA4BT,IAAD,OACP,OACE,qBAAK6B,UAAU,yBAAf,SACGpG,KAAKqD,MAAMZ,mBAAmBwE,KAAI,SAAC3C,EAAM4C,GACxC,OACE,cAAC,GAAD,CAEE5C,KAAMA,EACNU,uBAAwB,kBAAM,EAAKoC,sBAAsB9C,EAAM4C,KAF1DA,Y,GAnCON,aA8DX1G,oBAhBf,SAAyB8B,GACvB,MAAO,CACLE,YAAaF,EAAME,YACnBE,gBAAiBJ,EAAMI,gBACvBK,mBAAoBT,EAAMS,uBAI9B,SAA4BwC,GAC1B,MAAO,CACL7E,cAAe,SAACX,GAAD,OAAUwF,EAAS7E,EAAcX,KAChDmB,UAAW,SAACnB,GAAD,OAAUwF,EAASrE,EAAUnB,KACxCoB,cAAe,SAACpB,GAAD,OAAUwF,EAASpE,EAAcpB,QAIrCS,CAA6CiH,ICpEtDM,G,4MACJV,aAAe,SAACvC,GAEd3B,EAAMoC,SAAS7E,EAAc,CAAEC,OAAQmE,EAAMpB,c,uDAIrC,IAAD,OACP,OACE,sBAAKgD,UAAU,wBAAf,UACGpG,KAAKqD,MAAMX,kBAAkBhB,OAAOuF,KAAI,SAACzC,EAAO0C,GAAW,IAAD,EACzD,OACE,sBAEEd,UAAU,mBAFZ,UAIE,uBACEpC,MAAO,CACLyB,MAAO,OACPiC,WAAY,gBACZhC,WAAY,OACZL,SAAU,WACVM,SAAU,MACVC,OAAQ,GAPZ,oBAUG+B,OAAOC,kBAVV,aAUG,EAAmBC,SAVtB,WAYA,cAAC,EAAD,CAAOzE,UAAS,OAAEoB,QAAF,IAAEA,OAAF,EAAEA,EAAOnE,OAAQmD,QAAS,EAAKuD,iBAf1CG,MAoBVlH,KAAKqD,MAAMX,kBAAkBd,WAAWqF,KAAI,SAACa,EAAQZ,GAAW,IAAD,EAC9D,OACE,sBAEEd,UAAU,gCAFZ,UAIE,uBACEpC,MAAO,CACLyB,MAAO,OACPiC,WAAY,gBACZhC,WAAY,OACZL,SAAU,WACVM,SAAU,MACVC,OAAQ,GAPZ,oBAUG+B,OAAOC,kBAVV,aAUG,EAAmBC,SAVtB,WAYA,cAAC,EAAD,CAAOzE,UAAS,OAAE0E,QAAF,IAAEA,OAAF,EAAEA,EAAQzH,OAAQmD,QAAS,EAAKuD,iBAf3CG,a,GApCMN,aAuEV1G,oBAZf,SAAyB8B,GACvB,MAAO,CACLU,kBAAmBV,EAAMU,sBAI7B,SAA4BuC,GAC1B,MAAO,CACL7E,cAAe,SAACX,GAAD,OAAUwF,EAAS7E,EAAcX,QAIrCS,CAA6CuH,ICxEtDM,G,uKAEF,OACE,qBAAK/D,MAAO,CAAEF,MAAO,OAAQC,OAAQ,QAArC,SACE,cAAC,GAAD,U,GAJkB6C,aAuBX1G,oBAbf,SAAyB8B,GACvB,MAAO,CACLE,YAAaF,EAAME,eAWiB,KAAzBhC,CAA+B6H,I,UCE/BC,G,kDA3BL,WAAY3E,GAAQ,IAAD,8BACT,cAAMA,IACDrB,MAAQ,GACb,EAAKiG,MAAQ,EAHJ,E,qDAOT,OACU,cAAC,KAAD,CACUC,QAAS,EACTC,QAAS,EACTC,MAAO,EACPhH,OAAQ,YAA6C,IAA1CiH,EAAyC,EAAzCA,UAAyC,EAA9BD,MAA8B,EAAvBD,QAAuB,EAAdD,QAC5B,OACU,qBAAKlE,MAAO,CAAEqB,SAAU,WAAYa,OAAQ,EAAGjC,WAAY,OAAQyB,WAAY,IAAKM,IAAK,EAAGsC,MAAO,GAAnG,SACU,oBAAGtE,MAAO,CAAEuE,OAAQ,EAAGjD,QAAS,OAAQE,WAAY,SAAUgD,SAAU,IAAxE,UACU,mBAAGxE,MAAO,CAAEwE,SAAU,IAAKpC,UAAU,iBAArC,mBACCiC,c,GAlB7DzB,aCEd6B,G,4MAMIvF,kBAAoB,WAAO,IAAD,EAChB,EAAKC,SAASC,UAAd,UAA0B,EAAKC,MAAMlB,uBAArC,aAA0B,EAA4B9B,Q,EAGhEiD,mBAAqB,SAACC,GAAe,IAAD,EAGoC,GAF9DE,QAAQC,IAAR,UAAY,EAAKL,MAAMlB,uBAAvB,aAAY,EAA4B9B,QAEpCkD,EAAUpB,kBAAoB,EAAKkB,MAAMlB,mBACnC,EAAKgB,SAASC,UAAd,UAA0B,EAAKC,MAAMlB,uBAArC,aAA0B,EAA4B9B,S,uDAIhE,IAAD,OACC,OACU,sBAAK2D,MAAO,CAAEqB,SAAU,WAAYvB,MAAO,OAAQC,OAAQ,OAAQE,WAAY,SAA/E,UACU,cAAC,GAAD,IACA,uBAAOL,UAAQ,EAACC,IAAK,SAAC6E,GAAS,EAAKvF,SAAWuF,GAAM1E,MAAO,CAAEqB,SAAU,WAAYvB,MAAO,OAAQC,OAAQ,OAAQE,WAAY,kB,GAtB9I2C,aA0CV1G,oBAbf,SAAyB8B,GACf,MAAO,CACGG,gBAAiBH,EAAMG,mBAWH,KAAzBjC,CAA+BuI,I,sCC/CxCE,GAE2B,8BAF3BA,GAGkB,qBAHlBA,GAIoB,uBAJpBA,GAKiB,aALjBA,GAQqB,wBARrBA,GASqB,wBATrBA,GAUiB,oBAVjBA,GAWiB,mBAXjBA,GAYkB,sBAZlBA,GAa0B,6BAb1BA,GAciB,qBAIjBC,GACgB,uBADhBA,GAEiB,wBAFjBA,GAGc,iBAHdA,GAIc,iBAJdA,GAMuB,0BANvBA,GAOY,eAPZA,GAQY,eARZA,GASc,iBATdA,GAUa,gBC5BbC,GAAO,CACHC,WAAW,EACXC,cAAc,EACdC,cAASC,GCQbC,GAAY,CAChBvH,MAAO,YACP6C,MAAO,YACPsD,OAAQ,cAEJqB,GAAU,CACdC,SAAU,WACVC,SAAU,WACVC,WAAY,aACZC,UAAW,YACXC,WAAY,aACZC,UAAW,YACXC,YAAa,cACbC,WAAY,cAGRC,G,WACJ,WAAYC,EAAiBhK,EAAQiK,EAASC,EAAMf,EAAUgB,GAAkB,IAAD,gCA2B/EC,WA3B+E,uCA2BlE,WAAOC,EAAUlB,GAAjB,eAAAmB,EAAA,sEACW,EAAKtK,OAAOL,QAAQmJ,GAA2B,CAAEuB,WAAUlB,aADtE,OACLoB,EADK,OAEX3G,QAAQC,IAAI0G,GAFD,2CA3BkE,6DAgC/EC,KAhC+E,uCAgCxE,WAAON,EAAMD,EAASd,GAAtB,yBAAAmB,EAAA,sEACC,EAAKtK,OAAOL,QAAQmJ,GAA8B,CAAEd,SAAUkC,EAAMG,SAAUJ,EAASd,aADxF,uBAEc,EAAKnJ,OAAOL,QAAQoJ,IAFlC,cAECnJ,EAFD,OAGLgE,QAAQC,IAAIjE,GAHP,SAIc,EAAK6K,WAAW7K,GAJ9B,cAID8K,EAJC,OAKL,EAAKA,OAASA,EALT,UAMC,EAAKC,eAAeD,GANrB,yBAQgB,EAAK1K,OAAOL,QAAQmJ,IARpC,QAYL,IAJM8B,EARD,OASCC,EAAS,IAAI1J,IACnByC,QAAQC,IAAI,SAAU+G,GAEbvD,EAAQ,EAAGA,EAAQuD,EAAOzD,OAAQE,IACrCuD,EAAOvD,GAAOyD,WAAa,EAAK9K,OAAO8D,KACzCF,QAAQC,IAAI,WACNkH,EAAa/H,EAAMgI,WAAW9I,kBAAkB+I,IAAIL,EAAOvD,GAAOyD,UACxED,EAAOK,IAAIN,EAAOvD,GAAOyD,SAAU,CAAEvF,QAAQ,EAAOzD,MAAK,OAAEiJ,QAAF,IAAEA,OAAF,EAAEA,EAAYjJ,MAAO6C,MAAK,OAAEoG,QAAF,IAAEA,OAAF,EAAEA,EAAYpG,SAhBhG,OAmBL3B,EAAMoC,SAAShE,EAAgByJ,IAC/B7H,EAAMoC,SAASpE,EAAc4J,EAAOO,QAAO,SAAAC,GAAK,OAAIA,EAAMtH,KAAO,EAAK9D,OAAO8D,QApBxE,UAqBC,EAAK9D,OAAOC,KAAK8I,IArBlB,4CAhCwE,+DAwD/E0B,WAxD+E,uCAwDlE,WAAOY,GAAP,eAAAf,EAAA,sDAEX,IACEI,EAAS,IAAI,EAAKV,gBAAgBsB,OAClC,MAAOC,GACY,qBAAfA,EAAMrB,MACRtG,QAAQ2H,MAAM,yBAEhB3H,QAAQ2H,MAAMA,GARL,gBAULb,EAAOc,KAAK,CAChBH,0BAXS,gCAaJX,GAbI,2CAxDkE,2DAwE/EC,eAxE+E,uCAwE9D,WAAOD,GAAP,iBAAAJ,EAAA,sEAGM,EAAKtK,OAAOL,QAAQoJ,GAA6B,CAClE0C,UAAU,EACVC,gBAAiBhB,EAAOgB,kBALb,YAGP9L,EAHO,QAQJ2L,MARI,uBASX3H,QAAQ2H,MAAM3L,EAAK2L,OATR,iCAYb,EAAKI,kBAAoBjB,EAAOkB,oBAAoBhM,GAEpD,EAAK+L,kBAAkBE,GAAG,UAA1B,uCAAqC,aAA2BC,EAAUC,GAArC,eAAAzB,EAAA,6DAAS0B,EAAT,EAASA,eAC5CpI,QAAQC,IAAImI,GADuB,kBAG3B,EAAKhM,OAAOL,QAAQoJ,GAA8B,CAAEiD,iBAAgBC,aAAcrM,EAAKkE,KAH5D,OAIjCgI,IAJiC,gDAMjCC,EAAQ,EAAD,IAN0B,yDAArC,sCAAA5L,KAAA,gBAUA,EAAKwL,kBAAkBE,GAAG,UAA1B,uCAAqC,aAAgCC,EAAUC,GAA1C,uBAAAzB,EAAA,6DAAS4B,EAAT,EAASA,KAAMC,EAAf,EAAeA,cAAf,kBAEY,EAAKnM,OAAOL,QAAQoJ,GAA2B,CAC1FqD,oBAAqB,EAAKT,kBAAkB7H,GAC5CoI,OACAC,kBAL+B,gBAEzBE,EAFyB,EAEzBA,YAAaC,EAFY,EAEZA,cAKrBR,EAAS,CAAEhI,GAAIuI,EAAaC,kBAPK,kDASjCP,EAAQ,EAAD,IAT0B,0DAArC,sCAAA5L,KAAA,gBAaA,EAAKwL,kBAAkBE,GAAG,yBAAyB,SAAC1J,GAClD,OAAQA,GACN,IAAK,aAEL,IAAK,YAEH,MACF,IAAK,SACH,EAAKwJ,kBAAkBY,YA7ChB,UAuDM,EAAKvM,OAAOL,QAAQoJ,GAA6B,CAAE0C,UAAU,IAvDnE,aAuDP7L,EAvDO,QAwDJ2L,MAxDI,wBAyDX3H,QAAQ2H,MAAM3L,EAAK2L,OAzDR,2BA6Db,EAAKiB,kBAAoB9B,EAAO+B,oBAAoB7M,GACpD,EAAK4M,kBAAkBX,GAAG,UAA1B,uCAAqC,aAA2BC,EAAUC,GAArC,eAAAzB,EAAA,6DAAS0B,EAAT,EAASA,eAAT,kBAE3B,EAAKhM,OAAOL,QAAQoJ,GAA8B,CAAEkD,aAAc,EAAKO,kBAAkB1I,GAAIkI,mBAFlE,OAGjCF,IAHiC,gDAKjCC,EAAQA,GALyB,yDAArC,sCAAA5L,KAAA,gBASA,EAAKqM,kBAAkBX,GAAG,wBAA1B,uCAAmD,WAAO1J,GAAP,SAAAmI,EAAA,2DACzCnI,EADyC,OAE1C,eAF0C,OAK1C,cAL0C,OAU1C,WAV0C,sEAW7C,EAAKqK,kBAAkBD,QAXsB,iGAAnD,kCAAApM,KAAA,gBAvEa,4CAxE8D,2DAoK/EuM,YAAc,WACZ,EAAK1M,OAAO6L,GAAG,mBAAmB,SAACjM,GACjCgE,QAAQC,IAAIjE,GACZoD,EAAMoC,SAAS1D,EAAW9B,OAG5B,EAAKI,OAAO6L,GAAG,eAAf,uCAA+B,qCAAAvB,EAAA,6DAASJ,EAAT,EAASA,KAAT,EAAepG,GAC5CxE,IAAY,KAAS,CACnBD,QAAS,kBACTE,YAAa2K,EAAO,iDACpB1K,UAAW,gBAJgB,SAMR,EAAKQ,OAAOL,QAAQ,iBANZ,OAQ7B,IAFMiL,EANuB,OAOvBC,EAAS,IAAI1J,IACVkG,EAAQ,EAAGA,EAAQuD,EAAOzD,OAAQE,IACrCuD,EAAOvD,GAAOvD,KAAO,EAAK9D,OAAO8D,KAC7BiH,EAAa/H,EAAMgI,WAAW9I,kBAAkB+I,IAAIL,EAAOvD,GAAOvD,IACxE+G,EAAOK,IAAIN,EAAOvD,GAAOvD,GAAI,CAAEyB,QAAQ,EAAOzD,MAAK,OAAEiJ,QAAF,IAAEA,OAAF,EAAEA,EAAYjJ,MAAO6C,MAAK,OAAEoG,QAAF,IAAEA,OAAF,EAAEA,EAAYpG,SAG/F3B,EAAMoC,SAASpE,EAAc4J,EAAOO,QAAO,SAAAC,GAAK,OAAIA,EAAMtH,KAAO,EAAK9D,OAAO8D,QAC7Ed,EAAMoC,SAAShE,EAAgByJ,IAfF,2CAA/B,kCAAA1K,KAAA,gBAkBA,EAAKH,OAAO6L,GAAG,eAAf,uCAA+B,qCAAAvB,EAAA,6DAASJ,EAAT,EAASA,KAAT,EAAepG,GAC5CxE,IAAY,QAAY,CACtBD,QAAS,kBACTE,YAAa2K,EAAO,oDACpB1K,UAAW,gBAJgB,SAMR,EAAKQ,OAAOL,QAAQ,iBANZ,OAQ7B,IAFMiL,EANuB,OAOvBC,EAAS,IAAI1J,IACVkG,EAAQ,EAAGA,EAAQuD,EAAOzD,OAAQE,IACrCuD,EAAOvD,GAAOvD,KAAO,EAAK9D,OAAO8D,KAC7BiH,EAAa/H,EAAMgI,WAAW9I,kBAAkB+I,IAAIL,EAAOvD,GAAOvD,IACxE+G,EAAOK,IAAIN,EAAOvD,GAAOvD,GAAI,CAAEyB,QAAQ,EAAOzD,MAAK,OAAEiJ,QAAF,IAAEA,OAAF,EAAEA,EAAYjJ,MAAO6C,MAAK,OAAEoG,QAAF,IAAEA,OAAF,EAAEA,EAAYpG,SAG/F3B,EAAMoC,SAASpE,EAAc4J,EAAOO,QAAO,SAAAC,GAAK,OAAIA,EAAMtH,KAAO,EAAK9D,OAAO8D,QAC7Ed,EAAMoC,SAAShE,EAAgByJ,IAfF,2CAA/B,kCAAA1K,KAAA,gBAkBA,EAAKH,OAAO6L,GAAG,kBAAkB,YAAsB,IAAnBc,EAAkB,EAAlBA,YAClC/I,QAAQC,IAAI,oBAAqB8I,GACjC,EAAKC,eAAeD,MAEtB,EAAK3M,OAAO6L,GAAG9C,GAAf,uCAAwC,WAAOnJ,GAAP,uBAAA0K,EAAA,sDACtC1G,QAAQC,IAAIjE,GACHyH,EAAQ,EAFqB,YAElBA,EAAQzH,EAAKuH,QAFK,yBAGMvH,EAAKyH,GAAvCgF,EAH4B,EAG5BA,YAAarG,EAHe,EAGfA,SAAUX,EAHK,EAGLA,OAHK,SAI9B,EAAKwH,QAAQR,EAAarG,EAAUX,GAJN,OAEGgC,IAFH,0DAAxC,kCAAAlH,KAAA,gBAQA,EAAKH,OAAO6L,GAAG,cAAc,WAC3B,EAAKiB,MAAK,OA3NiE,KA+N/EC,QA/N+E,uCA+NrE,WAAO3N,GAAP,6CAAAkL,EAAA,sDAAa0C,EAAb,+BAAwB,KAC5BC,EAAmB,GACnBnL,GAAQ,EACRmG,GAAS,EAHL,KAIA7I,EAJA,cAKDiK,GAAUvH,MALT,SAcDuH,GAAU1E,MAdT,UAiCD0E,GAAUpB,OAjCT,0BAMJgF,EAAmB,CACjBnL,MAAO,CACLkL,SAAUA,GAEZrI,OAAO,GAET7C,GAAQ,EAZJ,oCAeJmL,EAAmB,CACjBnL,OAAO,EACP6C,MAAO,CACLV,MAAO,CACLiJ,IAAK,IACLC,MAAO,MAETjJ,OAAQ,CACNgJ,IAAK,IACLC,MAAO,MAETH,SAAUA,IA1BV,oCAkCJC,GAAmB,EACnBhF,GAAS,EAnCL,kEAyCH,EAAKyC,OAAO0C,WAAW,UAAatL,EAzCjC,wBA0CN8B,QAAQ2H,MAAM,wBA1CR,+BA6CJ,EAAK8B,cAAcC,IAAIlO,GA7CnB,wBA8CNwE,QAAQC,IAAI,yCAA2CzE,GA9CjD,yCAmDG6I,EAnDH,kCAmDkBsF,UAAUC,aAAaC,kBAnDzC,6DAmDmEF,UAAUC,aAAaE,aAAaT,GAnDvG,mCAmDNzM,EAnDM,KAoDAmN,EAAQ7L,EAAQtB,EAAOoN,iBAAiB,GAAKpN,EAAOqN,iBAAiB,GACrEC,EAAS,CACbH,SAEG7L,GAAUmG,IACb6F,EAAOC,UAAY,CACjB,CAAEC,IAAK,KAAMC,WAAY,IAAQC,gBAAiB,QAClD,CAAEF,IAAK,KAAMC,WAAY,IAAQC,gBAAiB,QAClD,CAAEF,IAAK,KAAMC,WAAY,IAAQC,gBAAiB,QAClD,CAAEF,IAAK,KAAMC,WAAY,IAAQC,gBAAiB,SAEpDJ,EAAOK,aAAe,CACpBC,wBAAyB,MAhEvB,UAmEgB,EAAKzC,kBAAkBoB,QAAQe,GAnE/C,QAmEN,EAAKO,SAnEC,OAoEN,EAAKC,UAAUpD,IAAI,EAAKmD,SAASvK,GAAI,EAAKuK,UAGrCvM,IACGO,EADI,eACeW,EAAMgI,WAAW3I,aACpCxB,EAAQwB,EAAYxB,MACpBC,EAASuB,EAAYvB,OAC3BD,EAAM0N,KAAK,CACT/N,SACAsD,GAAI,EAAKuK,SAASvK,GAClBoG,KAAM,EAAKA,KACXrF,UAAU,IAEZ7B,EAAMoC,SAASrE,EAAU,CAAEF,QAAOC,YAClCkC,EAAMoC,SAAS7E,EAAc,CAAEC,aAGjC,EAAK6N,SAASxC,GAAG,cAAc,WAC7BjI,QAAQC,IAAI,qBACZ,EAAK2K,cAAcpP,MAGrB,EAAKiP,SAASxC,GAAG,kBAAkB,WACjCjI,QAAQC,IAAI,4BACZ,EAAKyK,UAAUG,OAAO,EAAKJ,SAASvK,OAGtC,EAAKuK,SAASxC,GAAG,SAAS,WACxBjI,QAAQC,IAAI,oBACZ,EAAKyK,UAAUG,OAAO,EAAKJ,SAASvK,OAGtC,EAAKuJ,cAAcnC,IAAI9L,EAAM,EAAKiP,SAASvK,IApGrC,KAsGE1E,EAtGF,cAuGCiK,GAAUvH,MAvGX,UA0GCuH,GAAU1E,MA1GX,UA6GC0E,GAAUpB,OA7GX,2BAwGF,EAAKyG,MAAMpF,GAAQK,YAxGjB,oCA2GF,EAAK+E,MAAMpF,GAAQG,YA3GjB,oCA8GF,EAAKiF,MAAMpF,GAAQO,aA9GjB,kHAqHNjG,QAAQC,IAAR,MArHM,2DA/NqE,2DAwV/EgJ,QAxV+E,uCAwVrE,WAAOR,EAAarG,EAAUX,GAA9B,eAAAiF,EAAA,sDAEJqE,EAAa,EAAKC,SAAS5L,EAAMgI,WAAW9I,mBAChD,EAAK2M,iBAAiBxC,GAAayC,MAAK,YAAiC,IAA9BC,EAA6B,EAA7BA,SAAUvO,EAAmB,EAAnBA,OAAQ0L,EAAW,EAAXA,KAC3D,EAAK8C,UAAU9D,IAAI6D,EAASjL,GAAIiL,GAChC,IAAIE,EAAcN,EAAW1D,IAAI5F,GAE5B4J,IAGQ,UAAT/C,EACF+C,EAAYtK,MAAQ,CAAEvF,KAAM,QAASoB,SAAQsD,GAAIiL,EAASjL,IAE1DmL,EAAYnN,MAAQ,CAAE1C,KAAM,QAASoB,SAAQsD,GAAIiL,EAASjL,IAE5DF,QAAQC,IAAI,MAAOrD,GAEnBwC,EAAMoC,SAAShE,EAAgBuN,IAC/BI,EAASlD,GAAG,cAAc,WACxBjI,QAAQC,IAAI,qBACZ,EAAK+I,eAAemC,EAASjL,OAE/BiL,EAASlD,GAAG,kBAAkB,WAC5BjI,QAAQC,IAAI,2BACZ,EAAK+I,eAAemC,EAASjL,WAxBzB,2CAxVqE,+DAqX/E+K,iBArX+E,uCAqX5D,WAAOK,GAAP,+BAAA5E,EAAA,6DACToB,EAAoB,EAAKhB,OAAzBgB,gBADS,SAEE,EAAK1L,OAAOL,QAAQoJ,GAA2B,CAChE2C,kBACAyD,oBAAqB,EAAK3C,kBAAkB1I,GAC5CoL,eALe,cAEXtP,EAFW,SAOmBA,EAAKkO,OAAjChK,EAPS,EAOTA,GAAIoI,EAPK,EAOLA,KAAMC,EAPD,EAOCA,cAEZgC,EAAe,CACnB,CAAEiB,KAAM,OAAQlB,gBAAiB,SAVlB,SAYM,EAAK1B,kBAAkBK,QAAQ,CACpD/I,KACAoL,aACAhD,OACAC,gBACAgC,iBAjBe,cAYXY,EAZW,OAmBjBnL,QAAQC,IAAIkL,EAASpB,QAEfnN,EAAS,IAAI6O,aACZC,SAASP,EAASpB,OAtBR,kBAuBV,CAAEoB,WAAUvO,SAAQ0L,SAvBV,4CArX4D,2DA+Y/EsC,cAAgB,SAACpP,GACf,GAAK,EAAKiO,cAAcC,IAAIlO,GAA5B,CAIA,IAAIiN,EAAc,EAAKgB,cAAcpC,IAAI7L,GAMzC,GALA,EAAKY,OAAOC,KAAK,iBAAkB,CAAEoM,gBACrC,EAAKiC,UAAUrD,IAAIoB,GAAaE,QAChC,EAAK+B,UAAUG,OAAOpC,GACtB,EAAKgB,cAAcoB,OAAOrP,GAEtBA,IAASiK,GAAUvH,MAAO,CAC5B,IAAMO,EAAcW,EAAMgI,WAAW3I,YAC/BvB,EAASuB,EAAYvB,OAAOqK,QAAO,SAACC,GAAD,OAAWA,EAAMtH,KAAOuI,KAC3DxL,EAAQwB,EAAYxB,MAAMsK,QAAO,SAACC,GAAD,OAAWA,EAAMtH,KAAOuI,KAC/DrJ,EAAMoC,SAASrE,EAAU,CAAEF,QAAOC,YAGpC,OAAQ1B,GACN,KAAKiK,GAAUvH,MACb,EAAK4M,MAAMpF,GAAQM,WACnB,MACF,KAAKP,GAAU1E,MACb,EAAK+J,MAAMpF,GAAQI,WACnB,MACF,KAAKL,GAAUpB,OACb,EAAKyG,MAAMpF,GAAQQ,YACnB,MACF,QACE,aA3BFlG,QAAQC,IAAI,sCAAwCzE,IAjZuB,KA0b/EmQ,eAAiB,SAACnQ,GAChB,GAAK,EAAKiO,cAAcC,IAAIlO,GAA5B,CAIA,IAAIiN,EAAc,EAAKgB,cAAcpC,IAAI7L,GACzC,EAAKkP,UAAUrD,IAAIoB,GAAamD,cAJ9B5L,QAAQC,IAAI,sCAAwCzE,IA5buB,KAmc/EwN,eAAiB,SAACD,GAChB,IAAIgC,EAAa,EAAKC,SAAS5L,EAAMgI,WAAW9I,mBAChDyM,EAAWc,SAAQ,SAAAC,GAAS,IACpB5N,EAAiB4N,EAAjB5N,MAAO6C,EAAU+K,EAAV/K,MACT7C,GACEA,EAAMgC,KAAO6I,IACf+C,EAAK5N,MAAQ,MAIb6C,GACEA,EAAMb,KAAO6I,IACf+C,EAAK/K,MAAQ,SAKnB3B,EAAMoC,SAAShE,EAAgBuN,IAC/B,EAAKK,UAAUP,OAAO9B,IArduD,KA6e/EgD,kBAAoB,aA7e2D,KAif/Ef,SAAW,SAACgB,GACV,IADsB,EAChB/E,EAAS,IAAI1J,IADG,eAEKyO,GAFL,IAEtB,2BAAoC,CAAC,IAAD,0BAAxBC,EAAwB,KAAnBzE,EAAmB,KAClCP,EAAOK,IAAI2E,EAAKzE,IAHI,8BAKtB,OAAOP,GAtfsE,KAyf/EiF,WAzf+E,sBAyflE,4BAAAxF,EAAA,sEACY,EAAKtK,OAAOL,QAAQ,cADhC,OACLoQ,EADK,OAEXnM,QAAQC,IAAIkM,GACZ/M,EAAMoC,SAAS1D,EAAWqO,IAHf,2CAzfkE,KA+f/EC,SA/f+E,sBA+fpE,4BAAA1F,EAAA,sEACQ,EAAKtK,OAAOL,QAAQ,YAD5B,cACLsQ,EADK,yBAEFA,GAFE,2CA/foE,KAogB/EC,eApgB+E,sBAogB9D,4BAAA5F,EAAA,sEACG,EAAKtK,OAAOL,QAAQ,aAAcqJ,GAAKG,UAD1C,OACTgH,EADS,OAEf9Q,KAAQ4Q,KAAKE,GAFE,2CApgB8D,KA8gB/EzB,MAAQ,SAAC0B,GACPxM,QAAQC,IAAIuM,GACR,EAAKC,eAAe/C,IAAI8C,IAC1B,EAAKC,eAAepF,IAAImF,GAAKX,SAAQ,SAAC3D,GAAD,OAAcA,QAjhBwB,KAqhB/ED,GAAK,SAACuE,EAAKtE,GACT,EAAKuE,eAAepF,IAAImF,GAAK7B,KAAKzC,IAthB2C,KAyhB/EwE,OAAS,WACP,OAAO,EAAKC,SAzhBZpQ,KAAK+J,KAAOA,EACZ/J,KAAK6J,gBAAkBA,EACvB7J,KAAKH,OAASA,EACdG,KAAKwL,kBAAoB,KACzBxL,KAAKqM,kBAAoB,KACzBrM,KAAKuK,OAAS,KACdvK,KAAK8J,QAAUA,EACf9J,KAAK6O,UAAY,IAAI7N,IACrBhB,KAAKmO,UAAY,IAAInN,IACrBhB,KAAKkN,cAAgB,IAAIlM,IACzBhB,KAAKoQ,SAAU,EACfpQ,KAAKkQ,eAAiB,IAAIlP,IAC1BqP,OAAOC,KAAKnH,IAASmG,SAAQ,SAACW,GAC5B,EAAKC,eAAenF,IAAIkF,EAAK,OAE/BjQ,KAAKgJ,SAAWA,EAChBhJ,KAAKiK,WAAWH,EAASd,GAAU2F,KAAnC,sBAAwC,sBAAAxE,EAAA,sEAChC,EAAKE,KAAKN,EAAMD,EAASd,GADO,cAEtCvF,QAAQC,IAAI,QAF0B,SAGhC,EAAK6I,cAH2B,OAItC,EAAK6D,SAAU,EACf3M,QAAQC,IAAI,mBACZsG,IANsC,4C,0DAga5B/K,GACZ,GAAKe,KAAKkN,cAAcC,IAAIlO,GAA5B,CAIA,IAAIiN,EAAclM,KAAKkN,cAAcpC,IAAI7L,GACzCe,KAAKmO,UAAUrD,IAAIoB,GAAaqE,aAJ9B9M,QAAQC,IAAI,sCAAwCzE,K,6BAqCjC,IAAD,OAAjBuR,EAAiB,wDAChBC,EAAQ,WACV,EAAKL,SAAU,EACf,EAAK/D,kBAAkBD,QACvB,EAAKZ,kBAAkBY,QACvB,EAAKvM,OAAO6Q,IAAI,cAChB,EAAK7Q,OAAO6Q,IAAI,gBAChB,EAAK7Q,OAAO6Q,IAAI,kBAChB,EAAK7Q,OAAO6Q,IAAI,gBAChB,EAAK7Q,OAAO6Q,IAAI,iBAGbF,EAGHC,IAFAzQ,KAAKH,OAAOL,QAAQ,YAAYmP,MAAK,SAAC9J,GAAD,OAAOpB,QAAQC,IAAImB,MAAI8L,OAAM,SAAC9L,GAAD,OAAOpB,QAAQmN,KAAK/L,MAAIgM,SAAQ,WAAQJ,OAI5G5N,EAAMoC,SAASrE,EAAU,CAAEF,MAAO,GAAIC,OAAQ,MAC9CX,KAAKuO,MAAMpF,GAAQC,a,iCAiCnB,OAAOF,K,6BAmBP,OAAOC,O,KCrjBU2H,G,kDAKX,WAAYzN,GAAQ,IAAD,8BACT,cAAMA,IAKhBH,kBANmB,sBAMC,kCAAAiH,EAAA,sEACYxC,OAAOyF,UAAUC,aAAa0D,mBAD1C,OAGV,IAFMC,EADI,OAEJxM,EAAQ,GACL0C,EAAQ,EAAGA,EAAQ8J,EAAQhK,OAAQE,IAEV,gBADlB+J,EAAaD,EAAQ9J,IACZ6E,MACLvH,EAAM4J,KAAK,CAAE6C,aAAY7L,QAAQ,IAKrD,EAAKX,SAAS,CAAED,UAXN,2CAND,EAoBnB0M,qBApBmB,uCAoBI,WAAO5M,EAAM4C,GAAb,uBAAAiD,EAAA,sDACPgH,EAAe,EAAKnP,MAAMwC,MACvBgD,EAAI,EAFA,YAEGA,EAAI2J,EAAanK,QAFpB,oBAGGvF,EAAU0P,EAAa3J,GACzBA,IAAMN,EAJP,wBAKOzF,EAAQ2D,QAAS,EALxB,mBAMauC,OAAOC,kBANpB,aAMa,EAAmByG,cAAczE,GAAWV,UAAU1E,OANnE,OAOO,UAAAmD,OAAOC,kBAAP,SAAmBgF,QAAQhD,GAAWV,UAAU1E,MAAO/C,EAAQwP,WAAWpE,UAPjF,wBASOpL,EAAQ2D,QAAS,EATxB,QAE4BoC,IAF5B,uBAYb,EAAK/C,SAAS,CAAED,MAAO2M,IAZV,4CApBJ,wDAET,EAAKnP,MAAQ,CAAEwC,MAAO,IAFb,E,qDAmCT,IAAD,OACC,OACU,sBAAK4B,UAAU,YAAf,UACU,sBAAKA,UAAU,MAAf,UAAqB,mBAAGA,UAAU,iBAAb,uBAA2C,2CAC/DpG,KAAKgC,MAAMwC,MAAMyC,KAAI,SAAC3C,EAAM4C,GACnB,OAAO,sBAAK1D,QAAS,kBAAM,EAAK0N,qBAAqB5M,EAAM4C,IAApD,cAAoF,sBAAKd,UAAU,cAAf,UAA8B9B,EAAKc,OAAS,mBAAGgB,UAAU,iBAAb,oBAA2C,mBAAGA,UAAU,iBAAb,uBAA4C,+BAAQ9B,EAAK2M,WAAWG,aAA9K,SAAWlK,QAHxE,c,GA1CnBN,aCCpCyK,G,uKAEF,OACE,qBAAKrN,MAAO,CAAEF,MAAO,OAAQC,OAAQ,QAArC,SACE,cAAC,GAAD,U,GAJiB6C,aAuBV1G,oBAbf,SAAyB8B,GACvB,MAAO,CACLE,YAAaF,EAAME,eAWiB,KAAzBhC,CAA+BmR,I,oBCS/BC,I,yDAnCL,WAAYjO,GAAQ,IAAD,8BACT,cAAMA,IAIhBkO,eAAiB,WACP,IAAMC,EAAOC,SAASC,gBACjB,EAAK1P,MAAM2P,WASNF,SAASG,iBARLJ,EAAKK,kBACCL,EAAKK,oBACJL,EAAKM,wBACNN,EAAKM,0BACJN,EAAKO,qBACNP,EAAKO,sBAMzB,EAAKtN,SAAS,CAAEkN,YAAa,EAAK3P,MAAM2P,cAjBxC,EAAK3P,MAAQ,CAAE2P,YAAY,GAFlB,E,qDAsBT,OACU,sBAAKvL,UAAU,aAAf,UACU,sBAAK5C,QAAS,aAAd,cAA0B,sBAAK4C,UAAU,cAAf,UAA6B,mBAAGA,UAAU,iBAAb,2BAA+C,mEACtG,qBAAK5C,QAASxD,KAAKuR,eAAnB,SACWvR,KAAKgC,MAAM2P,WAAa,sBAAKvL,UAAU,cAAf,UAA6B,mBAAGA,UAAU,iBAAb,8BAAkD,sEAA0C,sBAAKA,UAAU,cAAf,UAA6B,mBAAGA,UAAU,iBAAb,yBAA6C,+DAEtO,sBAAK5C,QAAS,aAAd,cAA0B,sBAAK4C,UAAU,cAAf,UAA6B,mBAAGA,UAAU,iBAAb,kBAAsC,mDAC7F,sBAAK5C,QAAS,aAAd,cAA0B,sBAAK4C,UAAU,cAAf,UAA6B,mBAAGA,UAAU,iBAAb,uBAA2C,2D,GA9B9GQ,cCEPoL,G,kDAKX,WAAY3O,GAAQ,IAAD,8BACT,cAAMA,IAKhBH,kBANmB,sBAMC,oCAAAiH,EAAA,sEACYxC,OAAOyF,UAAUC,aAAa0D,mBAD1C,OAIV,IAHMC,EADI,OAEJiB,EAAM,GACNC,EAAU,GACPhL,EAAQ,EAAGA,EAAQ8J,EAAQhK,OAAQE,IAEV,gBADlB+J,EAAaD,EAAQ9J,IACZ6E,MACLkG,EAAI7D,KAAK,CAAE6C,aAAY7L,OAAgC,YAAxB6L,EAAWpE,WAE5B,gBAApBoE,EAAWlF,MACLmG,EAAQ9D,KAAK,CAAE6C,aAAY7L,OAAgC,YAAxB6L,EAAWpE,WAIlE,EAAKpI,SAAS,CAAEwN,MAAKC,YAdX,2CAND,EAuBnBC,kBAAoB,SAAC7N,EAAM4C,GAEjB,IADA,IAAMkL,EAAa,EAAKpQ,MAAMiQ,IACrBzK,EAAI,EAAGA,EAAI4K,EAAWpL,OAAQQ,IAAK,CAClC,IAAM/F,EAAU2Q,EAAW5K,GAEjB/F,EAAQ2D,OADdoC,IAAMN,EAOpB,EAAKzC,SAAS,CAAEwN,IAAKG,KAlCZ,EAqCnBlB,qBAAuB,SAAC5M,EAAM4C,GAEpB,IADA,IAAMmL,EAAiB,EAAKrQ,MAAMkQ,QACzB1K,EAAI,EAAGA,EAAI6K,EAAerL,OAAQQ,IAAK,CACtC,IAAM/F,EAAU4Q,EAAe7K,GAErB/F,EAAQ2D,OADdoC,IAAMN,EAMpB,EAAKzC,SAAS,CAAEyN,QAASG,KA7CzB,EAAKrQ,MAAQ,CAAEiQ,IAAK,GAAIC,QAAS,IAFxB,E,qDAkDT,IAAD,OACC,OACU,sBAAK9L,UAAU,YAAf,UACU,sBAAKA,UAAU,MAAf,UAAqB,mBAAGA,UAAU,iBAAb,kBAAsC,gDAC1DpG,KAAKgC,MAAMiQ,IAAIhL,KAAI,SAAC3C,EAAM4C,GACjB,OAAO,qBAAK1D,QAAS,kBAAM,EAAK2O,kBAAkB7N,EAAM4C,IAAQd,UAAW9B,EAAKc,OAAS,SAAW,GAA7F,SAAsH,sBAAKgB,UAAU,cAAf,UAA8B9B,EAAKc,OAAS,mBAAGgB,UAAU,iBAAb,oBAA2C,mBAAGA,UAAU,iBAAb,kBAAuC,+BAAQ9B,EAAK2M,WAAWG,YAAtK,MAAQlK,MAE/H,sBAAKd,UAAU,MAAf,UAAqB,mBAAGA,UAAU,iBAAb,wBAA4C,4CAChEpG,KAAKgC,MAAMkQ,QAAQjL,KAAI,SAAC3C,EAAM4C,GACrB,OAAO,qBAAK1D,QAAS,kBAAM,EAAK0N,qBAAqB5M,EAAM4C,IAAQd,UAAW9B,EAAKc,OAAS,SAAW,GAAhG,SAA4H,sBAAKgB,UAAU,cAAf,UAA8B9B,EAAKc,OAAS,mBAAGgB,UAAU,iBAAb,oBAA2C,mBAAGA,UAAU,iBAAb,wBAA6C,+BAAQ9B,EAAK2M,WAAWG,YAA/K,UAAYlK,QAPjH,W,GAzDtBN,aCKjC0L,I,yDACJ,WAAYjP,GAAQ,IAAD,8BACjB,cAAMA,IAGRkP,aAAe,WACb9O,QAAQC,IAAI,gBACZ,EAAKL,MAAMtC,oBAJX,EAAKiB,MAAQ,CAAEwQ,WAAY3J,GAAKE,aAAc0J,QAAS5J,GAAKC,WAF3C,E,qDAQT,IAAD,OACC1G,EAAoBpC,KAAKqD,MAAzBjB,gBACR,OACE,sBACEgE,UAAU,aACVpC,MAAO,CACLF,MAAO,OACPC,OAAQ,OACRwB,eAAgB,SAChBC,WAAY,SACZF,QAAS,OACTD,SAAU,YARd,UAWE,sBAAKrB,MAAO,CAAEqB,SAAU,WAAYY,KAAM,EAAGX,QAAS,QAAtD,UACE,cAAC,KAAD,CAAOqB,KAAK,UAAUsB,MAAOjI,KAAKqD,MAAMb,aAAawE,OAArD,SACE,cAAC,KAAD,CACEhD,MAAO,CAAEuE,OAAQ,WACjB/E,QAASxD,KAAKqD,MAAMqP,cACpB/L,KAAK,QACLb,MAAM,SACNK,KAAM,mBAAGC,UAAU,iBAAb,sBAGV,cAAC,KAAD,CACEpC,MAAO,CAAEuE,OAAQ,WACjB/E,QAASxD,KAAKqD,MAAMsP,kBACpBhM,KAAK,QACLb,MAAM,SACNK,KAAM,mBAAGC,UAAU,iBAAb,wBAER,cAAC,KAAD,CAAUwM,QAAS,cAACC,GAAD,IAAmBC,QAAS,CAAC,SAAhD,SACE,cAAC,KAAD,CACE9O,MAAO,CAAEuE,OAAQ,WAEjB5B,KAAK,QACLb,MAAM,SACNK,KAAM,mBAAGC,UAAU,iBAAb,sBAvBZ,OA6BA,cAAC,KAAD,CACE5C,QAASxD,KAAKqD,MAAM0P,mBACpB/O,MAAO,CAAEuE,OAAQ,WACjB5B,KAAK,QACLb,MAAM,SACNK,KAAM,mBAAGC,UAAU,iBAAb,kBAEPpG,KAAKgC,MAAMyQ,QACV,sBAAKzO,MAAO,CAAEqB,SAAU,YAAxB,UACE,cAAC,KAAD,CACE7B,QAAS,WACP,EAAKH,MAAM2P,YACX,EAAKvO,SAAS,CAAEgO,SAAS,KAE3BzO,MAAO,CAAEuE,OAAQ,WACjB5B,KAAK,QACLb,MAAM,SACNK,KAAM,mBAAGC,UAAU,iBAAb,mBAER,cAAC,KAAD,CAAU6M,aAAa,EAAMH,QAAS,CAAC,SAAUF,QAAS,cAAC,GAAD,IAA1D,SACE,cAAC,KAAD,CAEEjM,KAAK,QACLb,MAAM,SACN9B,MAAO,CAAEqB,SAAU,WAAYO,QAAS,EAAG0C,OAAQ,GACnDnC,KAAM,mBAAGC,UAAU,iBAAb,0BAJF,aAbgC,OAsB1C,cAAC,KAAD,CACE5C,QAAS,WACP,EAAKH,MAAM6P,YACX,EAAKzO,SAAS,CAAEgO,SAAS,KAE3BzO,MAAO,CAAEuE,OAAQ,WACjB5B,KAAK,QACLb,MAAM,SACNK,KAAM,mBAAGC,UAAU,iBAAb,uBAIV,cAAC,KAAD,CACEpC,MAAO,CAAEuE,OAAQ,WACjB5B,KAAK,QACL1H,KAAK,UACL6G,MAAM,SACNC,QAAM,EACNI,KAAM,mBAAGC,UAAU,iBAAb,sBACN5C,QAASxD,KAAKqD,MAAM8P,YAErBnT,KAAKgC,MAAMwQ,WACV,sBAAKxO,MAAO,CAAEqB,SAAU,YAAxB,UACE,cAAC,KAAD,CACE7B,QAAS,WACP,EAAKH,MAAM+P,eACX,EAAK3O,SAAS,CAAE+N,YAAY,KAE9BxO,MAAO,CAAEuE,OAAQ,WACjB5B,KAAK,QACLb,MAAM,SACNK,KAAM,mBAAGC,UAAU,iBAAb,wBAER,cAAC,KAAD,CAAU6M,aAAa,EAAMH,QAAS,CAAC,SAAUF,QAAS,cAAC,GAAD,IAA1D,SACE,cAAC,KAAD,CACEjM,KAAK,QACLb,MAAM,SACN9B,MAAO,CAAEqB,SAAU,WAAYO,QAAS,EAAG0C,OAAQ,GACnDnC,KAAM,mBAAGC,UAAU,iBAAb,+BAhB8B,UAqB1C,cAAC,KAAD,CACE5C,QAAS,WACP,EAAKH,MAAMgQ,eACX,EAAK5O,SAAS,CAAE+N,YAAY,KAE9BxO,MAAO,CAAEuE,OAAQ,WACjB5B,KAAK,QACLb,MAAM,SACNK,KAAM,mBAAGC,UAAU,iBAAb,4BAGV,sBAAKpC,MAAO,CAAEqB,SAAU,WAAYiD,MAAO,EAAGhD,QAAS,QAAvD,UACGlD,EAAgB4E,OAAS,EACxB,cAAC,KAAD,CACEhD,MAAO,CAAEuE,OAAQ,WACjB5B,KAAK,QACLnD,QAASxD,KAAKuS,aACdzM,MAAM,SACNK,KAAM,mBAAGC,UAAU,iBAAb,uBAEN,KACJ,cAAC,KAAD,CACE5C,QAASxD,KAAKqD,MAAMiQ,YACpBtP,MAAO,CAAEuE,OAAQ,WACjB5B,KAAK,QACLb,MAAM,SACNK,KAAM,mBAAGC,UAAU,iBAAb,0BAER,cAAC,KAAD,CACE5C,QAASxD,KAAKqD,MAAMkQ,gBACpBvP,MAAO,CAAEuE,OAAQ,WACjB5B,KAAK,QACLb,MAAM,SACNK,KAAM,mBAAGC,UAAU,iBAAb,oC,GA9JOQ,cAqLV1G,oBAhBf,SAAyB8B,GACvB,MAAO,CACLE,YAAaF,EAAME,YACnBE,gBAAiBJ,EAAMI,gBACvBI,aAAcR,EAAMQ,iBAIxB,SAA4ByC,GAC1B,MAAO,CACLlE,iBAAkB,kBAAMkE,EAASlE,SAMtBb,CAA6CoS,I,oBCtLtDlO,GAAY,CACR,UACA,UACA,UACA,kBACA,UACA,UACA,kBACA,WAGJoP,G,kDACI,WAAYnQ,GAAQ,IAAD,8BACT,cAAMA,IAMhBH,kBAAoB,WAAO,IAAD,IACV4L,EAAc,EAAKzL,MAAMtB,kBAAkB+I,IAAI,EAAKzH,MAAMiB,KAAKX,IACrE,EAAKY,SAASnB,UAAd,OAA0B0L,QAA1B,IAA0BA,GAA1B,UAA0BA,EAAanN,aAAvC,aAA0B,EAAoBtB,OAC9C,EAAK8C,SAASC,UAAd,OAA0B0L,QAA1B,IAA0BA,GAA1B,UAA0BA,EAAatK,aAAvC,aAA0B,EAAoBnE,OAC1C,EAAK8C,SAASC,UACR,EAAKqB,SAAS,CAAEC,UAAU,IAE1B,EAAKD,SAAS,CAAEC,UAAU,KAd3B,EAkBnBpB,mBAAqB,SAACqB,GACZ,GAAI,EAAKtB,MAAMtB,oBAAsB4C,EAAS5C,kBAAmB,CAAC,IAAD,IACjD+M,EAAc,EAAKzL,MAAMtB,kBAAkB+I,IAAI,EAAKzH,MAAMiB,KAAKX,IACrE,EAAKY,SAASnB,UAAd,OAA0B0L,QAA1B,IAA0BA,GAA1B,UAA0BA,EAAanN,aAAvC,aAA0B,EAAoBtB,OAC9C,EAAK8C,SAASC,UAAd,OAA0B0L,QAA1B,IAA0BA,GAA1B,UAA0BA,EAAatK,aAAvC,aAA0B,EAAoBnE,OAC1C,EAAK8C,SAASC,UACR,EAAKqB,SAAS,CAAEC,UAAU,IAE1B,EAAKD,SAAS,CAAEC,UAAU,MA1BrC,EA+BnBE,KAAO,SAACC,GACEA,EAAEC,iBACF,IAAMF,EAAO,EAAK5C,MAAM4C,KAId,EAAKL,SAASQ,OAHnBH,EAKL,EAAKH,SAAS,CAAEG,MAAOA,KAvCd,EA0CnBxE,cAAgB,SAACyE,GACP,EAAKxB,MAAM2B,yBACXnC,EAAMoC,SAAS7E,EAAc,CAAEC,OAAQ,EAAK8C,SAASC,aACrD,EAAKC,MAAMtC,kBAAiB,IA3C5B,EAAKiB,MAAQ,CAAE4C,MAAM,EAAOF,UAAU,GACtC,EAAKH,SAAW,KAChB,EAAKpB,SAAW,KAJP,E,qDAkDT,IAAD,aACSsQ,EAAiBzT,KAAKqD,MAAtBoQ,aACR,OACU,qBAAKrN,UAAU,gBAAgBpC,MAAO,CAAEF,MAAM,GAAD,OAAK2P,EAAL,KAAsB1P,OAAO,GAAD,OAAoB,GAAf0P,EAAoB,EAAzB,MAAzE,SACU,qBAAKrN,UAAU,0BAAf,SACU,sBACUzC,GAAI3D,KAAKqD,MAAMiB,KAAKX,GACpBH,QAASxD,KAAKI,cACd4D,MAAO,CACGmB,OAAQnF,KAAKqD,MAAMiB,KAAKc,OAAS,gBAAkB,OACnDC,SAAU,WACVvB,MAAO,OACPC,OAAQ,OACRuB,QAAS,OACTC,eAAgB,SAChBC,WAAY,UAVhC,UAaU,sBAAMxB,MAAO,CAAEyB,MAAO,OAAQC,WAAY,OAAQL,SAAU,WAAYM,SAAU,MAAOC,OAAQ,GAAjG,mBACW5F,KAAKqD,MAAMiB,YADtB,aACW,EAAiByF,OAE3B/J,KAAKgC,MAAM4C,KACF,cAAC,KAAD,CACUpB,QAASxD,KAAK4E,KACd3F,KAAK,OACL6G,MAAM,SACNC,QAAM,EACN/B,MAAO,CAAEqB,SAAU,WAAYW,IAAK,EAAGC,KAAM,EAAGC,OAAQ,IACxDC,KAAM,mBAAGC,UAAU,iBAAb,0BAGN,cAAC,KAAD,CACUL,QAAM,EACNvC,QAASxD,KAAK4E,KACd3F,KAAK,OACL6G,MAAM,SACN9B,MAAO,CAAEqB,SAAU,WAAYW,IAAK,EAAGC,KAAM,EAAGC,OAAQ,IACxDC,KAAM,mBAAGC,UAAU,iBAAb,yBAGlCpG,KAAKgC,MAAM0C,SAmBJ,KAnBe,qBACdf,GAAG,cACHK,MAAO,CACGyB,MAAO,OACPH,QAAS,OACTE,WAAY,SACZD,eAAgB,SAChBF,SAAU,WACVgB,aAAc,MACdvC,MAAO,IACPC,OAAQ,KAVJ,SAad,cAAC,KAAD,CACUC,MAAO,CAAEsC,gBAAgB,GAAD,OAAKlC,GAAUmC,KAAKC,MAAsB,GAAhBD,KAAKE,YAAmBC,cAAe,SAAU5C,MAAO,OAAQC,OAAQ,QAC1H4C,KAAK,QAFf,mBAIW3G,KAAKqD,MAAMiB,YAJtB,iBAIW,EAAiByF,KAAK2J,MAAM,qBAJvC,aAIW,EAA2CrJ,KAAK,QAGrE,uBACUxG,IAAK,SAACA,GACI,EAAKV,SAAWU,GAE1BF,GAAG,QACHC,UAAU,EACVE,MAAO,OACPC,OAAQ,OACRC,MAAO,CAAEC,WAAY,QAASkB,OAAQ,uBAEhD,uBACUtB,IAAK,SAACA,GACI,EAAKU,SAAWV,GAE1BF,GAAG,QACHC,UAAU,e,GA9HrDgD,aAoJZ1G,oBAbf,SAAyB8B,GACf,MAAO,CACGD,kBAAmBC,EAAMD,sBAK7C,SAA4BkD,GAClB,MAAO,CACGlE,iBAAkB,SAACtB,GAAD,OAAUwF,EAASlE,SAI1Cb,CAA6CsT,IC/JtDG,I,yDACJ,WAAYtQ,GAAQ,IAAD,8BACjB,cAAMA,IAKRH,kBAAoB,WAAO,IACjBd,EAAoB,EAAKiB,MAAzBjB,gBACJA,EAAgB4E,OAAS,EAC3B,EAAKvC,SAAS,CACZmP,kBAAmB,IAAMxR,EAAgB4E,SAG3C,EAAKvC,SAAS,CACZmP,kBAAmB,MAdN,EAmBnBtQ,mBAAqB,SAACC,GAAe,IAC3BnB,EAAoB,EAAKiB,MAAzBjB,gBACJmB,EAAUnB,kBAAoBA,IAC5BA,EAAgB4E,OAAS,EAC3B,EAAKvC,SAAS,CACZmP,kBAAmB,IAAMxR,EAAgB4E,SAG3C,EAAKvC,SAAS,CACZmP,kBAAmB,KAGnBxR,EAAgB4E,OAAS,GAC3B,EAAK3D,MAAMtC,kBAAiB,KAhCf,EAsCnBqG,sBAAwB,SAAC9C,EAAM4C,GAC7B,EAAKG,UAAUH,IAvCE,EA2CnBG,UAAY,SAACH,GAGX,IAFA,IAAMI,EAAa,eAAQ,EAAKjE,MAAMnB,aAChCxB,EAAQ4G,EAAc5G,MACnB6G,EAAI,EAAGA,EAAI7G,EAAMsG,OAAQO,IAAK,CACrB7G,EAAM6G,GACdnC,QAAS,EAGnB,IADA,IAAMyO,EAAMC,MAAMC,KAAK,EAAK1Q,MAAMjB,iBACzBoF,EAAI,EAAGA,EAAGqM,EAAM7M,OAAQQ,IAAK,CACpC,IAAM/F,EAAUoS,EAAMrM,GAEpB/F,EAAQ2D,OADNoC,IAAMN,EAMZ,EAAK7D,MAAMxC,cAAcgT,GACzB,EAAKxQ,MAAMzC,UAAX,eAA0B0G,KA1D1B,EAAKtF,MAAQ,CACX4R,kBAAmB,GAHJ,E,qDAgET,IAAD,OACCxR,EAAoBpC,KAAKqD,MAAzBjB,gBACAwR,EAAsB5T,KAAKgC,MAA3B4R,kBACR,OACE,qBAAKxN,UAAU,2BAAf,SACGhE,EAAgB6E,KAAI,SAAC3C,EAAM4C,GAC1B,OAAO,cAAC,GAAD,CAAc5C,KAAMA,EAAkBmP,aAAcG,EAAmB5O,uBAAwB,EAAKoC,uBAArEF,Y,GAvEXN,cA6FtB1G,oBAhBf,SAAyB8B,GACvB,MAAO,CACLlB,cAAekB,EAAMM,GAAGxB,cACxBsB,gBAAiBJ,EAAMI,gBACvBF,YAAaF,EAAME,gBAIvB,SAA4B+C,GAC1B,MAAO,CACLlE,iBAAkB,SAACtB,GAAD,OAAUwF,EAASlE,MACrCH,UAAW,SAACnB,GAAD,OAAUwF,EAASrE,EAAUnB,KACxCoB,cAAe,SAACpB,GAAD,OAAUwF,EAASpE,EAAcpB,QAIrCS,CAA6CyT,IC/FtDK,G,4MACJC,aAAe,SAACpP,GACd,EAAKxB,MAAMhC,SAAS,CAAEH,SAAS,EAAOC,OAAQ,GAAIC,OAAQ,Q,EAE5D8S,KAAO,WACLvM,OAAOC,WAAWmI,kB,uDAKlB,OADAtM,QAAQC,IAAI1D,KAAKqD,MAAMd,YAErB,cAAC,KAAD,CACE4R,MAAOnU,KAAKqD,MAAMd,WAAWpB,OAC7BD,QAASlB,KAAKqD,MAAMd,WAAWrB,QAC/BkT,SAAUpU,KAAKiU,aACfC,KAAMlU,KAAKkU,KACXG,UAAU,EALZ,SAOGrU,KAAKqD,MAAMd,WAAWnB,a,GAlBFwF,aAmCd1G,oBAZf,SAAyB8B,GACvB,MAAO,CACLO,WAAYP,EAAMO,eAItB,SAA4B0C,GAC1B,MAAO,CACL5D,SAAU,SAAC5B,GAAD,OAAUwF,EAAS5D,EAAS5B,QAI3BS,CAA6C8T,I,sECnCpDM,GAAoBC,KAApBD,OAAQE,GAAYD,KAAZC,QACVC,G,4MACJC,YAAc,SAACC,GAAY,IAAD,EACxBhN,OAAOC,WAAWgN,gBAAgBD,EAAOzV,SACzC,YAAK2V,eAAL,SAAcC,e,uDAEN,IAAD,OACP,OACE,eAAC,KAAD,CAAQ9Q,MAAO,CAAEF,MAAO,IAAKC,OAAQ,QAArC,UACE,cAACyQ,GAAD,CAASxQ,MAAO,CAAEF,MAAO,QAAzB,SACG9D,KAAKqD,MAAMb,aAAayE,KAAI,SAAC3C,EAAM4C,GAClC,OACE,eAAC,KAAD,WACE,cAAC,KAAD,CAAK6N,KAAM,EAAG/Q,MAAO,CAAEwB,WAAY,WAAYF,QAAS,OAAQ0P,QAAS,GAAzE,SACG1Q,EAAKX,KAAOgE,OAAOC,WAAW/H,OAAO8D,GAAK,KAAO,cAAC,KAAD,CAAQsR,IAAI,yBAEhE,eAAC,KAAD,CAAKF,KAAM,GAAX,UACGzQ,EAAKX,KAAOgE,OAAOC,WAAW/H,OAAO8D,GAAK,KACzC,cAAC,KAAD,CAAKK,MAAO,CAAEF,MAAO,QAArB,SACE,qBAAKE,MAAO,CAAEwE,SAAU,GAAI/C,MAAO,WAAnC,SAAiDnB,EAAKyF,SAI1D,cAAC,KAAD,CAAK/F,MAAO,CAAEF,MAAO,QAArB,SACE,qBACEE,MACEM,EAAKX,KAAOgE,OAAOC,WAAW/H,OAAO8D,GACjC,CACEuR,UAAW,EACXC,aAAc,EACdC,YAAa,EACbnR,WAAY,UACZwB,MAAO,OACPY,aAAc,qBACdf,QAAS,QACTK,SAAU,MACVqP,QAAS,oBACTK,WAAY,OACZ7M,SAAU,IAEZ,CACE0M,UAAW,EACXC,aAAc,EACdlR,WAAY,OACZoC,aAAc,qBACdf,QAAS,QACTK,SAAU,MACVqP,QAAS,oBACTM,MAAO,OACP9M,SAAU,GACV/C,MAAO,WA1BjB,SA8BGnB,EAAKpF,iBA1CJgI,QAkDhB,cAACoN,GAAD,CAAQtQ,MAAO,CAAEgR,QAAS,EAAGzM,OAAQ,GAAIjD,QAAS,OAAQC,eAAgB,SAAUC,WAAY,UAAhG,SACE,eAAC,KAAD,CAAM3B,IAAK,SAACA,GAAD,OAAO,EAAKgR,QAAQhR,GAAK0R,OAAO,SAASxL,KAAK,mBAAmByL,SAAUxV,KAAK0U,YAA3F,UACE,cAAC,KAAKe,KAAN,CAAW1L,KAAK,UAAhB,SACE,cAAC,KAAD,CAAO2L,YAAY,8BAErB,cAAC,KAAKD,KAAN,UACE,cAAC,KAAD,CACEzR,MAAO,CAAEuB,eAAgB,SAAUC,WAAY,SAAUF,QAAS,QAClErG,KAAK,UACL0W,SAAS,SACTxP,KAAM,mBAAGC,UAAU,iBAAb,kC,GAvEHQ,aAsFJ1G,oBANf,SAAyB8B,GACvB,MAAO,CACLQ,aAAcR,EAAMQ,gBAIgB,KAAzBtC,CAA+BuU,ICxE9BH,IAA2BC,KAAnCqB,OAAmCrB,KAA3BD,QAAQuB,GAAmBtB,KAAnBsB,MAAOrB,GAAYD,KAAZC,QAEzBtL,GACG,YADHA,GAEG,YAFHA,GAGI,aAGJ4M,G,kDACJ,WAAYzS,GAAQ,IAAD,8BACjB,cAAMA,IAIRH,kBAAoB,WACd2F,GAAKE,cACP,EAAKsK,eAEHxK,GAAKC,WACP,EAAKoK,aAVU,EAyBnBA,UAAY,WAAO,IAAD,EAChBrK,GAAKC,WAAY,EACjB,UAAAnB,OAAOC,kBAAP,SAAmBgF,QAAQ1D,GAAiB,OA3B3B,EA8BnB8J,UAAY,WAAO,IAAD,EAChBnK,GAAKC,WAAY,EACjB,UAAAnB,OAAOC,kBAAP,SAAmByG,cAAcnF,KAhChB,EAmCnBmK,aAAe,WAAO,IAAD,EACnBxK,GAAKE,cAAe,EACpB,UAAApB,OAAOC,kBAAP,SAAmBgF,QAAQ1D,IAAiB,IArC3B,EAwCnBkK,aAAe,WAAO,IAAD,EACnBvK,GAAKE,cAAe,EACpB,UAAApB,OAAOC,kBAAP,SAAmByG,cAAcnF,KA1ChB,EA6CnB6J,mBAAqB,WAAO,IAAD,EACzB,UAAApL,OAAOC,kBAAP,SAAmBgF,QAAQ1D,KA9CV,EAiDnBiK,UAAY,WAAO,IAAD,EAChB,UAAAxL,OAAOC,kBAAP,SAAmB+E,MAAK,GACxB9J,EAAMoC,SAAS1E,GAAc,KAnDZ,EAsDnBmS,cAAgB,WACd,IAAMqD,EAActE,SAASuE,eAAe,eAE5B,SADAD,EAAY/R,MAAMsB,SAEhCyQ,EAAY/R,MAAMsB,QAAU,OAC5BqC,OAAOC,WAAWqO,oBAElBF,EAAY/R,MAAMsB,QAAU,QA7Db,EAiEnBiO,gBAAkB,WAChB,IAAMwC,EAActE,SAASuE,eAAe,gBACtC1Q,EAAUyQ,EAAY/R,MAAMsB,QAEhCyQ,EAAY/R,MAAMsB,QADJ,SAAZA,EAC0B,OAEA,QAvEb,EA2EnBqN,kBA3EmB,sBA2EC,4BAAAxI,EAAA,sEACKxC,OAAOC,WAAWiI,WADvB,OACZA,EADY,OAElB,EAAKxM,MAAMhC,SAAS,CAClBH,SAAS,EACTC,OAAQ,kCACRC,OACE,qCACE,cAAC,KAAD,CAAK4C,MAAO,CAAEuE,OAAQ,SAAtB,SACE,cAAC,KAAD,CACE2N,YACE,cAAC,KAAD,CAAK/P,KAAM,cAACgQ,GAAA,EAAD,IAAqB1Q,MAAM,UAAtC,8BAIFiQ,YAAY,4BACZU,UAAQ,EACRnL,MAAO4E,EAAS9F,SAGpB,cAAC,KAAD,CAAK/F,MAAO,CAAEuE,OAAQ,SAAtB,SACE,cAAC,KAAM8N,SAAP,CACEC,SAAU,SAACzR,GACTgE,GAAKG,SAAWnE,EAAE0R,OAAOtL,OAE3BiL,YACE,cAAC,KAAD,CAAK/P,KAAM,cAACgQ,GAAA,EAAD,IAAqB1Q,MAAM,UAAtC,iCAIFiQ,YAAY,+BACZzK,MAAO4E,EAAS7G,kBA9BR,2CA3ED,EAiHnBsK,YAAc,WACZkD,KAAM1G,KAAK,CACTqE,MAAO,gCACPsC,QACE,8BACE,cAAC,KAAMC,OAAP,CACE/S,GAAG,WACHgT,SAAU,SAAC1L,GACTwG,SAASuE,eAAe,YAAYY,SACpCnF,SAASoF,YAAY,QACrB3X,KAAQ4Q,KAAK7E,IAEf6L,YAAU,EACVC,YAAa,cAAC,KAAD,CAAQC,wBAAsB,YAAY7Q,KAAM,cAAC8Q,GAAA,EAAD,MAC7DhM,MAAOtD,OAAOuP,SAASC,SAI7BC,OAAQ,QAjIV,EAAKC,UAAY,KAFA,E,qDAuIT,IACAvW,EAAkBd,KAAKqD,MAAvBvC,cACR,OACE,eAAC,KAAD,CAAQkD,MAAO,CAAED,OAAQ,QAAzB,UACE,cAAC,GAAD,IACA,cAAC8R,GAAD,CAAO7R,MAAO,CAAEsB,QAAS,QAAU3B,GAAG,cAAcG,MAAO,IAAKN,QAASxD,KAAKsX,aAA9E,SACE,cAAC,GAAD,MAEF,eAAC,KAAD,WACGxW,EACC,cAAC,GAAD,CAAS6C,GAAG,aAAZ,SACE,eAAC,KAAD,CAAQK,MAAO,CAAED,OAAQ,QAAzB,UACE,cAAC8R,GAAD,CAAO/R,MAAO,IAAKH,GAAG,cAAcK,MAAO,CAAEqB,SAAU,WAAYa,OAAQ,EAAGjC,WAAY,eAA1F,SACE,cAAC,GAAD,MAEF,cAAC,GAAD,CAASD,MAAO,CAAEuT,SAAU,UAAY5T,GAAG,aAA3C,SACE,cAAC,GAAD,WAKN,cAAC,GAAD,CAASA,GAAG,gBAAZ,SACE,cAAC,KAAD,CAAQK,MAAO,CAAED,OAAQ,QAAzB,SACE,cAAC,GAAD,QAKN,cAAC,GAAD,UACE,cAAC,GAAD,CACEiP,UAAWhT,KAAKgT,UAChBE,UAAWlT,KAAKkT,UAChBR,cAAe1S,KAAK0S,cACpBK,mBAAoB/S,KAAK+S,mBACzBI,UAAWnT,KAAKmT,UAChBC,aAAcpT,KAAKoT,aACnBC,aAAcrT,KAAKqT,aACnBE,gBAAiBvT,KAAKuT,gBACtBZ,kBAAmB3S,KAAK2S,kBACxBW,YAAatT,KAAKsT,mBAIvBxS,EACC,cAAC+U,GAAD,CACE7R,MAAO,CACLC,WAAY,UACZH,MAAO,OACPwB,QAAStF,KAAKqD,MAAMZ,mBAAmBuE,OAAS,EAAI,QAAU,QAEhElD,MAAO,IACPH,GAAG,eAPL,SASE,cAAC,GAAD,MAEA,Y,GA/LYiD,aAiNT1G,oBAbf,SAAyB8B,GACvB,MAAO,CACLlB,cAAekB,EAAMM,GAAGxB,cACxB2B,mBAAoBT,EAAMS,uBAI9B,SAA4BwC,GAC1B,MAAO,CACL5D,SAAU,SAAC5B,GAAD,OAAUwF,EAAS5D,EAAS5B,QAI3BS,CAA6C4V,I,IC5OzBlP,Y,OCQ7BsC,GACK,YADLA,GAEK,YAFLA,GAGM,aAGNsO,GACF,WAAYC,EAAU5P,EAAUmB,EAAU2C,GAAW,IAAD,gCAYpD+L,eAZoD,sBAYnC,4BAAAvN,EAAA,sEACQ,EAAKF,aADb,UACP0N,EADO,OAEblU,QAAQC,IAAIiU,IACRA,EAAOF,SAHE,iCAIH,EAAKG,aAJF,uBAKH,EAAKC,SAAS,EAAKhQ,SAAU,EAAK4P,SAAU,EAAKzO,UAL9C,wBAOH,EAAK4D,QAAQ1D,GAAiB,MAP3B,QAUT,EAAKyC,SAAS,GAVL,4CAZmC,KA0BpDmM,QA1BoD,sBA0B1C,4BAAA3N,EAAA,sEAC2B,EAAK4N,wBADhC,cACAC,EADA,gBAEc,EAAK1N,WAAW0N,GAF9B,cAEN,EAAKzN,OAFC,gBAGyB,EAAK0N,sBAAsB,EAAK1N,QAHzD,cAGN,EAAKiB,kBAHC,iBAIwB,EAAK0M,qBAAqB,EAAK3N,QAJvD,QAIN,EAAK4N,iBAJC,mDA1B0C,KAiCpDP,WAAa,WAET,EAAK/X,OAAO6L,GAAG/C,IAA0B,SAAClJ,GACtCgE,QAAQC,IAAIjE,GACZoD,EAAMoC,SAAS1D,EAAW9B,OAG9B,EAAKI,OAAO6L,GAAG/C,GAAf,uCAA6C,6BAAAwB,EAAA,6DAASJ,EAAT,EAASA,KAAT,EAAepG,GAAf,SACnC,EAAKyU,oBAD8B,OAEzCpZ,EAAa,OAAQ+K,EAAO,kDAFa,2CAA7C,kCAAA/J,KAAA,gBAKA,EAAKH,OAAO6L,GAAG/C,GAAf,uCAA6C,6BAAAwB,EAAA,6DAASJ,EAAT,EAASA,KAAT,EAAepG,GAAf,SACnC,EAAKyU,oBAD8B,OAEzCpZ,EAAa,UAAW+K,EAAO,qDAFU,2CAA7C,kCAAA/J,KAAA,gBAKA,EAAKH,OAAO6L,GAAG/C,IAA0B,WACrC,EAAKgE,MAAK,MAGd,EAAK9M,OAAO6L,GAAG9C,IAA0B,YAAuC,IAApCyP,EAAmC,EAAnCA,WAAYnT,EAAuB,EAAvBA,OAAQW,EAAe,EAAfA,SAC5DpC,QAAQC,IAAI,oBAAqB2U,EAAYnT,EAAQW,GACrD,EAAKyS,cAAcD,EAAYnT,EAAQW,MAG3C,EAAKhG,OAAO6L,GAAG9C,GAAf,uCAAwC,WAAOnJ,GAAP,mBAAA0K,EAAA,sDAC9BoO,EAD8B,aACV1V,EAAMgI,WAAWpI,oBADP,IAAA0H,EAAA,iBAE3BjD,GAF2B,6BAAAiD,EAAA,2DAGU1K,EAAKyH,GAAvCgF,EAHwB,EAGxBA,YAAarG,EAHW,EAGXA,UAAUX,EAHC,EAGDA,UAChB,EAAKrF,OAAO8D,GAJK,gCAKN,EAAK+I,QAAQR,EAAarG,EAAUX,GAL9B,OAKtBwH,EALsB,QAOhB,KADN8L,EAAKD,EAAcE,WAAU,SAACnU,GAAD,OAAUA,EAAKY,QAAUA,OAElDwT,EAAqB,CACvBlU,MAAO,GACP7C,MAAO,KACPuD,SAAQW,YAES,UAAjB6G,EAAQX,MACR2M,EAAmBlU,MAAM4J,KAAK1B,GAEb,UAAjBA,EAAQX,OACR2M,EAAmB/W,MAAQ+K,GAE/B6L,EAAcnK,KAAKsK,KAEbA,EAAqBH,EAAcC,GACpB,UAAjB9L,EAAQX,MACR2M,EAAmBlU,MAAM4J,KAAK1B,GAEb,UAAjBA,EAAQX,OACR2M,EAAmB/W,MAAQ+K,IA1BP,0CAE3BxF,EAAQ,EAFmB,YAEhBA,EAAQzH,EAAKuH,QAFG,yCAE3BE,GAF2B,eAEKA,IAFL,sBAgCpCrE,EAAMoC,SAASzD,EAAiB+W,IAhCI,2CAAxC,kCAAAvY,KAAA,iBA3DgD,KA+FpDiK,WA/FoD,sBA+FvC,4BAAAE,EAAA,6DACHwO,EAAK,IAAIrZ,EAAY,WAAaqI,OAAOiR,SAAW,IAAMjR,OAAOkR,MACvE,EAAKhZ,OAAS8Y,EAAG9Y,OACjB,EAAKA,OAAOL,QAAUmZ,EAAGnZ,QAHhB,SAIgB,EAAKK,OAAOL,QAAQmJ,GAA2B,CAAE8O,SAAU,EAAKA,SAAUzO,SAAU,EAAKA,WAJzG,4DAME,CAAEyO,SAAU,EAAKA,SAAUzO,SAAU,EAAKA,WAN5C,yBAQQ,EAAKnJ,OAAOL,QAAQmJ,GAA2B,CAAE8O,SAAU,EAAKA,SAAUzO,SAAU,EAAKA,WARjG,qFA/FuC,KA2GpDoP,kBA3GoD,sBA2GhC,kCAAAjO,EAAA,sEACW,EAAKtK,OAAOL,QAAQoJ,IAD/B,OACVkQ,EADU,OAEVP,EAAgB,GAFN,IAAApO,EAAA,iBAGPjD,GAHO,6BAAAiD,EAAA,2DAI8B2O,EAAa5R,GAA/CgF,EAJI,EAIJA,YAAarG,EAJT,EAISA,UAAUX,EAJnB,EAImBA,UAChB,EAAKrF,OAAO8D,GALf,gCAMc,EAAK+I,QAAQR,EAAarG,EAAUX,GANlD,OAMFwH,EANE,QAQI,KADN8L,EAAKD,EAAcE,WAAU,SAACnU,GAAD,OAAUA,EAAKY,QAAUA,OAElDwT,EAAqB,CACvBlU,MAAO,GACP7C,MAAO,KACPuD,SAAQW,YAES,UAAjB6G,EAAQX,OACR2M,EAAmBlU,MAAQ,CAACkI,IAEX,UAAjBA,EAAQX,OACR2M,EAAmB/W,MAAQ+K,GAE/B6L,EAAcnK,KAAKsK,KAEbA,EAAqBH,EAAcC,GACpB,UAAjB9L,EAAQX,MACR2M,EAAmBlU,MAAM4J,KAAK1B,GAEb,UAAjBA,EAAQX,OACR2M,EAAmB/W,MAAQ+K,IA3B3B,0CAGPxF,EAAQ,EAHD,YAGIA,EAAQ4R,EAAa9R,QAHzB,0CAGPE,GAHO,eAGiCA,IAHjC,uBAiChBrE,EAAMoC,SAASzD,EAAiB+W,IAjChB,4CA3GgC,KA+IpDV,SA/IoD,uCA+IzC,WAAOhQ,EAAU4P,EAAUzO,GAA3B,SAAAmB,EAAA,sEACD,EAAKtK,OAAOL,QAAQmJ,GAA8B,CAAEd,WAAU4P,WAAUzO,SAAUA,IADjF,uBAED,EAAK8O,UAFJ,uBAGD,EAAKM,oBAHJ,2CA/IyC,+DAqJpDL,sBArJoD,sBAqJ5B,4BAAA5N,EAAA,sEACa,EAAKtK,OAAOL,QAAQoJ,IADjC,cACdoP,EADc,yBAEbA,GAFa,2CArJ4B,KA0JpD1N,WA1JoD,uCA0JvC,WAAOY,GAAP,eAAAf,EAAA,sDAET,IACII,EAAS,IAAI5C,OAAOkC,gBAAgBsB,OACtC,MAAOC,GACc,qBAAfA,EAAMrB,MACNtG,QAAQ2H,MAAM,yBAElB3H,QAAQ2H,MAAMA,GART,gBAUHb,EAAOc,KAAK,CACdH,0BAXK,gCAaFX,GAbE,2CA1JuC,2DA0KpD0N,sBA1KoD,uCA0K5B,WAAO1N,GAAP,iBAAAJ,EAAA,sEACI,EAAKtK,OAAOL,QAAQoJ,GAA6B,CAErEmQ,WAAW,EACXC,WAAW,EACXzN,gBAAiBhB,EAAOgB,kBALR,cACd0N,EADc,QAQdzN,EAAoBjB,EAAOkB,oBAAoBwN,IAEnCvN,GAAG,UAArB,uCAAgC,aAA2BC,EAAUC,GAArC,eAAAzB,EAAA,6DAAS0B,EAAT,EAASA,eAAT,kBAElB,EAAKhM,OAAOL,QAAQoJ,GAA8B,CAAEiD,iBAAgBC,aAAcmN,EAAUtV,KAF1E,OAGxBgI,IAHwB,gDAKxBC,EAAQ,EAAD,IALiB,yDAAhC,2DASAJ,EAAkBE,GAAG,UAArB,uCAAgC,aAAgCC,EAAUC,GAA1C,yBAAAzB,EAAA,6DAAS4B,EAAT,EAASA,KAAMC,EAAf,EAAeA,cAAf,SAElBC,EAAsBT,EAAkB7H,GAFtB,SAGe,EAAK9D,OAAOL,QAAQoJ,GAA2B,CAClFqD,sBACAF,OACAC,kBANoB,gBAGhB+C,EAHgB,EAGhBA,WAAYpE,EAHI,EAGJA,SAKpBgB,EAAS,CAAEhI,GAAIoL,EAAYpE,aARH,kDAUxBiB,EAAQ,EAAD,IAViB,0DAAhC,2DAcAJ,EAAkBE,GAAG,yBAAyB,SAAC1J,GAC3C,OAAQA,GACJ,IAAK,aAEL,IAAK,YACD,MACJ,IAAK,SACDwJ,EAAkBY,YAxCV,kBA+CbZ,GA/Ca,2CA1K4B,2DA4NpD0M,qBA5NoD,uCA4N7B,WAAO3N,GAAP,iBAAAJ,EAAA,sEACK,EAAKtK,OAAOL,QAAQoJ,GAA6B,CAAE0C,UAAU,IADlE,cACb2N,EADa,QAGb5M,EAAoB9B,EAAO+B,oBAAoB2M,IAEnCvN,GAAG,UAArB,uCAAgC,aAA2BC,EAAUC,GAArC,eAAAzB,EAAA,6DAAS0B,EAAT,EAASA,eAAT,kBAElB,EAAKhM,OAAOL,QAAQoJ,GAA8B,CAAEkD,aAAcO,EAAkB1I,GAAIkI,mBAFtE,OAGxBF,IAHwB,gDAKxBC,EAAQA,GALgB,yDAAhC,2DASAS,EAAkBX,GAAG,wBAArB,uCAA8C,WAAO1J,GAAP,SAAAmI,EAAA,2DAClCnI,EADkC,OAEjC,eAFiC,OAKjC,cALiC,OAQjC,WARiC,sEASlCqK,EAAkBD,QATgB,iGAA9C,uDAdmB,kBA+BZC,GA/BY,2CA5N6B,2DA8PpDO,QA9PoD,uCA8P1C,WAAO3N,GAAP,2CAAAkL,EAAA,sDAAa0C,EAAb,+BAAwB,KAC1BC,EAAmB,GACnBnL,GAAQ,EACRmG,GAAS,EAHP,KAIE7I,EAJF,cAKGiK,GALH,SAcGA,GAdH,UA8BGA,GA9BH,0BAME4D,EAAmB,CACfnL,MAAO,CACHkL,SAAUA,GAEdrI,OAAO,GAEX7C,GAAQ,EAZV,oCAeEmL,EAAmB,CACfnL,OAAO,EACP6C,MAAO,CACHV,MAAO,CACHiJ,IAAK,IACLC,MAAO,MAEXjJ,OAAQ,CACJgJ,IAAK,IACLC,MAAO,MAEXH,SAAUA,IA1BpB,oCA+BEC,GAAmB,EACnBhF,GAAS,EAhCX,oEAsCD,EAAKyC,OAAO0C,WAAW,UAAatL,EAtCnC,wBAuCF8B,QAAQ2H,MAAM,wBAvCZ,yCA4CatD,EA5Cb,kCA4C4BsF,UAAUC,aAAaC,kBA5CnD,6DA4C6EF,UAAUC,aAAaE,aAAaT,GA5CjH,mCA4CIzM,EA5CJ,KA6CImN,EAAQ7L,EAAQtB,EAAOoN,iBAAiB,GAAKpN,EAAOqN,iBAAiB,GACrEC,EAAS,CACXH,SAEAvO,IAASiK,KACTyE,EAAOC,UAAY,CACf,CAAEC,IAAK,KAAMC,WAAY,IAAQC,gBAAiB,QAClD,CAAEF,IAAK,KAAMC,WAAY,IAAQC,gBAAiB,QAClD,CAAEF,IAAK,KAAMC,WAAY,IAAQC,gBAAiB,QAClD,CAAEF,IAAK,KAAMC,WAAY,IAAQC,gBAAiB,SAEtDJ,EAAOK,aAAe,CAClBC,wBAAyB,KAE7BpL,EAAMoC,SAAS7E,EAAc,CAAEC,aA3DjC,UA8DqB,EAAKmL,kBAAkBoB,QAAQe,GA9DpD,SA8DIO,EA9DJ,QAgEOxC,GAAG,cAAc,WACtBjI,QAAQC,IAAI,qBACZ,EAAK2K,cAAcpP,MAGvBiP,EAASxC,GAAG,kBAAkB,WAC1BjI,QAAQC,IAAI,+BAIhBwK,EAASxC,GAAG,SAAS,WACjBjI,QAAQC,IAAI,uBAGVhB,EA9EJ,eA8E6BG,EAAMgI,WAAWnI,mBA9E9C,KA+EMzD,EA/EN,cAgFOiK,GAhFP,UAqFOA,GArFP,UAyFOA,GAzFP,2BAiFM,EAAKgQ,YAAYxX,OAAO0M,KAAKF,GAC7BxL,EAAkBhB,OAAO0M,KAAK,CAAE/N,SAAQ0O,WAAYb,EAASvK,KAC7DF,QAAQC,IAAIwK,EAASV,OAnF3B,oCAsFM,EAAK0L,YAAYvX,MAAMyM,KAAKF,GAC5BxL,EAAkBf,MAAMyM,KAAK,CAAE/N,SAAQ0O,WAAYb,EAASvK,KAvFlE,oCA0FM,EAAKuV,YAAYtX,WAAWwM,KAAKF,GACjCxL,EAAkBd,WAAWwM,KAAK,CAAE/N,SAAQ0O,WAAYb,EAASvK,KA3FvE,iEAiGFd,EAAMoC,SAASpD,EAAuBa,IAjGpC,mDAmGFe,QAAQC,IAAR,MAnGE,2DA9P0C,2DAqWpDgJ,QArWoD,uCAqW1C,WAAOqC,EAAYlJ,EAAUX,GAA7B,eAAAiF,EAAA,sEACgB,EAAKuE,iBAAiBK,GADtC,cACArC,EADA,yBAECA,GAFD,2CArW0C,+DA0WpDgC,iBA1WoD,uCA0WjC,WAAOK,GAAP,+BAAA5E,EAAA,6DAEPoB,EAAoB,EAAKhB,OAAzBgB,gBAFO,SAGI,EAAK1L,OAAOL,QAAQoJ,GAA2B,CAC9D2C,kBACAyD,oBAAqB,EAAKmJ,iBAAiBxU,GAC3CoL,eANW,cAGTtP,EAHS,gBAQqBA,QARrB,IAQqBA,OARrB,EAQqBA,EAAMkO,OAAlChK,EARO,EAQPA,GAAIoI,EARG,EAQHA,KAAMC,EARH,EAQGA,cAEZgC,EAAe,CACjB,CAAEiB,KAAM,OAAQlB,gBAAiB,SAXtB,SAaQ,EAAKoK,iBAAiBzL,QAAQ,CACjD/I,KACAoL,aACAhD,OACAC,gBACAgC,iBAlBW,cAaTY,EAbS,QAqBNlD,GAAG,cAAc,WACtBjI,QAAQC,IAAI,wBAGhBkL,EAASlD,GAAG,kBAAkB,WAC1BjI,QAAQC,IAAI,+BAIVrD,EAAS,IAAI6O,aACZC,SAASP,EAASpB,OA/BV,kBAgCR,CAAEoB,WAAUvO,SAAQ0L,SAhCZ,4CA1WiC,2DA6YpDsC,cAAgB,SAACpP,GACb,IAAMyD,EAAiB,eAAQG,EAAMgI,WAAWnI,mBAChD,OAAQzD,GACJ,KAAKiK,GAED,IADA,IAAMxH,EAAS,EAAKwX,YAAYxX,OACvBwF,EAAQ,EAAGA,EAAQxF,EAAOsF,OAAQE,IAAS,CAChD,IAAMiS,EAAezX,EAAOwF,GACtBgF,EAAciN,EAAaxV,GACjC,EAAK9D,OAAOL,QAAQoJ,GAA2B,CAAEsD,gBACjDiN,EAAa/M,QAEjB,EAAK8M,YAAYxX,OAAS,GAC1BgB,EAAkBhB,OAAS,GAC3B,MACJ,KAAKwH,GAED,IADA,IAAMkQ,EAAS,EAAKF,YAAYvX,MACvBuF,EAAQ,EAAGA,EAAQkS,EAAOpS,OAAQE,IAAS,CAChD,IAAMmS,EAAeD,EAAOlS,GACtBgF,EAAcmN,EAAa1V,GACjC,EAAK9D,OAAOL,QAAQoJ,GAA2B,CAAEsD,gBACjDmN,EAAajN,QAEjB,EAAK8M,YAAYvX,MAAQ,GACzBe,EAAkBf,MAAQ,GAC1B,MACJ,KAAKuH,GAED,IADA,IAAMtH,EAAa,EAAKsX,YAAYtX,WAC3BsF,EAAQ,EAAGA,EAAQtF,EAAWoF,OAAQE,IAAS,CACpD,IAAMoS,EAAgB1X,EAAWsF,GAC3BgF,EAAcoN,EAAc3V,GAClC,EAAK9D,OAAOL,QAAQoJ,GAA2B,CAAEsD,gBACjDoN,EAAclN,QAElB,EAAK8M,YAAYtX,WAAa,GAC9Bc,EAAkBd,WAAa,GAMvCiB,EAAMoC,SAASpD,EAAuBa,KArbU,KAybpD4V,cAAgB,SAACD,EAAYnT,EAAQW,GAEjC,IADA,IAAM0S,EAAa,aAAO1V,EAAMgI,WAAWpI,oBAClCyE,EAAQ,EAAGA,EAAQqR,EAAcvR,OAAQE,IAAS,CAAC,IAAD,EACjDzF,EAAU8W,EAAcrR,GAC9B,IAAI,UAAAzF,EAAQE,aAAR,eAAeiN,SAASjL,MAAO0U,EAC/B5W,EAAQE,MAAQ,UAEhB,IAAK,IAAI4F,EAAI,EAAGA,EAAI9F,EAAQ+C,MAAMwC,OAAQO,IAAK,CAC7B9F,EAAQ+C,MAAM+C,GAClBqH,SAASjL,KAAO0U,GACtB5W,EAAQ+C,MAAM+U,OAAOhS,EAAG,IAKxC1E,EAAMoC,SAASzD,EAAiB+W,KAxcgB,KA2cpD5L,KA3coD,sBA2c7C,sCAAAxC,EAAA,yHAGO,EAAKtK,OAAOL,QAAQmJ,IAH3B,OAKH,EAAK0D,kBAAkBD,QACvB,EAAKZ,kBAAkBY,QACvB,EAAKvM,OAAO6Q,IAAI/H,IAChB,EAAK9I,OAAO6Q,IAAI/H,IAChB,EAAK9I,OAAO6Q,IAAI/H,IAChB,EAAK9I,OAAO6Q,IAAI9H,IAChB,EAAK/I,OAAO6Q,IAAI9H,IAChBjB,OAAOyE,QAZJ,4CA3c6C,KA2dpD6J,iBA3doD,sBA2djC,4BAAA9L,EAAA,sEACQ,EAAKtK,OAAOL,QAAQmJ,IAD5B,OACTiH,EADS,OAEfnM,QAAQC,IAAIkM,GACZ/M,EAAMoC,SAAS1D,EAAWqO,IAHX,2CA3diC,KAiepDgF,gBAjeoD,uCAielC,WAAO1V,GAAP,SAAAiL,EAAA,sEACS,EAAKtK,OAAOL,QAAQmJ,GAA4BzJ,GADzD,yDAjekC,2DAqepD2Q,SAreoD,sBAqezC,4BAAA1F,EAAA,sEACY,EAAKtK,OAAOL,QAAQmJ,IADhC,cACDmH,EADC,yBAEAA,GAFA,2CAreyC,KA0epDC,eA1eoD,sBA0enC,4BAAA5F,EAAA,sEACK,EAAKtK,OAAOL,QAAQmJ,GAAoCE,GAAKG,UADlE,OACPgH,EADO,OAEbhR,EAAa,OAAQgR,GAFR,2CAzebhQ,KAAKyX,SAAWA,EAChBzX,KAAK6H,SAAWA,EAChB7H,KAAKgJ,SAAWA,EAChBhJ,KAAKwL,kBAAoB,KACzBxL,KAAKmY,iBAAmB,KACxBnY,KAAKuK,OAAS,KACdvK,KAAKkZ,YAAc,CAAExX,OAAQ,GAAIC,MAAO,GAAIC,WAAY,IACxD5B,KAAK0X,iBACL1X,KAAK2L,SAAWA,GCjBlB6N,G,kDACJ,WAAYnW,GAAQ,IAAD,8BACjB,cAAMA,IAIRmS,SAAW,SAACiE,GACV5Q,GAAKC,UAAY,EAAK9G,MAAM8G,UAC5BD,GAAKE,aAAe,EAAK/G,MAAM+G,aAFZ,IAGXmB,EAAoCuP,EAApCvP,SAAUwP,EAA0BD,EAA1BC,YAAa1Q,EAAayQ,EAAbzQ,SAC/B,EAAKsO,aAAapN,EAAUwP,EAAa1Q,IATxB,EAYnBsO,aAAe,SAACpN,EAAUwP,EAAa1Q,GAClB,IAAIwO,GAAgBtN,EAAUwP,EAAa1Q,GAAU,SAACpB,GACvE,EAAKvE,MAAM9C,eAAc,GACzBoH,OAAOC,WAAaA,MAbtB,EAAK5F,MAAQ,CAAE8G,WAAW,EAAOC,cAAc,GAF9B,E,qDAgCT,IAAD,OACP,OACE,qBAAK/E,MAAO,CAAEsB,QAAS,OAAQxB,MAAO,OAAQC,OAAQ,OAAQyB,WAAY,SAAUD,eAAgB,UAApG,SACGvF,KAAKqD,MAAMhB,gBACV,cAAC,GAAD,IAEA,8BACE,eAAC,KAAD,CAAMwB,IAAK,SAACA,GAAD,OAAU,EAAKgR,QAAUhR,GAAMkG,KAAK,cAAcyL,SAAUxV,KAAKwV,SAA5E,UACE,cAAC,KAAKC,KAAN,CAAW1L,KAAK,WAAWqH,MAAM,4BAAeuI,MAAO,CAAC,CAAEC,UAAU,IAApE,SACE,cAAC,KAAD,MAEF,cAAC,KAAKnE,KAAN,CAAW1L,KAAK,cAAcqH,MAAM,4BAAeuI,MAAO,CAAC,CAAEC,UAAU,IAAvE,SACE,cAAC,KAAD,MAEF,cAAC,KAAKnE,KAAN,CAAW1L,KAAK,WAAWqH,MAAM,wCAAjC,SACE,cAAC,KAAD,MAEF,eAAC,KAAKqE,KAAN,WACE,cAAC,KAAD,CACEjS,QAAS,WACP,EAAKiB,SAAS,CAAEqE,WAAY,EAAK9G,MAAM8G,aAEzC3C,KACGnG,KAAKgC,MAAM8G,UAGV,mBAAG1C,UAAU,iBAAb,iBAFA,mBAAGA,UAAU,iBAAb,uBAMN,cAAC,KAAD,CACE5C,QAAS,WACP,EAAKiB,SAAS,CAAEsE,cAAe,EAAK/G,MAAM+G,gBAE5C5C,KACGnG,KAAKgC,MAAM+G,aAGV,mBAAG3C,UAAU,iBAAb,sBAFA,mBAAGA,UAAU,iBAAb,+BAOR,cAAC,KAAKqP,KAAN,UACE,cAAC,KAAD,CAAQxW,KAAK,UAAU0W,SAAS,SAAhC,yF,GA7EO/O,aAoGR1G,oBAZf,SAAyB8B,GACvB,MAAO,CACLK,gBAAiBL,EAAMK,oBAI3B,SAA4B4C,GAC1B,MAAO,CACL1E,cAAe,SAACd,GAAD,OAAUwF,EAAS1E,EAAcd,QAIrCS,CAA6CsZ,ICrE7CK,G,kDA5Bb,WAAYxW,GAAQ,IAAD,uBACjB,cAAMA,IASRH,kBAAoB,aARlB,IAAMrD,EAAS,IAAIP,EAAY,WAAaqI,OAAOiR,SAAW,IAAMjR,OAAOkR,MAF1D,OAGjB,EAAKhZ,OAASA,EAAOA,OACrB,EAAKA,OAAOL,QAAUK,EAAOL,QAC7B,EAAKuK,KAAO,WACZpC,OAAOoC,KAAO,EAAKA,KACnBpC,OAAO9H,OAAS,EAAKA,OAPJ,E,qDAgBjB,OADA4D,QAAQC,IAAIb,EAAMgI,YAEhB,cAAC,IAAD,CAAUhI,MAAOA,EAAjB,SACE,qBAAKmB,MAAO,CAAEF,MAAO,OAAQC,OAAQ,SAArC,SAGE,cAAC,GAAD,Y,GAtBQ6C,aCCHkT,I,OAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBrL,MAAK,YAAkD,IAA/CsL,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,QCDdO,IAASlZ,OACL,cAAC,GAAD,IACFqQ,SAASuE,eAAe,SAM1B8D,O","file":"static/js/main.dadf2752.chunk.js","sourcesContent":["import { notification } from \"antd\";\r\n\r\nconst Notification = (type, message) => {\r\n    notification[type]({\r\n        message: 'Thông báo!',\r\n        description: message,\r\n        placement: \"bottomRight\",\r\n    });\r\n}\r\n\r\nexport { Notification }","import { notification } from 'antd';\r\nimport io from 'socket.io-client';\r\nimport { Notification } from './Notification';\r\n\r\nclass SocketClone {\r\n  constructor(url) {\r\n    this.socket = io.connect(url);\r\n  }\r\n\r\n  request = (type, data = {}) => {\r\n    return new Promise((resolve, reject) => {\r\n      this.socket.emit(type, data, (data) => {\r\n        if (data.status===0) {\r\n          Notification(\"error\",data.message)\r\n          // resolve(data.data)\r\n          reject(data.data)\r\n        } else {\r\n          resolve(data.data)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n}\r\n\r\nexport { SocketClone }","export const ACTION_TYPES = {\r\n  SET_LARGE_VIDEO: \"SET_LARGE_VIDEO\",\r\n};\r\nconst initializeStream = null;\r\n\r\nconst largeVideoReducer = (state = initializeStream, action) => {\r\n  switch (action.type) {\r\n    case ACTION_TYPES.SET_LARGE_VIDEO:\r\n      state = action.payload;\r\n      return state;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst setLargeVideo = (stream) => {\r\n  return {\r\n    type: ACTION_TYPES.SET_LARGE_VIDEO,\r\n    payload: stream,\r\n  };\r\n};\r\n\r\nexport { largeVideoReducer, setLargeVideo };\r\n","\r\nexport const ACTION_TYPES = {\r\n  SET_ROOMCREATE: \"SET_ROOMCREATE\",\r\n};\r\nconst initializeStream =false;\r\n\r\nconst roomCreateReducer = (state = initializeStream, action) => {\r\n  switch (action.type) {\r\n    case ACTION_TYPES.SET_ROOMCREATE:\r\n      state = action.payload;\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// const addUserToRoom = ({ key, value }) => (dispacth) => {\r\n//   const state = store.getState().userOnRoomState;\r\n//   const stateClone = new Map();\r\n//   state.forEach((value, key) => stateClone.set(key, value))\r\n//   stateClone.set(key, value);\r\n//   dispacth(setUserOnRoom(stateClone))\r\n// }\r\n\r\n// const removeUserToRoom = (key) => (dispacth) => {\r\n//   const state = store.getState().userOnRoomState;\r\n//   const stateClone = new Map();\r\n//   state.forEach((value, key) => stateClone.set(key, value))\r\n//   stateClone.delete(key);\r\n//   dispacth(setUserOnRoom(stateClone))\r\n// }\r\n\r\nconst setRoomCreate = (room) => {\r\n  return {\r\n    type: ACTION_TYPES.SET_ROOMCREATE,\r\n    payload: room,\r\n  };\r\n};\r\n\r\nexport {  roomCreateReducer, setRoomCreate };\r\n","export const ACTION_TYPES = {\r\n  SET_STREAM: \"SET_STREAM\",\r\n};\r\nconst initializeStream = { local: [], remote: [] };\r\n\r\nconst streamReducer = (state = initializeStream, action) => {\r\n  switch (action.type) {\r\n    case ACTION_TYPES.SET_STREAM:\r\n      state = action.payload;\r\n      return state;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst setStream = (stream) => {\r\n  return {\r\n    type: ACTION_TYPES.SET_STREAM,\r\n    payload: stream,\r\n  };\r\n};\r\n\r\nexport { streamReducer, setStream };\r\n","\r\nexport const ACTION_TYPES = {\r\n  SET_USERONROOM: \"SET_USERONROOM\",\r\n};\r\nconst initializeStream =[];\r\n\r\nconst userOnRoomReducer = (state = initializeStream, action) => {\r\n  switch (action.type) {\r\n    case ACTION_TYPES.SET_USERONROOM:\r\n      state = action.payload;\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n// const addUserToRoom = ({ key, value }) => (dispacth) => {\r\n//   const state = store.getState().userOnRoomState;\r\n//   const stateClone = new Map();\r\n//   state.forEach((value, key) => stateClone.set(key, value))\r\n//   stateClone.set(key, value);\r\n//   dispacth(setUserOnRoom(stateClone))\r\n// }\r\n\r\n// const removeUserToRoom = (key) => (dispacth) => {\r\n//   const state = store.getState().userOnRoomState;\r\n//   const stateClone = new Map();\r\n//   state.forEach((value, key) => stateClone.set(key, value))\r\n//   stateClone.delete(key);\r\n//   dispacth(setUserOnRoom(stateClone))\r\n// }\r\n\r\nconst setUserOnRoom = (room) => {\r\n  return {\r\n    type: ACTION_TYPES.SET_USERONROOM,\r\n    payload: room,\r\n  };\r\n};\r\n\r\nexport {  userOnRoomReducer, setUserOnRoom };\r\n","\r\nexport const ACTION_TYPES = {\r\n          SET_VIEW_ONE_CAMERA: \"SET_VIEW_ONE_CAMERA\"\r\n};\r\nconst initializeStream = {\r\n          viewOneCamera: true,\r\n};\r\n\r\nconst uiReducer = (state = initializeStream, action) => {\r\n          switch (action.type) {\r\n                    case ACTION_TYPES.SET_VIEW_ONE_CAMERA:\r\n                              state.viewOneCamera = !state.viewOneCamera;\r\n                              return {...state}\r\n                    default:\r\n                              return state;\r\n          }\r\n};\r\n\r\nconst setViewOneCamera = () => {\r\n          return {\r\n                    type : ACTION_TYPES.SET_VIEW_ONE_CAMERA,\r\n          };\r\n};\r\n\r\nexport { uiReducer, setViewOneCamera };\r\n","export const ACTION_TYPES = {\r\n          SET_REMOTE_STREAM: \"SET_REMOTE_STREAM\",\r\n};\r\nconst initializeStream = new Map();\r\n\r\nconst streamRemoteReducer = (state = initializeStream, action) => {\r\n          switch (action.type) {\r\n                    case ACTION_TYPES.SET_REMOTE_STREAM:\r\n                              state = action.payload;\r\n                              return state;\r\n\r\n                    default:\r\n                              return state;\r\n          }\r\n};\r\n\r\nconst setRemoteStream = (stream) => {\r\n          return {\r\n                    type: ACTION_TYPES.SET_REMOTE_STREAM,\r\n                    payload: stream,\r\n          };\r\n};\r\n\r\nexport { streamRemoteReducer, setRemoteStream };\r\n","export const ACTION_TYPES = {\r\n  SET_MODAL: \"SET_MODAL\",\r\n};\r\nconst initializeStream = { visible: false, header: \"\", render: null };\r\n\r\nconst modalReducer = (state = initializeStream, action) => {\r\n  switch (action.type) {\r\n    case ACTION_TYPES.SET_MODAL:\r\n      state = action.payload;\r\n      return state;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst setModal = (stream) => {\r\n  return {\r\n    type: ACTION_TYPES.SET_MODAL,\r\n    payload: stream,\r\n  };\r\n};\r\n\r\nexport { modalReducer, setModal };\r\n","export const ACTION_TYPES = {\r\n  SET_MESSAGE: \"SET_MESSAGE\",\r\n};\r\nconst initializeMessage = [];\r\n\r\nconst messageReducer = (state = initializeMessage, action) => {\r\n  switch (action.type) {\r\n    case ACTION_TYPES.SET_MESSAGE:\r\n      state = action.payload;\r\n      return state;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst setMessage = (stream) => {\r\n  return {\r\n    type: ACTION_TYPES.SET_MESSAGE,\r\n    payload: stream,\r\n  };\r\n};\r\n\r\nexport { messageReducer, setMessage };\r\n","export const ACTION_TYPES = {\r\n    SET_REMOTE_ELEMENT: \"SET_REMOTE_ELEMENT\",\r\n};\r\nconst initializeStream = [];\r\n\r\nconst remoteElementReducer = (state = initializeStream, action) => {\r\n    switch (action.type) {\r\n        case ACTION_TYPES.SET_REMOTE_ELEMENT:\r\n            state = action.payload;\r\n            return state;\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst setRemoteElement = (element) => {\r\n    return {\r\n        type: ACTION_TYPES.SET_REMOTE_ELEMENT,\r\n        payload: element,\r\n    };\r\n};\r\n\r\nexport { remoteElementReducer, setRemoteElement };\r\n","export const ACTION_TYPES = {\r\n    SET_LOCAL_ELEMENT: \"SET_LOCAL_ELEMENT\",\r\n};\r\nconst initializeStream = { videos: [], audio: [], screenCast: [] };\r\n\r\nconst localElementReducer = (state = initializeStream, action) => {\r\n    switch (action.type) {\r\n        case ACTION_TYPES.SET_LOCAL_ELEMENT:\r\n            state = action.payload;\r\n            return state;\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst setLocalElementReducer = (element) => {\r\n    return {\r\n        type: ACTION_TYPES.SET_LOCAL_ELEMENT,\r\n        payload: element,\r\n    };\r\n};\r\n\r\nexport { localElementReducer, setLocalElementReducer };\r\n","import { combineReducers } from \"redux\";\r\nimport { largeVideoReducer } from \"../reducers/largeVideoReducer\";\r\nimport { roomCreateReducer } from \"../reducers/roomCreateReducer\";\r\nimport { streamReducer } from \"../reducers/streamReducer\";\r\nimport { userOnRoomReducer } from \"../reducers/userOnRoomReducer\";\r\nimport { uiReducer } from \"../reducers/uiReducer\";\r\nimport { streamRemoteReducer } from \"../reducers/remoteReducer\";\r\nimport { modalReducer } from \"../reducers/modalReducer\";\r\nimport { messageReducer } from \"../reducers/messageReducer\";\r\nimport { remoteElementReducer } from \"../reducers/remoteElementReducer\";\r\nimport { localElementReducer } from \"../reducers/localElementReducer\";\r\n\r\nexport default combineReducers({\r\n  streamRemoteState: streamRemoteReducer,\r\n  streamState: streamReducer,\r\n  largeVideoState: largeVideoReducer,\r\n  userOnRoomState: userOnRoomReducer,\r\n  roomCreateState: roomCreateReducer,\r\n  ui: uiReducer,\r\n  modalState: modalReducer,\r\n  messageState: messageReducer,\r\n  remoteElementState: remoteElementReducer,\r\n  localElementState: localElementReducer\r\n});\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport rootReducer from \"./rootReducer\";\r\nimport thunk from \"redux-thunk\";\r\n// const logger = store => next => action => {\r\n//     console.log('dispatching', action)\r\n//     switch (action.type) {\r\n//         case ACTION_TYPES_PATIENT.SET_PATIENT:\r\n//             console.log(action)\r\n//             break;\r\n\r\n//         default:\r\n//             break;\r\n//     }\r\n//     let result = next(action)\r\n//     return result\r\n// }\r\n\r\nconst middleware = [\r\n    thunk\r\n]\r\nconst store = createStore(rootReducer, applyMiddleware(...middleware));\r\nexport { store };","import React, { Component, PureComponent } from \"react\";\r\n\r\nclass Video extends PureComponent {\r\n  componentDidMount = () => {\r\n    this.videoRef.srcObject = this.props?.srcObject;\r\n  };\r\n\r\n  componentDidUpdate = (prevProps) => {\r\n    if (prevProps !== this.props) {\r\n      this.videoRef.srcObject = this.props?.srcObject;\r\n    }\r\n  };\r\n\r\n  onClick=()=>{\r\n      this.props.onClick(this.videoRef)\r\n  }\r\n\r\n  render() {\r\n    console.log(this.props)\r\n\r\n    return (\r\n      <video\r\n        id=\"video\"\r\n        autoPlay={true}\r\n        ref={(ref) => {\r\n          this.videoRef = ref;\r\n        }}\r\n        width={\"100%\"}\r\n        height={100}\r\n        style={{ background: \"black\", paddingTop: 5 }}\r\n        onClick={this.onClick}\r\n      ></video>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Video;\r\n","import React, { PureComponent } from 'react'\r\n\r\n\r\nclass Audio extends PureComponent {\r\n          componentDidMount = () => {\r\n                    this.audioRef.srcObject = this.props?.srcObject;\r\n          }\r\n\r\n          componentDidUpdate = (prevProps) => {\r\n                    if (prevProps.srcObject !== this.props.srcObject) {\r\n                              this.audioRef.srcObject = this.props?.srcObject;\r\n                    }\r\n          }\r\n\r\n          render() {\r\n                    return (\r\n                              <audio autoPlay={true} ref={(ref) => { this.audioRef = ref }} width={\"100%\"} height={100} style={{ background: \"black\", border: \"2px solid #224567\" }}>\r\n                              </audio>\r\n                    );\r\n          }\r\n}\r\n\r\nexport default Audio;\r\n","import { Button } from \"antd\";\r\nimport Avatar from \"antd/lib/avatar/avatar\";\r\nimport React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setUserRoom, userRoom } from \"../../global/UserRoom\";\r\nimport { setLargeVideo } from \"../../reducers/largeVideoReducer\";\r\nimport { store } from \"../../redux/store\";\r\nimport \"./style.scss\";\r\nconst ColorList = [\r\n  \"#f56a00\",\r\n  \"#7265e6\",\r\n  \"#ffbf00\",\r\n  \"#00a2ae,#885569\",\r\n  \"#7265e6\",\r\n  \"#885569\",\r\n  \"#00a2ae,#885569\",\r\n  \"#885569\",\r\n];\r\nclass UserComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { mute: false, hasVideo: false };\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    const item=this.props.item;\r\n    this.audioRef.srcObject = item?.audio?.stream;\r\n    this.videoRef.srcObject = item?.video?.stream;\r\n    if (this.videoRef.srcObject) {\r\n      this.setState({ hasVideo: true });\r\n    } else {\r\n      this.setState({ hasVideo: false });\r\n    }\r\n  };\r\n\r\n  componentDidUpdate = (prevProp) => {\r\n    if (this.props.item !== prevProp.item) {\r\n        const item=this.props.item;\r\n        this.audioRef.srcObject = item?.audio?.stream;\r\n        this.videoRef.srcObject = item?.video?.stream;\r\n        if (this.videoRef.srcObject) {\r\n          this.setState({ hasVideo: true });\r\n        } else {\r\n          this.setState({ hasVideo: false });\r\n        }\r\n    }\r\n  };\r\n\r\n  mute = (e) => {\r\n    e.preventDefault();\r\n    const mute = this.state.mute;\r\n    if (!mute) {\r\n      this.audioRef.muted = true;\r\n    } else {\r\n      this.audioRef.muted = false;\r\n    }\r\n    this.setState({ mute: !mute });\r\n  };\r\n\r\n  setLargeVideo = (e) => {\r\n    this.props.onHandleSetLargeVideos();\r\n    store.dispatch(setLargeVideo({ stream: this.videoRef.srcObject }));\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        id={this.props.item.peerId}\r\n        onClick={this.setLargeVideo}\r\n        style={{\r\n          border: this.props.item.active ? \"2px solid red\" : \"none\",\r\n          position: \"relative\",\r\n          width: \"100%\",\r\n          height: \"auto\",\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <span style={{ color: \"#ddd\", fontWeight: \"bold\", position: \"absolute\", maxWidth: \"80%\", bottom: 5 }}>\r\n          {this.props.item?.peerName}\r\n        </span>\r\n        {this.state.mute ? (\r\n          <Button\r\n            onClick={this.mute}\r\n            type=\"link\"\r\n            shape=\"circle\"\r\n            danger\r\n            style={{ position: \"absolute\", top: 5, left: 5, zIndex: 10 }}\r\n            icon={<i className=\"material-icons\">volume_off</i>}\r\n          ></Button>\r\n        ) : (\r\n          <Button\r\n            onClick={this.mute}\r\n            type=\"link\"\r\n            shape=\"circle\"\r\n            danger\r\n            style={{ position: \"absolute\", top: 5, left: 5, zIndex: 10 }}\r\n            icon={<i className=\"material-icons\">volume_up</i>}\r\n          ></Button>\r\n        )}\r\n        {!this.state.hasVideo ? (\r\n          <div\r\n            id=\"placeHodler\"\r\n            style={{\r\n              color: \"#ddd\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              position: \"absolute\",\r\n              borderRadius: \"50%\",\r\n              width: 50,\r\n              height: 50,\r\n            }}\r\n          >\r\n            <Avatar\r\n              style={{ backgroundColor: `${ColorList[Math.floor(Math.random() * 10)]}`, verticalAlign: \"middle\" }}\r\n              size=\"large\"\r\n            >\r\n              {this.props.item?.peerName}\r\n\r\n              {/* {this.props.item?.peerName.match(/\\b([A-Z])/g)?.join(\"\")} */}\r\n            </Avatar>\r\n          </div>\r\n        ) : null}\r\n        <video\r\n          ref={(ref) => {\r\n            this.videoRef = ref;\r\n          }}\r\n          id=\"video\"\r\n          autoPlay={true}\r\n          width={\"100%\"}\r\n          height={100}\r\n          style={{ background: \"black\", border: \"2px solid #224567\" }}\r\n        ></video>\r\n        <audio\r\n          ref={(ref) => {\r\n            this.audioRef = ref;\r\n          }}\r\n          id=\"audio\"\r\n          autoPlay={true}\r\n        ></audio>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    streamRemoteState: state.streamRemoteState,\r\n    remoteElementState:state.remoteElementState\r\n    //         userOnRoomState: state.userOnRoomState\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    //         setLargeVideo: (data) => dispatch(setLargeVideo(data)),\r\n    //         setStream: (data) => dispatch(setStream(data))\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(UserComponent);\r\n","let userRoom=new Map();\r\nconst setUserRoom=(us)=>{\r\n          userRoom=us\r\n}\r\nexport {userRoom,setUserRoom};","import React, { Component, PureComponent } from \"react\";\r\n\r\nclass Audio extends PureComponent {\r\n  componentDidMount = () => {\r\n    this.audioRef.srcObject = this.props?.srcObject;\r\n  };\r\n\r\n  componentDidUpdate = (prevProps) => {\r\n    if (prevProps !== this.props) {\r\n      this.audioRef.srcObject = this.props?.srcObject;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { muted } = this.props;\r\n    return (\r\n      <audio\r\n        style={{ width: \"100%\", height: \"80px\", display: \"none\" }}\r\n        ref={(ref) => {\r\n          this.audioRef = ref;\r\n        }}\r\n        id=\"audio\"\r\n        autoPlay={muted ? false : true}\r\n      ></audio>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Audio;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Video from \"./Video\";\r\nimport Audio from \"./Audio\";\r\nimport { store } from \"../../redux/store\";\r\nimport { setLargeVideo } from \"../../reducers/largeVideoReducer\";\r\nimport Avatar from \"antd/lib/avatar/avatar\";\r\nimport { Button } from \"antd\";\r\nconst ColorList = [\r\n  \"#f56a00\",\r\n  \"#7265e6\",\r\n  \"#ffbf00\",\r\n  \"#00a2ae,#885569\",\r\n  \"#7265e6\",\r\n  \"#885569\",\r\n  \"#00a2ae,#885569\",\r\n  \"#885569\",\r\n];\r\n\r\nclass UserCloneComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { muted: false };\r\n  }\r\n\r\n  onVideoClick = (video) => {\r\n    this.props.onHandleSetLargeVideos();\r\n    store.dispatch(setLargeVideo({ stream: video.srcObject }));\r\n  };\r\n\r\n  render() {\r\n    const { muted } = this.state;\r\n    return (\r\n      <div\r\n        className=\"videos-user-component\"\r\n      >\r\n        <Button\r\n          style={{ position: \"absolute\", top: 0, left: 0,zIndex:2 }}\r\n          onClick={() => {\r\n            this.setState({ muted: !muted });\r\n          }}\r\n          icon={muted ? <i className=\"material-icons\">volume_off</i> : <i className=\"material-icons\">volume_up</i>}\r\n        ></Button>\r\n        <div\r\n          className=\"peerName\"\r\n        >\r\n          {this.props.item?.peerName}\r\n        </div>\r\n        {this.props.item.video.length === 0 ? (\r\n          <div\r\n            id=\"placeHodler\"\r\n            style={{\r\n              color: \"#ddd\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              position: \"absolute\",\r\n              borderRadius: \"50%\",\r\n              width: 50,\r\n              height: 50,\r\n            }}\r\n          >\r\n            <Avatar\r\n              style={{ backgroundColor: `${ColorList[Math.floor(Math.random() * 10)]}`, verticalAlign: \"middle\" }}\r\n              size=\"large\"\r\n            >\r\n              {this.props.item?.peerName}\r\n\r\n              {/* {this.props.item?.peerName.match(/\\b([A-Z])/g)?.join(\"\")} */}\r\n            </Avatar>\r\n          </div>\r\n        ) : null}\r\n        {this.props.item.video.map((video, index) => {\r\n          return <Video key={index} srcObject={video.stream} onClick={this.onVideoClick} />;\r\n        })}\r\n        <Audio srcObject={this.props.item?.audio?.stream} muted={muted} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nUserCloneComponent.propTypes = {};\r\n\r\nexport default UserCloneComponent;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setLargeVideo } from \"../../reducers/largeVideoReducer\";\r\nimport { setStream } from \"../../reducers/streamReducer\";\r\nimport Video from \"../Video/Video\";\r\nimport Audio from \"../Audio/Audio\";\r\nimport { Button } from \"antd\";\r\nimport UserComponent from \"../Video/UserComponent\";\r\nimport Item from \"antd/lib/list/Item\";\r\nimport { userRoom } from \"../../global/UserRoom\";\r\nimport { store } from \"../../redux/store\";\r\nimport { setUserOnRoom } from \"../../reducers/userOnRoomReducer\";\r\nimport UserCloneComponent from \"../Video/UserCloneComponent\";\r\nclass RemoteVideo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.audioRef = null;\r\n  }\r\n\r\n  onHandleSetLargeVideo = (item, index) => {\r\n    this.setActive(index);\r\n  };\r\n\r\n  setActive = (index) => {\r\n    const currentStream = { ...this.props.streamState };\r\n    const local = currentStream.local;\r\n    for (let j = 0; j < local.length; j++) {\r\n      const element = local[j];\r\n      element.active = false;\r\n    }\r\n    for (let i = 0; i < this.props.userOnRoomState.length; i++) {\r\n      const element = this.props.userOnRoomState[i];\r\n      if (i === index) {\r\n        element.active = true;\r\n      } else {\r\n        element.active = false;\r\n      }\r\n    }\r\n    this.props.setUserOnRoom(this.props.userOnRoomState);\r\n    this.props.setStream({ ...currentStream });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"remote-video-component\" >\r\n        {this.props.remoteElementState.map((item, index) => {\r\n          return (\r\n            <UserCloneComponent\r\n              key={index}\r\n              item={item}\r\n              onHandleSetLargeVideos={() => this.onHandleSetLargeVideo(item, index)}\r\n            />\r\n          );\r\n        })}\r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    streamState: state.streamState,\r\n    userOnRoomState: state.userOnRoomState,\r\n    remoteElementState: state.remoteElementState,\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setLargeVideo: (data) => dispatch(setLargeVideo(data)),\r\n    setStream: (data) => dispatch(setStream(data)),\r\n    setUserOnRoom: (data) => dispatch(setUserOnRoom(data)),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RemoteVideo);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { setLargeVideo } from \"../../reducers/largeVideoReducer\";\r\nimport { setStream } from \"../../reducers/streamReducer\";\r\nimport { store } from \"../../redux/store\";\r\nimport Video from \"../Video/Video\";\r\n\r\nclass LocalVideo extends Component {\r\n  onVideoClick = (video) => {\r\n    // this.props.onHandleSetLargeVideos();\r\n    store.dispatch(setLargeVideo({ stream: video.srcObject }));\r\n  };\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"local-video-component\">\r\n        {this.props.localElementState.videos.map((video, index) => {\r\n          return (\r\n            <div\r\n              key={index}\r\n              className=\"local-video-item\"\r\n            >\r\n              <span\r\n                style={{\r\n                  color: \"#ddd\",\r\n                  textShadow: \"1px 1px black\",\r\n                  fontWeight: \"bold\",\r\n                  position: \"absolute\",\r\n                  maxWidth: \"80%\",\r\n                  bottom: 5,\r\n                }}\r\n              >\r\n                {window.roomClient?.username} (Me)\r\n              </span>\r\n              <Video srcObject={video?.stream} onClick={this.onVideoClick}></Video>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {this.props.localElementState.screenCast.map((screen, index) => {\r\n          return (\r\n            <div\r\n              key={index}\r\n              className=\"local-video-item share-screen\"\r\n            >\r\n              <span\r\n                style={{\r\n                  color: \"#ddd\",\r\n                  textShadow: \"1px 1px black\",\r\n                  fontWeight: \"bold\",\r\n                  position: \"absolute\",\r\n                  maxWidth: \"80%\",\r\n                  bottom: 5,\r\n                }}\r\n              >\r\n                {window.roomClient?.username} (Me)\r\n              </span>\r\n              <Video srcObject={screen?.stream} onClick={this.onVideoClick}></Video>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    localElementState: state.localElementState,\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setLargeVideo: (data) => dispatch(setLargeVideo(data)),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LocalVideo);\r\n","import React, { Component } from \"react\";\r\nimport Video from \"../Components/Video/Video\";\r\nimport RemoteVideo from \"../Components/RemoteVideo/RemoteVideo\";\r\nimport { connect } from \"react-redux\";\r\nimport LocalVideo from \"../Components/LocalVideo/LocalVideo\";\r\n\r\nclass SliderRight extends Component {\r\n  render() {\r\n    return (\r\n      <div style={{ width: \"100%\", height: \"100%\" }}>\r\n        <RemoteVideo />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    streamState: state.streamState,\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    // setModal: (data) => dispatch(setModal(data)),\r\n    // setpdfViewer: (data) => dispatch(setpdfViewer(data)),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(SliderRight);\r\n","import React, { Component } from 'react';\r\nimport ReactStopwatch from 'react-stopwatch';\r\n\r\nclass Clock extends Component {\r\n          constructor(props) {\r\n                    super(props);\r\n                    this.state = {};\r\n                    this.count = 0;\r\n          }\r\n\r\n          render() {\r\n                    return (\r\n                              <ReactStopwatch\r\n                                        seconds={0}\r\n                                        minutes={0}\r\n                                        hours={0}\r\n                                        render={({ formatted, hours, minutes, seconds }) => {\r\n                                                  return (\r\n                                                            <div style={{ position: \"absolute\", zIndex: 2, background: \"#fff\", fontWeight: 600, top: 5, right: 5 }}>\r\n                                                                      <p style={{ margin: 4, display: \"flex\", alignItems: \"center\", fontSize: 12 }}>\r\n                                                                                <i style={{ fontSize: 17}} className=\"material-icons\">alarm</i>\r\n                                                                                {formatted}\r\n                                                                      </p>\r\n                                                            </div>\r\n                                                  );\r\n                                        }}\r\n                              />\r\n                    );\r\n          }\r\n}\r\n\r\nexport default Clock;","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport Clock from '../Clock/Clock';\r\n\r\nclass LargeVideo extends Component {\r\n\r\n          // static propTypes = {\r\n          //           prop: PropTypes\r\n          // }\r\n\r\n          componentDidMount = () => {\r\n                    this.videoRef.srcObject = this.props.largeVideoState?.stream;\r\n          }\r\n\r\n          componentDidUpdate = (prevProps) => {\r\n                    console.log(this.props.largeVideoState?.stream)\r\n\r\n                    if (prevProps.largeVideoState !== this.props.largeVideoState) {\r\n                              this.videoRef.srcObject = this.props.largeVideoState?.stream;\r\n                    }\r\n          }\r\n\r\n          render() {\r\n                    return (\r\n                              <div style={{ position: \"relative\", width: \"100%\", height: \"100%\", background: \"black\" }}>\r\n                                        <Clock />\r\n                                        <video autoPlay ref={(el) => { this.videoRef = el }} style={{ position: \"relative\", width: \"100%\", height: \"100%\", background: \"black\" }} >\r\n                                        </video>\r\n                              </div>\r\n\r\n                    )\r\n          }\r\n}\r\nfunction mapStateToProps(state) {\r\n          return {\r\n                    largeVideoState: state.largeVideoState,\r\n          };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n          return {\r\n                    // setModal: (data) => dispatch(setModal(data)),\r\n                    // setpdfViewer: (data) => dispatch(setpdfViewer(data)),\r\n          };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(LargeVideo);\r\n","const EVENTS = {\r\n    SOCKET_CONNECTION: \"connection\",\r\n    SOCKET_CHANGE_ROOM_PASSWORD: \"SOCKET_CHANGE_ROOM_PASSWORD\",\r\n    SOCKET_CREATE_ROOM: \"SOCKET_CREATE_ROOM\",\r\n    SOCKET_GET_ROOM_INFO: \"SOCKET_GET_ROOM_INFO\",\r\n    SOCKET_DISCONNECT: \"disconnect\",\r\n    SOCKET_USER_DISCONNECT: \"SOCKET_USER_DISCONNECT\",\r\n    SOCKET_REMOVE_ROOM: \"SOCKET_REMOVE_ROOM\",\r\n    SOCKET_USER_LEFT_ROOM: \"SOCKET_USER_LEFT_ROOM\",\r\n    SOCKET_USER_JOIN_ROOM: \"SOCKET_USER_JOIN_ROOM\",\r\n    INCOMMING_MESSAGE: \"INCOMMING_MESSAGE\",\r\n    SOCKET_EXIT_ROOM : \"SOCKET_EXIT_ROOM\",\r\n    SOCKET_SEND_MESSAGE:\"SOCKET_SEND_MESSAGE\",\r\n    SOCKET_GET_MESSAGE_IN_ROOM: \"SOCKET_GET_MESSAGE_IN_ROOM\",\r\n    CHECK_ROOM_ALREADY:\"CHECK_ROOM_ALREADY\"\r\n\r\n}\r\n\r\nconst RTC_EVENTS = {\r\n    CREATE_TRANSPORT: \"CREATE_RTC_TRANSPORT\",\r\n    CONNECT_TRANSPORT: \"CONNECT_RTC_TRANSPORT\",\r\n    CREATE_PRODUCE: \"CREATE_PRODUCE\",\r\n    CREATE_CONSUME: \"CREATE_CONSUME\",\r\n    CONSUME_RESUME: \"CONSUME_RESUME\",\r\n    GET_ROUTER_CAPABILITIES: \"GET_ROUTER_CAPABILITIES\",\r\n    GET_PRODUCER: \"GET_PRODUCER\",\r\n    NEW_PRODUCER: \"NEW_PRODUCER\",\r\n    CLOSE_PRODUCER: \"CLOSE_PRODUCER\",\r\n    CLOSE_CONSUME: \"CLOSE_CONSUME\",\r\n    UPDATE_CONSUME: \"UPDATE_CONSUME\"\r\n}\r\n\r\n\r\nexport { EVENTS, RTC_EVENTS };\r\n","const Role = {\r\n          micEnable: false,\r\n          cameraEnable: false,\r\n          password:undefined\r\n}\r\n\r\nexport { Role }","import { message, notification } from \"antd\";\r\nimport { EVENTS, RTC_EVENTS } from \"../events/EVENTS\";\r\nimport { Role } from \"../global/Role\";\r\nimport { setUserRoom, userRoom } from \"../global/UserRoom\";\r\nimport { setLargeVideo } from \"../reducers/largeVideoReducer\";\r\nimport { setMessage } from \"../reducers/messageReducer\";\r\nimport { setRemoteStream } from \"../reducers/remoteReducer\";\r\nimport { setStream } from \"../reducers/streamReducer\";\r\nimport { setUserOnRoom } from \"../reducers/userOnRoomReducer\";\r\nimport { store } from \"../redux/store\";\r\n\r\nconst mediaType = {\r\n  audio: \"audioType\",\r\n  video: \"videoType\",\r\n  screen: \"screenType\",\r\n};\r\nconst _EVENTS = {\r\n  exitRoom: \"exitRoom\",\r\n  openRoom: \"openRoom\",\r\n  startVideo: \"startVideo\",\r\n  stopVideo: \"stopVideo\",\r\n  startAudio: \"startAudio\",\r\n  stopAudio: \"stopAudio\",\r\n  startScreen: \"startScreen\",\r\n  stopScreen: \"stopScreen\",\r\n};\r\n\r\nclass RoomClient {\r\n  constructor(mediasoupClient, socket, room_id, name, password, successCallback) {\r\n    this.name = name;\r\n    this.mediasoupClient = mediasoupClient;\r\n    this.socket = socket;\r\n    this.producerTransport = null;\r\n    this.consumerTransport = null;\r\n    this.device = null;\r\n    this.room_id = room_id;\r\n    this.consumers = new Map();\r\n    this.producers = new Map();\r\n    this.producerLabel = new Map();\r\n    this._isOpen = false;\r\n    this.eventListeners = new Map();\r\n    Object.keys(_EVENTS).forEach((evt) => {\r\n      this.eventListeners.set(evt, []);\r\n    });\r\n    this.password = password;\r\n    this.createRoom(room_id, password).then(async () => {\r\n      await this.join(name, room_id, password);\r\n      console.log(\"join\")\r\n      await this.initSockets();\r\n      this._isOpen = true;\r\n      console.log(\"successCallback\")\r\n      successCallback();\r\n    });\r\n  }\r\n\r\n  createRoom = async (roomName, password) => {\r\n    const reponse = await this.socket.request(EVENTS.SOCKET_CREATE_ROOM, { roomName, password });\r\n    console.log(reponse)\r\n  };\r\n\r\n  join = async (name, room_id, password) => {\r\n    await this.socket.request(EVENTS.SOCKET_USER_JOIN_ROOM, { username: name, roomName: room_id, password });\r\n    const data = await this.socket.request(RTC_EVENTS.GET_ROUTER_CAPABILITIES);\r\n    console.log(data)\r\n    let device = await this.loadDevice(data);\r\n    this.device = device;\r\n    await this.initTransports(device);\r\n    // await this.produce(mediaType.video, null)\r\n    const myRoom = await this.socket.request(EVENTS.SOCKET_GET_ROOM_INFO);\r\n    const newMap = new Map()\r\n    console.log(\"myRoom\", myRoom)\r\n\r\n    for (let index = 0; index < myRoom.length; index++) {\r\n      if (myRoom[index].socketId !== this.socket.id) {\r\n        console.log(\"vao day\")\r\n        const currentMap = store.getState().streamRemoteState.get(myRoom[index].socketId)\r\n        newMap.set(myRoom[index].socketId, { active: false, audio: currentMap?.audio, video: currentMap?.video })\r\n      }\r\n    }\r\n    store.dispatch(setRemoteStream(newMap))\r\n    store.dispatch(setUserOnRoom(myRoom.filter(value => value.id !== this.socket.id)))\r\n    await this.socket.emit(RTC_EVENTS.GET_PRODUCER);\r\n  };\r\n\r\n  loadDevice = async (routerRtpCapabilities) => {\r\n    let device;\r\n    try {\r\n      device = new this.mediasoupClient.Device();\r\n    } catch (error) {\r\n      if (error.name === \"UnsupportedError\") {\r\n        console.error(\"browser not supported\");\r\n      }\r\n      console.error(error);\r\n    }\r\n    await device.load({\r\n      routerRtpCapabilities,\r\n    });\r\n    return device;\r\n  };\r\n\r\n  initTransports = async (device) => {\r\n    // init producerTransport\r\n    {\r\n      const data = await this.socket.request(RTC_EVENTS.CREATE_TRANSPORT, {\r\n        forceTcp: false,\r\n        rtpCapabilities: device.rtpCapabilities,\r\n      });\r\n\r\n      if (data.error) {\r\n        console.error(data.error);\r\n        return;\r\n      }\r\n      this.producerTransport = device.createSendTransport(data);\r\n\r\n      this.producerTransport.on(\"connect\", async ({ dtlsParameters }, callback, errback) => {\r\n        console.log(dtlsParameters)\r\n        try {\r\n          await this.socket.request(RTC_EVENTS.CONNECT_TRANSPORT, { dtlsParameters, transport_id: data.id });\r\n          callback();\r\n        } catch (error) {\r\n          errback(error);\r\n        }\r\n      });\r\n\r\n      this.producerTransport.on(\"produce\", async ({ kind, rtpParameters }, callback, errback) => {\r\n        try {\r\n          const { producer_id, producer_name } = await this.socket.request(RTC_EVENTS.CREATE_PRODUCE, {\r\n            producerTransportId: this.producerTransport.id,\r\n            kind,\r\n            rtpParameters,\r\n          });\r\n          callback({ id: producer_id, producer_name });\r\n        } catch (err) {\r\n          errback(err);\r\n        }\r\n      });\r\n\r\n      this.producerTransport.on(\"connectionstatechange\", (state) => {\r\n        switch (state) {\r\n          case \"connecting\":\r\n            break;\r\n          case \"connected\":\r\n            //localVideo.srcObject = stream\r\n            break;\r\n          case \"failed\":\r\n            this.producerTransport.close();\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      });\r\n    }\r\n\r\n    // init consumerTransport\r\n    {\r\n      const data = await this.socket.request(RTC_EVENTS.CREATE_TRANSPORT, { forceTcp: false });\r\n      if (data.error) {\r\n        console.error(data.error);\r\n        return;\r\n      }\r\n      // only one needed\r\n      this.consumerTransport = device.createRecvTransport(data);\r\n      this.consumerTransport.on(\"connect\", async ({ dtlsParameters }, callback, errback) => {\r\n        try {\r\n          await this.socket.request(RTC_EVENTS.CONNECT_TRANSPORT, { transport_id: this.consumerTransport.id, dtlsParameters });\r\n          callback();\r\n        } catch (error) {\r\n          errback(errback);\r\n        }\r\n      });\r\n\r\n      this.consumerTransport.on(\"connectionstatechange\", async (state) => {\r\n        switch (state) {\r\n          case \"connecting\":\r\n            break;\r\n\r\n          case \"connected\":\r\n            //remoteVideo.srcObject = await stream;\r\n            //await socket.request('resume');\r\n            break;\r\n\r\n          case \"failed\":\r\n            this.consumerTransport.close();\r\n            break;\r\n\r\n          default:\r\n            break;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  initSockets = () => {\r\n    this.socket.on(\"incomingMessage\", (data) => {\r\n      console.log(data)\r\n      store.dispatch(setMessage(data));\r\n    })\r\n\r\n    this.socket.on(\"userJoinRoom\", async ({ name, id }) => {\r\n      notification[\"info\"]({\r\n        message: 'Thông báo',\r\n        description: name + \" đã tham gia vào cuộc họp\",\r\n        placement: \"bottomRight\"\r\n      });\r\n      const myRoom = await this.socket.request(\"getMyRoomInfo\");\r\n      const newMap = new Map()\r\n      for (let index = 0; index < myRoom.length; index++) {\r\n        if (myRoom[index].id !== this.socket.id) {\r\n          const currentMap = store.getState().streamRemoteState.get(myRoom[index].id)\r\n          newMap.set(myRoom[index].id, { active: false, audio: currentMap?.audio, video: currentMap?.video })\r\n        }\r\n      }\r\n      store.dispatch(setUserOnRoom(myRoom.filter(value => value.id !== this.socket.id)))\r\n      store.dispatch(setRemoteStream(newMap))\r\n\r\n    });\r\n    this.socket.on(\"userLeftRoom\", async ({ name, id }) => {\r\n      notification[\"warning\"]({\r\n        message: 'Thông báo',\r\n        description: name + \" đã rời khỏi cuộc họp\",\r\n        placement: \"bottomRight\"\r\n      });\r\n      const myRoom = await this.socket.request(\"getMyRoomInfo\");\r\n      const newMap = new Map()\r\n      for (let index = 0; index < myRoom.length; index++) {\r\n        if (myRoom[index].id !== this.socket.id) {\r\n          const currentMap = store.getState().streamRemoteState.get(myRoom[index].id)\r\n          newMap.set(myRoom[index].id, { active: false, audio: currentMap?.audio, video: currentMap?.video })\r\n        }\r\n      }\r\n      store.dispatch(setUserOnRoom(myRoom.filter(value => value.id !== this.socket.id)))\r\n      store.dispatch(setRemoteStream(newMap))\r\n\r\n    });\r\n    this.socket.on(\"consumerClosed\", ({ consumer_id }) => {\r\n      console.log(\"closing consumer:\", consumer_id);\r\n      this.removeConsumer(consumer_id);\r\n    });\r\n    this.socket.on(RTC_EVENTS.NEW_PRODUCER, async (data) => {\r\n      console.log(data)\r\n      for (let index = 0; index < data.length; index++) {\r\n        const { producer_id, peerName, peerId } = data[index];\r\n        await this.consume(producer_id, peerName, peerId);\r\n      }\r\n    });\r\n\r\n    this.socket.on(\"disconnect\", () => {\r\n      this.exit(false);\r\n    });\r\n  };\r\n\r\n  produce = async (type, deviceId = null) => {\r\n    let mediaConstraints = {};\r\n    let audio = false;\r\n    let screen = false;\r\n    switch (type) {\r\n      case mediaType.audio:\r\n        mediaConstraints = {\r\n          audio: {\r\n            deviceId: deviceId,\r\n          },\r\n          video: false,\r\n        };\r\n        audio = true;\r\n        break;\r\n      case mediaType.video:\r\n        mediaConstraints = {\r\n          audio: false,\r\n          video: {\r\n            width: {\r\n              min: 640,\r\n              ideal: 1920,\r\n            },\r\n            height: {\r\n              min: 400,\r\n              ideal: 1080,\r\n            },\r\n            deviceId: deviceId,\r\n            /*aspectRatio: {\r\n                                        ideal: 1.7777777778\r\n                                    }*/\r\n          },\r\n        };\r\n        break;\r\n      case mediaType.screen:\r\n        mediaConstraints = false;\r\n        screen = true;\r\n        break;\r\n      default:\r\n        return;\r\n        break;\r\n    }\r\n    if (!this.device.canProduce(\"video\") && !audio) {\r\n      console.error(\"cannot produce video\");\r\n      return;\r\n    }\r\n    if (this.producerLabel.has(type)) {\r\n      console.log(\"producer already exists for this type \" + type);\r\n      return;\r\n    }\r\n    let stream;\r\n    try {\r\n      stream = screen ? await navigator.mediaDevices.getDisplayMedia() : await navigator.mediaDevices.getUserMedia(mediaConstraints);\r\n      const track = audio ? stream.getAudioTracks()[0] : stream.getVideoTracks()[0];\r\n      const params = {\r\n        track,\r\n      };\r\n      if (!audio && !screen) {\r\n        params.encodings = [\r\n          { rid: 'r0', maxBitrate: 100000, scalabilityMode: 'S1T3' },\r\n          { rid: 'r1', maxBitrate: 300000, scalabilityMode: 'S1T3' },\r\n          { rid: 'r2', maxBitrate: 600000, scalabilityMode: 'S1T3' },\r\n          { rid: 'r3', maxBitrate: 900000, scalabilityMode: 'S1T3' }\r\n        ]\r\n        params.codecOptions = {\r\n          videoGoogleStartBitrate: 1000,\r\n        };\r\n      }\r\n      this.producer = await this.producerTransport.produce(params);\r\n      this.producers.set(this.producer.id, this.producer);\r\n\r\n      let elem;\r\n      if (!audio) {\r\n        const streamState = { ...store.getState().streamState };\r\n        const local = streamState.local;\r\n        const remote = streamState.remote;\r\n        local.push({\r\n          stream,\r\n          id: this.producer.id,\r\n          name: this.name,\r\n          hasVideo: true\r\n        });\r\n        store.dispatch(setStream({ local, remote }));\r\n        store.dispatch(setLargeVideo({ stream }));\r\n      }\r\n\r\n      this.producer.on(\"trackended\", () => {\r\n        console.log(\"producer trackend\")\r\n        this.closeProducer(type);\r\n      });\r\n\r\n      this.producer.on(\"transportclose\", () => {\r\n        console.log(\"producer transport close\");\r\n        this.producers.delete(this.producer.id);\r\n      });\r\n\r\n      this.producer.on(\"close\", () => {\r\n        console.log(\"closing producer\");\r\n        this.producers.delete(this.producer.id);\r\n      });\r\n\r\n      this.producerLabel.set(type, this.producer.id);\r\n\r\n      switch (type) {\r\n        case mediaType.audio:\r\n          this.event(_EVENTS.startAudio);\r\n          break;\r\n        case mediaType.video:\r\n          this.event(_EVENTS.startVideo);\r\n          break;\r\n        case mediaType.screen:\r\n          this.event(_EVENTS.startScreen);\r\n          break;\r\n        default:\r\n          return;\r\n          break;\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  consume = async (producer_id, peerName, peerId) => {\r\n    //let info = await roomInfo()\r\n    let userOnRoom = this.cloneMap(store.getState().streamRemoteState)\r\n    this.getConsumeStream(producer_id).then(({ consumer, stream, kind }) => {\r\n      this.consumers.set(consumer.id, consumer);\r\n      let currentUser = userOnRoom.get(peerId);\r\n\r\n      if (!currentUser) {\r\n        return;\r\n      }\r\n      if (kind === \"video\") {\r\n        currentUser.video = { type: \"video\", stream, id: consumer.id }\r\n      } else {\r\n        currentUser.audio = { type: \"audio\", stream, id: consumer.id }\r\n      }\r\n      console.log(\"123\", stream)\r\n\r\n      store.dispatch(setRemoteStream(userOnRoom))\r\n      consumer.on(\"trackended\", () => {\r\n        console.log(\"consumer trackend\")\r\n        this.removeConsumer(consumer.id);\r\n      });\r\n      consumer.on(\"transportclose\", () => {\r\n        console.log(\"consumer transportclose\")\r\n        this.removeConsumer(consumer.id);\r\n      });\r\n    });\r\n  };\r\n\r\n  getConsumeStream = async (producerId) => {\r\n    const { rtpCapabilities } = this.device;\r\n    const data = await this.socket.request(RTC_EVENTS.CREATE_CONSUME, {\r\n      rtpCapabilities,\r\n      consumerTransportId: this.consumerTransport.id, // might be\r\n      producerId,\r\n    });\r\n    const { id, kind, rtpParameters } = data.params;\r\n\r\n    const codecOptions = [\r\n      { ssrc: 222220, scalabilityMode: 'S4T3' }\r\n    ];\r\n    const consumer = await this.consumerTransport.consume({\r\n      id,\r\n      producerId,\r\n      kind,\r\n      rtpParameters,\r\n      codecOptions,\r\n    });\r\n    console.log(consumer.track)\r\n\r\n    const stream = new MediaStream();\r\n    stream.addTrack(consumer.track);\r\n    return { consumer, stream, kind, };\r\n  };\r\n\r\n  closeProducer = (type) => {\r\n    if (!this.producerLabel.has(type)) {\r\n      console.log(\"there is no producer for this type \" + type);\r\n      return;\r\n    }\r\n    let producer_id = this.producerLabel.get(type);\r\n    this.socket.emit(\"producerClosed\", { producer_id, });\r\n    this.producers.get(producer_id).close();\r\n    this.producers.delete(producer_id);\r\n    this.producerLabel.delete(type);\r\n\r\n    if (type !== mediaType.audio) {\r\n      const streamState = store.getState().streamState;\r\n      const remote = streamState.remote.filter((value) => value.id !== producer_id);\r\n      const local = streamState.local.filter((value) => value.id !== producer_id);\r\n      store.dispatch(setStream({ local, remote }));\r\n    }\r\n\r\n    switch (type) {\r\n      case mediaType.audio:\r\n        this.event(_EVENTS.stopAudio);\r\n        break;\r\n      case mediaType.video:\r\n        this.event(_EVENTS.stopVideo);\r\n        break;\r\n      case mediaType.screen:\r\n        this.event(_EVENTS.stopScreen);\r\n        break;\r\n      default:\r\n        return;\r\n        break;\r\n    }\r\n  };\r\n\r\n  pauseProducer(type) {\r\n    if (!this.producerLabel.has(type)) {\r\n      console.log(\"there is no producer for this type \" + type);\r\n      return;\r\n    }\r\n    let producer_id = this.producerLabel.get(type);\r\n    this.producers.get(producer_id).pause();\r\n  }\r\n\r\n  resumeProducer = (type) => {\r\n    if (!this.producerLabel.has(type)) {\r\n      console.log(\"there is no producer for this type \" + type);\r\n      return;\r\n    }\r\n    let producer_id = this.producerLabel.get(type);\r\n    this.producers.get(producer_id).resume();\r\n  };\r\n\r\n  removeConsumer = (consumer_id) => {\r\n    let userOnRoom = this.cloneMap(store.getState().streamRemoteState);\r\n    userOnRoom.forEach(user => {\r\n      let { audio, video } = user;\r\n      if (audio) {\r\n        if (audio.id === consumer_id) {\r\n          user.audio = null;\r\n        }\r\n      }\r\n\r\n      if (video) {\r\n        if (video.id === consumer_id) {\r\n          user.video = null;\r\n        }\r\n      }\r\n\r\n    })\r\n    store.dispatch(setRemoteStream(userOnRoom))\r\n    this.consumers.delete(consumer_id);\r\n  };\r\n\r\n  exit(offline = false) {\r\n    let clean = () => {\r\n      this._isOpen = false;\r\n      this.consumerTransport.close();\r\n      this.producerTransport.close();\r\n      this.socket.off(\"disconnect\");\r\n      this.socket.off(\"newProducers\");\r\n      this.socket.off(\"consumerClosed\");\r\n      this.socket.off(\"userJoinRoom\");\r\n      this.socket.off(\"userLeftRoom\");\r\n    };\r\n\r\n    if (!offline) {\r\n      this.socket.request(\"exitRoom\").then((e) => console.log(e)).catch((e) => console.warn(e)).finally(() => { clean(); });\r\n    } else {\r\n      clean();\r\n    }\r\n    store.dispatch(setStream({ local: [], remote: [] }));\r\n    this.event(_EVENTS.exitRoom);\r\n  }\r\n\r\n  getAllRemoteVideo = () => {\r\n\r\n  }\r\n\r\n  cloneMap = (dataMap) => {\r\n    const newMap = new Map();\r\n    for (const [key, value] of dataMap) {\r\n      newMap.set(key, value)\r\n    }\r\n    return newMap\r\n  }\r\n\r\n  getAllChat = async () => {\r\n    const messages = await this.socket.request(\"getAllChat\");\r\n    console.log(messages)\r\n    store.dispatch(setMessage(messages))\r\n  }\r\n\r\n  roomInfo = async () => {\r\n    let info = await this.socket.request(\"roomInfo\");\r\n    return info;\r\n  };\r\n\r\n  changePassword = async () => {\r\n    const res = await this.socket.request(\"changePass\", Role.password);\r\n    message.info(res)\r\n  };\r\n\r\n\r\n  static get mediaType() {\r\n    return mediaType;\r\n  }\r\n\r\n  event = (evt) => {\r\n    console.log(evt);\r\n    if (this.eventListeners.has(evt)) {\r\n      this.eventListeners.get(evt).forEach((callback) => callback());\r\n    }\r\n  };\r\n\r\n  on = (evt, callback) => {\r\n    this.eventListeners.get(evt).push(callback);\r\n  };\r\n\r\n  isOpen = () => {\r\n    return this._isOpen;\r\n  };\r\n\r\n  static get EVENTS() {\r\n    return _EVENTS;\r\n  }\r\n}\r\n\r\nexport { RoomClient };\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './style.scss'\r\nimport { RoomClient } from '../../module/RoomClient';\r\n\r\nexport default class CameraOption extends Component {\r\n          // static propTypes = {\r\n          //           prop: PropTypes\r\n          // }\r\n\r\n          constructor(props) {\r\n                    super(props);\r\n                    this.state = { video: [] };\r\n          }\r\n\r\n\r\n          componentDidMount = async () => {\r\n                    const devices = await window.navigator.mediaDevices.enumerateDevices();\r\n                    const video = [];\r\n                    for (let index = 0; index < devices.length; index++) {\r\n                              const deviceInfo = devices[index];\r\n                              if (deviceInfo.kind === 'videoinput') {\r\n                                        video.push({ deviceInfo, active: false })\r\n                              }\r\n\r\n\r\n                    }\r\n                    this.setState({ video })\r\n          }\r\n\r\n          onActiveOptionCamera = async (item, index) => {\r\n                    const currentVideo = this.state.video;\r\n                    for (let i = 0; i < currentVideo.length; i++) {\r\n                              const element = currentVideo[i];\r\n                              if (i === index) {\r\n                                        element.active = true;\r\n                                        await window.roomClient?.closeProducer(RoomClient.mediaType.video)\r\n                                        window.roomClient?.produce(RoomClient.mediaType.video, element.deviceInfo.deviceId)\r\n                              } else {\r\n                                        element.active = false;\r\n                              }\r\n                    }\r\n                    this.setState({ video: currentVideo })\r\n          }\r\n\r\n          render() {\r\n                    return (\r\n                              <div className=\"micOption\" key=\"camera\">\r\n                                        <div className=\"row\"><i className=\"material-icons\"> videocam</i><h2 >Videos</h2></div>\r\n                                        {this.state.video.map((item, index) => {\r\n                                                  return <div onClick={() => this.onActiveOptionCamera(item, index)} key={\"camera\" + index}> <div className=\"row padding\">{item.active ? <i className=\"material-icons\"> check</i> : <i className=\"material-icons\"> videocam</i>}<span >{item.deviceInfo.label}</span></div></div>\r\n                                        })}\r\n                              </div>\r\n                    )\r\n          }\r\n}","import React, { Component } from \"react\";\r\nimport Video from \"../Components/Video/Video\";\r\nimport RemoteVideo from \"../Components/RemoteVideo/RemoteVideo\";\r\nimport { connect } from \"react-redux\";\r\nimport LocalVideo from \"../Components/LocalVideo/LocalVideo\";\r\n\r\nclass SliderLeft extends Component {\r\n  render() {\r\n    return (\r\n      <div style={{ width: \"100%\", height: \"100%\" }}>\r\n        <LocalVideo />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    streamState: state.streamState,\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    // setModal: (data) => dispatch(setModal(data)),\r\n    // setpdfViewer: (data) => dispatch(setpdfViewer(data)),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(SliderLeft);\r\n","import React, { Component } from 'react';\r\nimport './style.scss'\r\nclass MenuComponent extends Component {\r\n          constructor(props) {\r\n                    super(props);\r\n                    this.state = { fullscreen: false };\r\n          }\r\n\r\n          openFullscreen = () => {\r\n                    const elem = document.documentElement;\r\n                    if (!this.state.fullscreen) {\r\n                              if (elem.requestFullscreen) {\r\n                                        elem.requestFullscreen();\r\n                              } else if (elem.webkitRequestFullscreen) { /* Safari */\r\n                                        elem.webkitRequestFullscreen();\r\n                              } else if (elem.msRequestFullscreen) { /* IE11 */\r\n                                        elem.msRequestFullscreen();\r\n                              }\r\n                    } else {\r\n                              document.exitFullscreen();\r\n                    }\r\n\r\n                    this.setState({ fullscreen: !this.state.fullscreen })\r\n          }\r\n          render() {\r\n                    return (\r\n                              <div className=\"menuOption\">\r\n                                        <div onClick={() => { }}> <div className=\"row padding\"><i className=\"material-icons\"> high_quality</i><span >Chất lượng</span></div></div>\r\n                                        <div onClick={this.openFullscreen}>\r\n                                                  {this.state.fullscreen ? <div className=\"row padding\"><i className=\"material-icons\"> fullscreen_exit</i><span >Thoát toàn màn hình</span></div> : <div className=\"row padding\"><i className=\"material-icons\"> fullscreen</i><span >Toàn màn hình</span></div>}\r\n                                        </div>\r\n                                        <div onClick={() => { }}> <div className=\"row padding\"><i className=\"material-icons\"> mic</i><span >Ghi âm</span></div></div>\r\n                                        <div onClick={() => { }}> <div className=\"row padding\"><i className=\"material-icons\"> videocam</i><span >Quay video</span></div></div>\r\n                              </div>\r\n                    );\r\n          }\r\n}\r\n\r\nexport default MenuComponent;","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './style.scss'\r\n\r\nexport default class MicOption extends Component {\r\n          // static propTypes = {\r\n          //           prop: PropTypes\r\n          // }\r\n\r\n          constructor(props) {\r\n                    super(props);\r\n                    this.state = { mic: [], speaker: [] };\r\n          }\r\n\r\n\r\n          componentDidMount = async () => {\r\n                    const devices = await window.navigator.mediaDevices.enumerateDevices();\r\n                    const mic = [];\r\n                    const speaker = []\r\n                    for (let index = 0; index < devices.length; index++) {\r\n                              const deviceInfo = devices[index];\r\n                              if (deviceInfo.kind === 'audioinput') {\r\n                                        mic.push({ deviceInfo, active: deviceInfo.deviceId === \"default\" ? true : false })\r\n                              }\r\n                              if (deviceInfo.kind === 'audiooutput') {\r\n                                        speaker.push({ deviceInfo, active: deviceInfo.deviceId === \"default\" ? true : false })\r\n                              }\r\n\r\n                    }\r\n                    this.setState({ mic, speaker })\r\n          }\r\n\r\n          onActiveOptionMic = (item, index) => {\r\n                    const currentMic = this.state.mic;\r\n                    for (let i = 0; i < currentMic.length; i++) {\r\n                              const element = currentMic[i];\r\n                              if (i === index) {\r\n                                        element.active = true;\r\n\r\n                              } else {\r\n                                        element.active = false;\r\n                              }\r\n                    }\r\n                    this.setState({ mic: currentMic })\r\n          }\r\n\r\n          onActiveOptionCamera = (item, index) => {\r\n                    const currentSpeaker = this.state.speaker;\r\n                    for (let i = 0; i < currentSpeaker.length; i++) {\r\n                              const element = currentSpeaker[i];\r\n                              if (i === index) {\r\n                                        element.active = true;\r\n                              } else {\r\n                                        element.active = false;\r\n                              }\r\n                    }\r\n                    this.setState({ speaker: currentSpeaker })\r\n          }\r\n\r\n          render() {\r\n                    return (\r\n                              <div className=\"micOption\" key=\"mic\">\r\n                                        <div className=\"row\"><i className=\"material-icons\"> mic</i><h2 >Microphones</h2></div>\r\n                                        {this.state.mic.map((item, index) => {\r\n                                                  return <div onClick={() => this.onActiveOptionMic(item, index)} className={item.active ? \"active\" : \"\"} key={\"mic\" + index} ><div className=\"row padding\">{item.active ? <i className=\"material-icons\"> check</i> : <i className=\"material-icons\"> mic</i>}<span >{item.deviceInfo.label}</span></div></div>\r\n                                        })}\r\n                                        <div className=\"row\"><i className=\"material-icons\"> volume_up</i><h2 >Speaker</h2></div>\r\n                                        {this.state.speaker.map((item, index) => {\r\n                                                  return <div onClick={() => this.onActiveOptionCamera(item, index)} className={item.active ? \"active\" : \"\"} key={\"speaker\" + index}><div className=\"row padding\">{item.active ? <i className=\"material-icons\"> check</i> : <i className=\"material-icons\"> volume_up</i>}<span >{item.deviceInfo.label}</span></div></div>\r\n                                        })}\r\n                              </div>\r\n                    )\r\n          }\r\n}","import { Badge, Button, Dropdown } from \"antd\";\r\nimport React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Role } from \"../../global/Role\";\r\nimport { setViewOneCamera } from \"../../reducers/uiReducer\";\r\nimport MenuComponent from \"../Menu/Menu\";\r\nimport CameraOption from \"../Option/CameraOption\";\r\nimport MicOption from \"../Option/MicOption\";\r\nimport \"./style.scss\";\r\nclass FooterTool extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { openCamera: Role.cameraEnable, openMic: Role.micEnable };\r\n  }\r\n  onChangeView = () => {\r\n    console.log(\"onChangeView\");\r\n    this.props.setViewOneCamera();\r\n  };\r\n  render() {\r\n    const { userOnRoomState } = this.props;\r\n    return (\r\n      <div\r\n        className=\"footerTool\"\r\n        style={{\r\n          width: \"100%\",\r\n          height: \"100%\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          display: \"flex\",\r\n          position: \"relative\",\r\n        }}\r\n      >\r\n        <div style={{ position: \"absolute\", left: 0, display: \"flex\" }}>\r\n          <Badge size=\"default\" count={this.props.messageState.length}>\r\n            <Button\r\n              style={{ margin: \"0px 5px\" }}\r\n              onClick={this.props.onDisplayChat}\r\n              size=\"large\"\r\n              shape=\"circle\"\r\n              icon={<i className=\"material-icons\">chat</i>}\r\n            ></Button>\r\n          </Badge>\r\n          <Button\r\n            style={{ margin: \"0px 5px\" }}\r\n            onClick={this.props.onDisplayRoomInfo}\r\n            size=\"large\"\r\n            shape=\"circle\"\r\n            icon={<i className=\"material-icons\">security</i>}\r\n          ></Button>\r\n          <Dropdown overlay={<MenuComponent />} trigger={[\"click\"]}>\r\n            <Button\r\n              style={{ margin: \"0px 5px\" }}\r\n              // onClick={this.props.onDisplayChat}\r\n              size=\"large\"\r\n              shape=\"circle\"\r\n              icon={<i className=\"material-icons\">menu</i>}\r\n            ></Button>\r\n          </Dropdown>\r\n          ,\r\n        </div>\r\n\r\n        <Button\r\n          onClick={this.props.onStartScreenShare}\r\n          style={{ margin: \"0px 5px\" }}\r\n          size=\"large\"\r\n          shape=\"circle\"\r\n          icon={<i className=\"material-icons\">tv</i>}\r\n        ></Button>\r\n        {this.state.openMic ? (\r\n          <div style={{ position: \"relative\" }} key=\"mic\">\r\n            <Button\r\n              onClick={() => {\r\n                this.props.onStopMic();\r\n                this.setState({ openMic: false });\r\n              }}\r\n              style={{ margin: \"0px 5px\" }}\r\n              size=\"large\"\r\n              shape=\"circle\"\r\n              icon={<i className=\"material-icons\">mic</i>}\r\n            ></Button>\r\n            <Dropdown forceRender={true} trigger={[\"click\"]} overlay={<MicOption />}>\r\n              <Button\r\n                key=\"dasda\"\r\n                size=\"small\"\r\n                shape=\"circle\"\r\n                style={{ position: \"absolute\", bottom: -3, right: -3 }}\r\n                icon={<i className=\"material-icons\">expand_more</i>}\r\n              ></Button>\r\n            </Dropdown>\r\n          </div>\r\n        ) : (\r\n          <Button\r\n            onClick={() => {\r\n              this.props.onOpenMic();\r\n              this.setState({ openMic: true });\r\n            }}\r\n            style={{ margin: \"0px 5px\" }}\r\n            size=\"large\"\r\n            shape=\"circle\"\r\n            icon={<i className=\"material-icons\">mic_off</i>}\r\n          ></Button>\r\n        )}\r\n\r\n        <Button\r\n          style={{ margin: \"0px 5px\" }}\r\n          size=\"large\"\r\n          type=\"primary\"\r\n          shape=\"circle\"\r\n          danger\r\n          icon={<i className=\"material-icons\">call_end</i>}\r\n          onClick={this.props.onEndCall}\r\n        ></Button>\r\n        {this.state.openCamera ? (\r\n          <div style={{ position: \"relative\" }} key=\"camera\">\r\n            <Button\r\n              onClick={() => {\r\n                this.props.onStopCamera();\r\n                this.setState({ openCamera: false });\r\n              }}\r\n              style={{ margin: \"0px 5px\" }}\r\n              size=\"large\"\r\n              shape=\"circle\"\r\n              icon={<i className=\"material-icons\">videocam</i>}\r\n            ></Button>\r\n            <Dropdown forceRender={true} trigger={[\"click\"]} overlay={<CameraOption />}>\r\n              <Button\r\n                size=\"small\"\r\n                shape=\"circle\"\r\n                style={{ position: \"absolute\", bottom: -3, right: -3 }}\r\n                icon={<i className=\"material-icons\">expand_more</i>}\r\n              ></Button>\r\n            </Dropdown>\r\n          </div>\r\n        ) : (\r\n          <Button\r\n            onClick={() => {\r\n              this.props.onOpenCamera();\r\n              this.setState({ openCamera: true });\r\n            }}\r\n            style={{ margin: \"0px 5px\" }}\r\n            size=\"large\"\r\n            shape=\"circle\"\r\n            icon={<i className=\"material-icons\">videocam_off</i>}\r\n          ></Button>\r\n        )}\r\n        <div style={{ position: \"absolute\", right: 0, display: \"flex\" }}>\r\n          {userOnRoomState.length > 1 ? (\r\n            <Button\r\n              style={{ margin: \"0px 5px\" }}\r\n              size=\"large\"\r\n              onClick={this.onChangeView}\r\n              shape=\"circle\"\r\n              icon={<i className=\"material-icons\">grid_on</i>}\r\n            ></Button>\r\n          ) : null}\r\n          <Button\r\n            onClick={this.props.onShareLink}\r\n            style={{ margin: \"0px 5px\" }}\r\n            size=\"large\"\r\n            shape=\"circle\"\r\n            icon={<i className=\"material-icons\">person_add</i>}\r\n          ></Button>\r\n          <Button\r\n            onClick={this.props.onDisplayRemote}\r\n            style={{ margin: \"0px 5px\" }}\r\n            size=\"large\"\r\n            shape=\"circle\"\r\n            icon={<i className=\"material-icons\">swap_horiz</i>}\r\n          ></Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    streamState: state.streamState,\r\n    userOnRoomState: state.userOnRoomState,\r\n    messageState: state.messageState,\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setViewOneCamera: () => dispatch(setViewOneCamera()),\r\n    // setModal: (data) => dispatch(setModal(data)),\r\n    // setpdfViewer: (data) => dispatch(setpdfViewer(data)),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FooterTool);\r\n","import { Button } from \"antd\";\r\nimport Avatar from \"antd/lib/avatar/avatar\";\r\nimport React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { userRoom } from \"../../global/UserRoom\";\r\nimport { setLargeVideo } from \"../../reducers/largeVideoReducer\";\r\nimport { setViewOneCamera } from \"../../reducers/uiReducer\";\r\nimport { store } from \"../../redux/store\";\r\nconst ColorList = [\r\n          \"#f56a00\",\r\n          \"#7265e6\",\r\n          \"#ffbf00\",\r\n          \"#00a2ae,#885569\",\r\n          \"#7265e6\",\r\n          \"#885569\",\r\n          \"#00a2ae,#885569\",\r\n          \"#885569\",\r\n];\r\n\r\nclass MediaElement extends Component {\r\n          constructor(props) {\r\n                    super(props);\r\n                    this.state = { mute: false, hasVideo: false };\r\n                    this.audioRef = null;\r\n                    this.videoRef = null;\r\n          }\r\n\r\n          componentDidMount = () => {\r\n                    const currentUser = this.props.streamRemoteState.get(this.props.item.id);\r\n                    this.audioRef.srcObject = currentUser?.audio?.stream;\r\n                    this.videoRef.srcObject = currentUser?.video?.stream;\r\n                    if (this.videoRef.srcObject) {\r\n                              this.setState({ hasVideo: true })\r\n                    } else {\r\n                              this.setState({ hasVideo: false })\r\n                    }\r\n          }\r\n\r\n          componentDidUpdate = (prevProp) => {\r\n                    if (this.props.streamRemoteState !== prevProp.streamRemoteState) {\r\n                              const currentUser = this.props.streamRemoteState.get(this.props.item.id);\r\n                              this.audioRef.srcObject = currentUser?.audio?.stream;\r\n                              this.videoRef.srcObject = currentUser?.video?.stream;\r\n                              if (this.videoRef.srcObject) {\r\n                                        this.setState({ hasVideo: true })\r\n                              } else {\r\n                                        this.setState({ hasVideo: false })\r\n                              }\r\n                    }\r\n          }\r\n\r\n          mute = (e) => {\r\n                    e.preventDefault();\r\n                    const mute = this.state.mute;\r\n                    if (!mute) {\r\n                              this.audioRef.muted = true;\r\n                    } else {\r\n                              this.audioRef.muted = false;\r\n                    }\r\n                    this.setState({ mute: !mute })\r\n          }\r\n\r\n          setLargeVideo = (e) => {\r\n                    this.props.onHandleSetLargeVideos();\r\n                    store.dispatch(setLargeVideo({ stream: this.videoRef.srcObject }))\r\n                    this.props.setViewOneCamera(true)\r\n\r\n          }\r\n\r\n\r\n          render() {\r\n                    const { elementWidth } = this.props;\r\n                    return (\r\n                              <div className=\"media-element\" style={{ width: `${elementWidth}%`, height: `${elementWidth * 16 / 9}%` }}>\r\n                                        <div className=\"media-element-container\">\r\n                                                  <div\r\n                                                            id={this.props.item.id}\r\n                                                            onClick={this.setLargeVideo}\r\n                                                            style={{\r\n                                                                      border: this.props.item.active ? \"2px solid red\" : \"none\",\r\n                                                                      position: \"relative\",\r\n                                                                      width: \"100%\",\r\n                                                                      height: \"100%\",\r\n                                                                      display: \"flex\",\r\n                                                                      justifyContent: \"center\",\r\n                                                                      alignItems: \"center\",\r\n                                                            }}\r\n                                                  >\r\n                                                            <span style={{ color: \"#ddd\", fontWeight: \"bold\", position: \"absolute\", maxWidth: \"80%\", bottom: 5 }}>\r\n                                                                      {this.props.item?.name}\r\n                                                            </span>\r\n                                                            {this.state.mute ? (\r\n                                                                      <Button\r\n                                                                                onClick={this.mute}\r\n                                                                                type=\"link\"\r\n                                                                                shape=\"circle\"\r\n                                                                                danger\r\n                                                                                style={{ position: \"absolute\", top: 5, left: 5, zIndex: 10 }}\r\n                                                                                icon={<i className=\"material-icons\">volume_off</i>}\r\n                                                                      ></Button>\r\n                                                            ) : (\r\n                                                                                <Button\r\n                                                                                          danger\r\n                                                                                          onClick={this.mute}\r\n                                                                                          type=\"link\"\r\n                                                                                          shape=\"circle\"\r\n                                                                                          style={{ position: \"absolute\", top: 5, left: 5, zIndex: 10 }}\r\n                                                                                          icon={<i className=\"material-icons\">volume_up</i>}\r\n                                                                                ></Button>\r\n                                                                      )}\r\n                                                            {!this.state.hasVideo ? <div\r\n                                                                      id=\"placeHodler\"\r\n                                                                      style={{\r\n                                                                                color: \"#ddd\",\r\n                                                                                display: \"flex\",\r\n                                                                                alignItems: \"center\",\r\n                                                                                justifyContent: \"center\",\r\n                                                                                position: \"absolute\",\r\n                                                                                borderRadius: \"50%\",\r\n                                                                                width: 200,\r\n                                                                                height: 200,\r\n                                                                      }}\r\n                                                            >\r\n                                                                      <Avatar\r\n                                                                                style={{ backgroundColor: `${ColorList[Math.floor(Math.random() * 10)]}`, verticalAlign: \"middle\", width: \"100%\", height: \"100%\" }}\r\n                                                                                size=\"large\"\r\n                                                                      >\r\n                                                                                {this.props.item?.name.match(/\\b([A-Z])/g)?.join(\"\")}\r\n                                                                      </Avatar>\r\n                                                            </div> : null}\r\n                                                            <video\r\n                                                                      ref={(ref) => {\r\n                                                                                this.videoRef = ref;\r\n                                                                      }}\r\n                                                                      id=\"video\"\r\n                                                                      autoPlay={true}\r\n                                                                      width={\"100%\"}\r\n                                                                      height={\"100%\"}\r\n                                                                      style={{ background: \"black\", border: \"2px solid #224567\" }}\r\n                                                            ></video>\r\n                                                            <audio\r\n                                                                      ref={(ref) => {\r\n                                                                                this.audioRef = ref;\r\n                                                                      }}\r\n                                                                      id=\"audio\"\r\n                                                                      autoPlay={true}\r\n                                                            ></audio>\r\n                                                  </div>\r\n                                        </div>\r\n                              </div>\r\n                    );\r\n          }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n          return {\r\n                    streamRemoteState: state.streamRemoteState,\r\n                    //         userOnRoomState: state.userOnRoomState\r\n          };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n          return {\r\n                    setViewOneCamera: (data) => dispatch(setViewOneCamera(data)),\r\n          };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MediaElement);","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { userRoom } from \"../../global/UserRoom\";\r\nimport { setStream } from \"../../reducers/streamReducer\";\r\nimport { setViewOneCamera } from \"../../reducers/uiReducer\";\r\nimport { setUserOnRoom } from \"../../reducers/userOnRoomReducer\";\r\nimport MediaElement from \"./MediaElement\";\r\nimport \"./style.scss\";\r\nclass MultipleMediaContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      widthMediaElement: 0,\r\n    };\r\n  }\r\n  componentDidMount = () => {\r\n    const { userOnRoomState } = this.props;\r\n    if (userOnRoomState.length < 5) {\r\n      this.setState({\r\n        widthMediaElement: 100 / userOnRoomState.length,\r\n      });\r\n    } else {\r\n      this.setState({\r\n        widthMediaElement: 100 / 4,\r\n      });\r\n    }\r\n\r\n  };\r\n  componentDidUpdate = (prevProps) => {\r\n    const { userOnRoomState } = this.props;\r\n    if (prevProps.userOnRoomState !== userOnRoomState) {\r\n      if (userOnRoomState.length < 5) {\r\n        this.setState({\r\n          widthMediaElement: 100 / userOnRoomState.length,\r\n        });\r\n      } else {\r\n        this.setState({\r\n          widthMediaElement: 100 / 4,\r\n        });\r\n      }\r\n      if (userOnRoomState.length < 2) {\r\n        this.props.setViewOneCamera(true)\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  onHandleSetLargeVideo = (item, index) => {\r\n    this.setActive(index)\r\n  }\r\n\r\n\r\n  setActive = (index) => {\r\n    const currentStream = { ...this.props.streamState };\r\n    const local = currentStream.local;\r\n    for (let j = 0; j < local.length; j++) {\r\n      const element = local[j];\r\n      element.active = false;\r\n    }\r\n    const clone=Array.from(this.props.userOnRoomState);\r\n    for (let i = 0; i <clone.length; i++) {\r\n      const element = clone[i];\r\n      if (i === index) {\r\n        element.active = true;\r\n      } else {\r\n        element.active = false;\r\n      }\r\n    }\r\n    this.props.setUserOnRoom(clone)\r\n    this.props.setStream({ ...currentStream })\r\n  }\r\n\r\n\r\n  render() {\r\n    const { userOnRoomState } = this.props;\r\n    const { widthMediaElement } = this.state;\r\n    return (\r\n      <div className=\"multipleMedia__container\">\r\n        {userOnRoomState.map((item, index) => {\r\n          return <MediaElement item={item} key={index} elementWidth={widthMediaElement} onHandleSetLargeVideos={this.onHandleSetLargeVideo} />;\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    viewOneCamera: state.ui.viewOneCamera,\r\n    userOnRoomState: state.userOnRoomState,\r\n    streamState: state.streamState\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setViewOneCamera: (data) => dispatch(setViewOneCamera(data)),\r\n    setStream: (data) => dispatch(setStream(data)),\r\n    setUserOnRoom: (data) => dispatch(setUserOnRoom(data))\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MultipleMediaContainer);\r\n","import { Input, Modal, Row, Tag } from \"antd\";\r\nimport React, { Component } from \"react\";\r\nimport { TwitterOutlined, YoutubeOutlined, FacebookOutlined, LinkedinOutlined } from \"@ant-design/icons\";\r\nimport { connect } from \"react-redux\";\r\nimport { setModal } from \"../../reducers/modalReducer\";\r\n\r\nclass ModalComponent extends Component {\r\n  handleCancel = (e) => {\r\n    this.props.setModal({ visible: false, header: \"\", render: null });\r\n  };\r\n  onOk = () => {\r\n    window.roomClient.changePassword();\r\n  };\r\n\r\n  render() {\r\n    console.log(this.props.modalState);\r\n    return (\r\n      <Modal\r\n        title={this.props.modalState.header}\r\n        visible={this.props.modalState.visible}\r\n        onCancel={this.handleCancel}\r\n        onOk={this.onOk}\r\n        closable={false}\r\n      >\r\n        {this.props.modalState.render}\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    modalState: state.modalState,\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setModal: (data) => dispatch(setModal(data)),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalComponent);\r\n","import { Button, Col, Input, Row, Form } from \"antd\";\r\nimport React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Layout } from \"antd\";\r\nimport Avatar from \"antd/lib/avatar/avatar\";\r\n\r\nconst { Footer, Content } = Layout;\r\nclass Chat extends Component {\r\n  sendMessage = (values) => {\r\n    window.roomClient.sendMessageChat(values.message);\r\n    this.formRef?.resetFields();\r\n  };\r\n  render() {\r\n    return (\r\n      <Layout style={{ width: 350, height: \"100%\" }}>\r\n        <Content style={{ width: \"100%\" }}>\r\n          {this.props.messageState.map((item, index) => {\r\n            return (\r\n              <Row key={index}>\r\n                <Col span={3} style={{ alignItems: \"flex-end\", display: \"flex\", padding: 5 }}>\r\n                  {item.id === window.roomClient.socket.id ? null : <Avatar src=\"./icons/avatar.png\" />}\r\n                </Col>\r\n                <Col span={21}>\r\n                  {item.id === window.roomClient.socket.id ? null : (\r\n                    <Row style={{ width: \"100%\" }}>\r\n                      <div style={{ fontSize: 11, color: \"#90949c\" }}>{item.name}</div>\r\n                    </Row>\r\n                  )}\r\n\r\n                  <Row style={{ width: \"100%\" }}>\r\n                    <div\r\n                      style={\r\n                        item.id === window.roomClient.socket.id\r\n                          ? {\r\n                              marginTop: 2,\r\n                              marginBottom: 2,\r\n                              marginRight: 5,\r\n                              background: \"#42a5f5\",\r\n                              color: \"#fff\",\r\n                              borderRadius: \"20px 20px 3px 20px\",\r\n                              display: \"block\",\r\n                              maxWidth: \"75%\",\r\n                              padding: \"7px 13px 7px 13px\",\r\n                              marginLeft: \"auto\",\r\n                              fontSize: 13,\r\n                            }\r\n                          : {\r\n                              marginTop: 2,\r\n                              marginBottom: 2,\r\n                              background: \"#ddd\",\r\n                              borderRadius: \"20px 20px 20px 3px\",\r\n                              display: \"block\",\r\n                              maxWidth: \"75%\",\r\n                              padding: \"7px 13px 7px 13px\",\r\n                              float: \"left\",\r\n                              fontSize: 13,\r\n                              color: \"#444950\",\r\n                            }\r\n                      }\r\n                    >\r\n                      {item.message}\r\n                    </div>\r\n                  </Row>\r\n                </Col>\r\n              </Row>\r\n            );\r\n          })}\r\n        </Content>\r\n        <Footer style={{ padding: 0, margin: 10, display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>\r\n          <Form ref={(ref)=>this.formRef=ref} layout=\"inline\" name=\"horizontal_login\" onFinish={this.sendMessage}>\r\n            <Form.Item name=\"message\">\r\n              <Input placeholder=\"Nhập tin nhắn\" />\r\n            </Form.Item>\r\n            <Form.Item>\r\n              <Button\r\n                style={{ justifyContent: \"center\", alignItems: \"center\", display: \"flex\" }}\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                icon={<i className=\"material-icons\">send</i>}\r\n              ></Button>\r\n            </Form.Item>\r\n          </Form>\r\n        </Footer>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    messageState: state.messageState,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(Chat);\r\n","import React, { Component } from \"react\";\r\nimport RemoteVideo from \"../Components/RemoteVideo/RemoteVideo\";\r\nimport SliderRight from \"../Layouts/SliderRight\";\r\nimport LargeVideo from \"../Components/Video/LargeVideo\";\r\nimport CameraOption from \"../Components/Option/CameraOption\";\r\nimport SliderLeft from \"../Layouts/SliderLeft\";\r\nimport FooterTool from \"../Components/Footer/FooterTool\";\r\nimport { RoomClient } from \"../module/RoomClient\";\r\n\r\nimport { Button, Layout, message, Modal } from \"antd\";\r\nimport { store } from \"../redux/store\";\r\nimport { setRoomCreate } from \"../reducers/roomCreateReducer\";\r\nimport { Role } from \"../global/Role\";\r\nimport { connect } from \"react-redux\";\r\nimport MultipleMediaContainer from \"../Components/MutilpleMedia/MultipleMediaContainer\";\r\nimport Clock from \"../Components/Clock/Clock\";\r\nimport ModalComponent from \"../Components/Modal/ModalComponent\";\r\nimport { setModal } from \"../reducers/modalReducer\";\r\nimport { Input, Row, Tag } from \"antd\";\r\nimport { TwitterOutlined, CopyOutlined } from \"@ant-design/icons\";\r\nimport Chat from \"../Components/Chat/Chat\";\r\nconst { Header, Footer, Sider, Content } = Layout;\r\n\r\nconst mediaType = {\r\n  audio: \"audioType\",\r\n  video: \"videoType\",\r\n  screen: \"screenType\",\r\n};\r\n\r\nclass Container extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.linkInput = null;\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    if (Role.cameraEnable) {\r\n      this.onOpenCamera();\r\n    }\r\n    if (Role.micEnable) {\r\n      this.onOpenMic();\r\n    }\r\n\r\n    // window.roomClient.on(\"stopScreen\", async () => {\r\n    //   if (Role.cameraEnable) {\r\n    //     await window.roomClient?.closeProducer(RoomClient.mediaType.video);\r\n    //     window.roomClient?.produce(RoomClient.mediaType.video, true);\r\n    //   }\r\n    //   // if (Role.micEnable) {\r\n    //   //   window.roomClient?.closeProducer(RoomClient.mediaType.audio);\r\n    //   //   window.roomClient?.produce(RoomClient.mediaType.audio, true);\r\n    //   // }\r\n    // });\r\n  };\r\n\r\n  onOpenMic = () => {\r\n    Role.micEnable = true;\r\n    window.roomClient?.produce(mediaType.audio, null);\r\n  };\r\n\r\n  onStopMic = () => {\r\n    Role.micEnable = false;\r\n    window.roomClient?.closeProducer(mediaType.audio);\r\n  };\r\n\r\n  onOpenCamera = () => {\r\n    Role.cameraEnable = true;\r\n    window.roomClient?.produce(mediaType.video, true);\r\n  };\r\n\r\n  onStopCamera = () => {\r\n    Role.cameraEnable = false;\r\n    window.roomClient?.closeProducer(mediaType.video);\r\n  };\r\n\r\n  onStartScreenShare = () => {\r\n    window.roomClient?.produce(mediaType.screen);\r\n  };\r\n\r\n  onEndCall = () => {\r\n    window.roomClient?.exit(false);\r\n    store.dispatch(setRoomCreate(false));\r\n  };\r\n\r\n  onDisplayChat = () => {\r\n    const chatElement = document.getElementById(\"chatElement\");\r\n    const display = chatElement.style.display;\r\n    if (display === \"none\") {\r\n      chatElement.style.display = \"flex\";\r\n      window.roomClient.getMessageInRoom();\r\n    } else {\r\n      chatElement.style.display = \"none\";\r\n    }\r\n  };\r\n\r\n  onDisplayRemote = () => {\r\n    const chatElement = document.getElementById(\"remoteVideos\");\r\n    const display = chatElement.style.display;\r\n    if (display === \"none\") {\r\n      chatElement.style.display = \"flex\";\r\n    } else {\r\n      chatElement.style.display = \"none\";\r\n    }\r\n  };\r\n\r\n  onDisplayRoomInfo = async () => {\r\n    const roomInfo = await window.roomClient.roomInfo();\r\n    this.props.setModal({\r\n      visible: true,\r\n      header: \"Thông tin cuộc họp\",\r\n      render: (\r\n        <>\r\n          <Row style={{ margin: \"5px 0\" }}>\r\n            <Input\r\n              addonBefore={\r\n                <Tag icon={<TwitterOutlined />} color=\"#55acee\">\r\n                  Tên phòng:\r\n                </Tag>\r\n              }\r\n              placeholder=\"Nhập tên phòng\"\r\n              disabled\r\n              value={roomInfo.name}\r\n            />\r\n          </Row>\r\n          <Row style={{ margin: \"5px 0\" }}>\r\n            <Input.Password\r\n              onChange={(e) => {\r\n                Role.password = e.target.value;\r\n              }}\r\n              addonBefore={\r\n                <Tag icon={<TwitterOutlined />} color=\"#cd201f\">\r\n                  Mật khẩu:\r\n                </Tag>\r\n              }\r\n              placeholder=\"Nhập mật khẩu\"\r\n              value={roomInfo.password}\r\n            />\r\n          </Row>\r\n        </>\r\n      ),\r\n    });\r\n  };\r\n\r\n  onShareLink = () => {\r\n    Modal.info({\r\n      title: \"Liên kết chia sẻ\",\r\n      content: (\r\n        <div>\r\n          <Input.Search\r\n            id=\"copyLink\"\r\n            onSearch={(value) => {\r\n              document.getElementById(\"copyLink\").select();\r\n              document.execCommand(\"copy\");\r\n              message.info(value);\r\n            }}\r\n            allowClear\r\n            enterButton={<Button data-clipboard-target=\"#copyLink\" icon={<CopyOutlined />}></Button>}\r\n            value={window.location.href}\r\n          ></Input.Search>\r\n        </div>\r\n      ),\r\n      footer: null,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { viewOneCamera } = this.props;\r\n    return (\r\n      <Layout style={{ height: \"100%\" }}>\r\n        <ModalComponent />\r\n        <Sider style={{ display: \"none\" }} id=\"chatElement\" width={350} onClick={this.onCreateRoom}>\r\n          <Chat />\r\n        </Sider>\r\n        <Layout>\r\n          {viewOneCamera ? (\r\n            <Content id=\"localMedia\">\r\n              <Layout style={{ height: \"100%\" }}>\r\n                <Sider width={150} id=\"localVideos\" style={{ position: \"absolute\", zIndex: 2, background: 'transparent' }}>\r\n                  <SliderLeft />\r\n                </Sider>\r\n                <Content style={{ overflow: \"hidden\" }} id=\"localMedia\">\r\n                  <LargeVideo />\r\n                </Content>\r\n              </Layout>\r\n            </Content>\r\n          ) : (\r\n            <Content id=\"multipleMedia\">\r\n              <Layout style={{ height: \"100%\" }}>\r\n                <MultipleMediaContainer />\r\n              </Layout>\r\n            </Content>\r\n          )}\r\n\r\n          <Footer>\r\n            <FooterTool\r\n              onStopMic={this.onStopMic}\r\n              onOpenMic={this.onOpenMic}\r\n              onDisplayChat={this.onDisplayChat}\r\n              onStartScreenShare={this.onStartScreenShare}\r\n              onEndCall={this.onEndCall}\r\n              onStopCamera={this.onStopCamera}\r\n              onOpenCamera={this.onOpenCamera}\r\n              onDisplayRemote={this.onDisplayRemote}\r\n              onDisplayRoomInfo={this.onDisplayRoomInfo}\r\n              onShareLink={this.onShareLink}\r\n            />\r\n          </Footer>\r\n        </Layout>\r\n        {viewOneCamera ? (\r\n          <Sider\r\n            style={{\r\n              background: \"#f0f2f5\",\r\n              width: \"100%\",\r\n              display: this.props.remoteElementState.length > 0 ? \"block\" : \"none\",\r\n            }}\r\n            width={220}\r\n            id=\"remoteVideos\"\r\n          >\r\n            <SliderRight />\r\n          </Sider>\r\n        ) : null}\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    viewOneCamera: state.ui.viewOneCamera,\r\n    remoteElementState: state.remoteElementState,\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setModal: (data) => dispatch(setModal(data)),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Container);\r\n","import React, { Component } from \"react\";\r\n\r\nexport default class Start extends Component {\r\n  render() {\r\n    return <div></div>;\r\n  }\r\n}\r\n","import { EVENTS, RTC_EVENTS } from \"../events/EVENTS\";\r\nimport { Role } from \"../global/Role\";\r\nimport { setLargeVideo } from \"../reducers/largeVideoReducer\";\r\nimport { setLocalElementReducer } from \"../reducers/localElementReducer\";\r\nimport { setMessage } from \"../reducers/messageReducer\";\r\nimport { setRemoteElement } from \"../reducers/remoteElementReducer\";\r\nimport { store } from \"../redux/store\";\r\nimport { Notification } from \"./Notification\";\r\nimport { SocketClone } from \"./Socket\";\r\n\r\nconst mediaType = {\r\n    audio: \"audioType\",\r\n    video: \"videoType\",\r\n    screen: \"screenType\",\r\n};\r\n\r\nclass RoomClientClone {\r\n    constructor(roomname, username, password, callback) {\r\n        this.roomname = roomname;\r\n        this.username = username;\r\n        this.password = password;\r\n        this.producerTransport = null;\r\n        this.consumeTransport = null;\r\n        this.device = null;\r\n        this.listProduce = { videos: [], audio: [], screenCast: [] };\r\n        this.initRoomClient();\r\n        this.callback = callback;\r\n    }\r\n\r\n    initRoomClient = async () => {\r\n        const create = await this.createRoom()\r\n        console.log(create)\r\n        if (create.roomname) {\r\n            await this.initSocket()\r\n            await this.joinRoom(this.username, this.roomname, this.password)\r\n            //test\r\n            await this.produce(mediaType.video, null)\r\n            // await this.produce(mediaType.audio, null)\r\n            // await this.produce(mediaType.screen,null);\r\n            this.callback(this)\r\n        }\r\n    }\r\n\r\n    initRTC = async () => {\r\n        const routerCapabilities = await this.getRouterCapabilities()\r\n        this.device = await this.loadDevice(routerCapabilities);\r\n        this.producerTransport = await this.initProducerTransport(this.device);\r\n        this.consumeTransport = await this.initConsumeTransport(this.device);\r\n    }\r\n\r\n    initSocket = () => {\r\n\r\n        this.socket.on(EVENTS.INCOMMING_MESSAGE, (data) => {\r\n            console.log(data)\r\n            store.dispatch(setMessage(data));\r\n        })\r\n\r\n        this.socket.on(EVENTS.SOCKET_USER_JOIN_ROOM, async ({ name, id }) => {\r\n            await this.getProducerOfRoom();\r\n            Notification(\"info\", name + \" đã tham gia vào cuộc họp\")\r\n        });\r\n\r\n        this.socket.on(EVENTS.SOCKET_USER_LEFT_ROOM, async ({ name, id }) => {\r\n            await this.getProducerOfRoom();\r\n            Notification(\"warning\", name + \" đã rời khỏi cuộc họp\")\r\n        });\r\n\r\n        this.socket.on(EVENTS.SOCKET_DISCONNECT, () => {\r\n            this.exit(false);\r\n        });\r\n\r\n        this.socket.on(RTC_EVENTS.CLOSE_CONSUME, ({ consumerId, peerId, peerName }) => {\r\n            console.log(\"closing consumer:\", consumerId, peerId, peerName);\r\n            this.closeConsumer(consumerId, peerId, peerName);\r\n        });\r\n\r\n        this.socket.on(RTC_EVENTS.NEW_PRODUCER, async (data) => {\r\n            const remoteElement = [...store.getState().remoteElementState];\r\n            for (let index = 0; index < data.length; index++) {\r\n                const { producer_id, peerName, peerId } = data[index];\r\n                if (peerId !== this.socket.id) {\r\n                    const consume = await this.consume(producer_id, peerName, peerId);\r\n                    const rl = remoteElement.findIndex((item) => item.peerId == peerId);\r\n                    if (rl === -1) {\r\n                        const remoteElementClone = {\r\n                            video: [],\r\n                            audio: null,\r\n                            peerId, peerName\r\n                        };\r\n                        if (consume.kind === \"video\") {\r\n                            remoteElementClone.video.push(consume)\r\n                        }\r\n                        if (consume.kind === \"audio\") {\r\n                            remoteElementClone.audio = consume\r\n                        }\r\n                        remoteElement.push(remoteElementClone)\r\n                    } else {\r\n                        const remoteElementClone = remoteElement[rl];\r\n                        if (consume.kind === \"video\") {\r\n                            remoteElementClone.video.push(consume);\r\n                        }\r\n                        if (consume.kind === \"audio\") {\r\n                            remoteElementClone.audio = consume\r\n                        }\r\n                    }\r\n\r\n                }\r\n            }\r\n            store.dispatch(setRemoteElement(remoteElement));\r\n        });\r\n    }\r\n\r\n    createRoom = async () => {\r\n        const cs = new SocketClone(\"https://\" + window.serverIp + \":\" + window.port);\r\n        this.socket = cs.socket;\r\n        this.socket.request = cs.request;\r\n        const createRoom = await this.socket.request(EVENTS.CHECK_ROOM_ALREADY, { roomname: this.roomname, password: this.password });\r\n        if (createRoom) {\r\n            return { roomname: this.roomname, password: this.password }\r\n        } else {\r\n            return await this.socket.request(EVENTS.SOCKET_CREATE_ROOM, { roomname: this.roomname, password: this.password });\r\n        }\r\n    };\r\n\r\n    getProducerOfRoom = async () => {\r\n        const listProducer = await this.socket.request(RTC_EVENTS.GET_PRODUCER);\r\n        const remoteElement = [];\r\n        for (let index = 0; index < listProducer.length; index++) {\r\n            const { producer_id, peerName, peerId } = listProducer[index];\r\n            if (peerId !== this.socket.id) {\r\n                const consume = await this.consume(producer_id, peerName, peerId);\r\n                const rl = remoteElement.findIndex((item) => item.peerId == peerId)\r\n                if (rl === -1) {\r\n                    const remoteElementClone = {\r\n                        video: [],\r\n                        audio: null,\r\n                        peerId, peerName\r\n                    };\r\n                    if (consume.kind === \"video\") {\r\n                        remoteElementClone.video = [consume]\r\n                    }\r\n                    if (consume.kind === \"audio\") {\r\n                        remoteElementClone.audio = consume\r\n                    }\r\n                    remoteElement.push(remoteElementClone)\r\n                } else {\r\n                    const remoteElementClone = remoteElement[rl];\r\n                    if (consume.kind === \"video\") {\r\n                        remoteElementClone.video.push(consume);\r\n                    }\r\n                    if (consume.kind === \"audio\") {\r\n                        remoteElementClone.audio = consume\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n        store.dispatch(setRemoteElement(remoteElement));\r\n    }\r\n\r\n    joinRoom = async (username, roomname, password) => {\r\n        await this.socket.request(EVENTS.SOCKET_USER_JOIN_ROOM, { username, roomname, password: password });\r\n        await this.initRTC()\r\n        await this.getProducerOfRoom();\r\n    };\r\n\r\n    getRouterCapabilities = async () => {\r\n        const routerCapabilities = await this.socket.request(RTC_EVENTS.GET_ROUTER_CAPABILITIES);\r\n        return routerCapabilities;\r\n    }\r\n\r\n    loadDevice = async (routerRtpCapabilities) => {\r\n        let device;\r\n        try {\r\n            device = new window.mediasoupClient.Device();\r\n        } catch (error) {\r\n            if (error.name === \"UnsupportedError\") {\r\n                console.error(\"browser not supported\");\r\n            }\r\n            console.error(error);\r\n        }\r\n        await device.load({\r\n            routerRtpCapabilities,\r\n        });\r\n        return device;\r\n    }\r\n\r\n    initProducerTransport = async (device) => {\r\n        const transport = await this.socket.request(RTC_EVENTS.CREATE_TRANSPORT, {\r\n            // forceTcp: false,+\r\n            enableUdp: true,\r\n            preferUdp: true,\r\n            rtpCapabilities: device.rtpCapabilities,\r\n        });\r\n\r\n        const producerTransport = device.createSendTransport(transport);\r\n\r\n        producerTransport.on(\"connect\", async ({ dtlsParameters }, callback, errback) => {\r\n            try {\r\n                await this.socket.request(RTC_EVENTS.CONNECT_TRANSPORT, { dtlsParameters, transport_id: transport.id });\r\n                callback();\r\n            } catch (error) {\r\n                errback(error);\r\n            }\r\n        });\r\n\r\n        producerTransport.on(\"produce\", async ({ kind, rtpParameters }, callback, errback) => {\r\n            try {\r\n                const producerTransportId = producerTransport.id\r\n                const { producerId, socketId } = await this.socket.request(RTC_EVENTS.CREATE_PRODUCE, {\r\n                    producerTransportId,\r\n                    kind,\r\n                    rtpParameters,\r\n                });\r\n                callback({ id: producerId, socketId });\r\n            } catch (err) {\r\n                errback(err);\r\n            }\r\n        });\r\n\r\n        producerTransport.on(\"connectionstatechange\", (state) => {\r\n            switch (state) {\r\n                case \"connecting\":\r\n                    break;\r\n                case \"connected\":\r\n                    break;\r\n                case \"failed\":\r\n                    producerTransport.close();\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n\r\n        return producerTransport\r\n    }\r\n\r\n    initConsumeTransport = async (device) => {\r\n        const transport = await this.socket.request(RTC_EVENTS.CREATE_TRANSPORT, { forceTcp: false });\r\n\r\n        const consumerTransport = device.createRecvTransport(transport);\r\n\r\n        consumerTransport.on(\"connect\", async ({ dtlsParameters }, callback, errback) => {\r\n            try {\r\n                await this.socket.request(RTC_EVENTS.CONNECT_TRANSPORT, { transport_id: consumerTransport.id, dtlsParameters });\r\n                callback();\r\n            } catch (error) {\r\n                errback(errback);\r\n            }\r\n        });\r\n\r\n        consumerTransport.on(\"connectionstatechange\", async (state) => {\r\n            switch (state) {\r\n                case \"connecting\":\r\n                    break;\r\n\r\n                case \"connected\":\r\n                    break;\r\n\r\n                case \"failed\":\r\n                    consumerTransport.close();\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n\r\n        return consumerTransport\r\n    }\r\n\r\n    produce = async (type, deviceId = null) => {\r\n        let mediaConstraints = {};\r\n        let audio = false;\r\n        let screen = false;\r\n        switch (type) {\r\n            case mediaType.audio:\r\n                mediaConstraints = {\r\n                    audio: {\r\n                        deviceId: deviceId,\r\n                    },\r\n                    video: false,\r\n                };\r\n                audio = true;\r\n                break;\r\n            case mediaType.video:\r\n                mediaConstraints = {\r\n                    audio: false,\r\n                    video: {\r\n                        width: {\r\n                            min: 640,\r\n                            ideal: 1920,\r\n                        },\r\n                        height: {\r\n                            min: 400,\r\n                            ideal: 1080,\r\n                        },\r\n                        deviceId: deviceId,\r\n                    },\r\n                };\r\n                break;\r\n            case mediaType.screen:\r\n                mediaConstraints = false;\r\n                screen = true;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (!this.device.canProduce(\"video\") && !audio) {\r\n            console.error(\"cannot produce video\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const stream = screen ? await navigator.mediaDevices.getDisplayMedia() : await navigator.mediaDevices.getUserMedia(mediaConstraints);\r\n            const track = audio ? stream.getAudioTracks()[0] : stream.getVideoTracks()[0];\r\n            const params = {\r\n                track,\r\n            };\r\n            if (type === mediaType.video) {\r\n                params.encodings = [\r\n                    { rid: 'r0', maxBitrate: 100000, scalabilityMode: 'S1T3' },\r\n                    { rid: 'r1', maxBitrate: 300000, scalabilityMode: 'S1T3' },\r\n                    { rid: 'r2', maxBitrate: 600000, scalabilityMode: 'S1T3' },\r\n                    { rid: 'r3', maxBitrate: 900000, scalabilityMode: 'S1T3' }\r\n                ]\r\n                params.codecOptions = {\r\n                    videoGoogleStartBitrate: 1000,\r\n                };\r\n                store.dispatch(setLargeVideo({ stream }));\r\n\r\n            }\r\n            const producer = await this.producerTransport.produce(params);\r\n\r\n            producer.on(\"trackended\", () => {\r\n                console.log(\"producer trackend\")\r\n                this.closeProducer(type);\r\n            });\r\n\r\n            producer.on(\"transportclose\", () => {\r\n                console.log(\"producer transport close\");\r\n                // producers.delete(this.producer.id);\r\n            });\r\n\r\n            producer.on(\"close\", () => {\r\n                console.log(\"closing producer\");\r\n                // producers.delete(this.producer.id);\r\n            });\r\n            const localElementState = { ...store.getState().localElementState }\r\n            switch (type) {\r\n                case mediaType.video:\r\n                    this.listProduce.videos.push(producer)\r\n                    localElementState.videos.push({ stream, producerId: producer.id })\r\n                    console.log(producer.track)\r\n                    break;\r\n                case mediaType.audio:\r\n                    this.listProduce.audio.push(producer)\r\n                    localElementState.audio.push({ stream, producerId: producer.id })\r\n                    break;\r\n                case mediaType.screen:\r\n                    this.listProduce.screenCast.push(producer)\r\n                    localElementState.screenCast.push({ stream, producerId: producer.id })\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n            store.dispatch(setLocalElementReducer(localElementState))\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    };\r\n\r\n    consume = async (producerId, peerName, peerId) => {\r\n        const consume = await this.getConsumeStream(producerId);\r\n        return consume;\r\n    };\r\n\r\n    getConsumeStream = async (producerId) => {\r\n\r\n        const { rtpCapabilities } = this.device;\r\n        const data = await this.socket.request(RTC_EVENTS.CREATE_CONSUME, {\r\n            rtpCapabilities,\r\n            consumerTransportId: this.consumeTransport.id, // might be\r\n            producerId,\r\n        });\r\n        const { id, kind, rtpParameters } = data?.params;\r\n\r\n        const codecOptions = [\r\n            { ssrc: 222220, scalabilityMode: 'S4T3' }\r\n        ];\r\n        const consumer = await this.consumeTransport.consume({\r\n            id,\r\n            producerId,\r\n            kind,\r\n            rtpParameters,\r\n            codecOptions,\r\n        });\r\n\r\n        consumer.on(\"trackended\", () => {\r\n            console.log(\"consumer trackend\")\r\n            // this.removeConsumer(consumer.id);\r\n        });\r\n        consumer.on(\"transportclose\", () => {\r\n            console.log(\"consumer transportclose\")\r\n            // this.removeConsumer(consumer.id);\r\n        });\r\n\r\n        const stream = new MediaStream();\r\n        stream.addTrack(consumer.track);\r\n        return { consumer, stream, kind, };\r\n    };\r\n\r\n    closeProducer = (type) => {\r\n        const localElementState = { ...store.getState().localElementState }\r\n        switch (type) {\r\n            case mediaType.video:\r\n                const videos = this.listProduce.videos\r\n                for (let index = 0; index < videos.length; index++) {\r\n                    const videoProduce = videos[index];\r\n                    const producer_id = videoProduce.id\r\n                    this.socket.request(RTC_EVENTS.CLOSE_PRODUCER, { producer_id, });\r\n                    videoProduce.close();\r\n                }\r\n                this.listProduce.videos = []\r\n                localElementState.videos = []\r\n                break;\r\n            case mediaType.audio:\r\n                const audios = this.listProduce.audio\r\n                for (let index = 0; index < audios.length; index++) {\r\n                    const audioProduce = audios[index];\r\n                    const producer_id = audioProduce.id\r\n                    this.socket.request(RTC_EVENTS.CLOSE_PRODUCER, { producer_id, });\r\n                    audioProduce.close();\r\n                }\r\n                this.listProduce.audio = []\r\n                localElementState.audio = []\r\n                break;\r\n            case mediaType.screen:\r\n                const screenCast = this.listProduce.screenCast\r\n                for (let index = 0; index < screenCast.length; index++) {\r\n                    const screenProduce = screenCast[index];\r\n                    const producer_id = screenProduce.id\r\n                    this.socket.request(RTC_EVENTS.CLOSE_PRODUCER, { producer_id, });\r\n                    screenProduce.close();\r\n                }\r\n                this.listProduce.screenCast = []\r\n                localElementState.screenCast = []\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        store.dispatch(setLocalElementReducer(localElementState))\r\n\r\n    };\r\n\r\n    closeConsumer = (consumerId, peerId, peerName) => {\r\n        const remoteElement = [...store.getState().remoteElementState];\r\n        for (let index = 0; index < remoteElement.length; index++) {\r\n            const element = remoteElement[index];\r\n            if (element.audio?.consumer.id === consumerId) {\r\n                element.audio = null;\r\n            } else {\r\n                for (let j = 0; j < element.video.length; j++) {\r\n                    const video = element.video[j];\r\n                    if (video.consumer.id === consumerId) {\r\n                        element.video.splice(j, 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        store.dispatch(setRemoteElement(remoteElement))\r\n    };\r\n\r\n    exit = async (offline = false) => {\r\n\r\n        if (!offline) {\r\n            await this.socket.request(EVENTS.SOCKET_EXIT_ROOM);\r\n        }\r\n        this.consumerTransport.close();\r\n        this.producerTransport.close();\r\n        this.socket.off(EVENTS.SOCKET_USER_JOIN_ROOM);\r\n        this.socket.off(EVENTS.SOCKET_USER_LEFT_ROOM);\r\n        this.socket.off(EVENTS.SOCKET_DISCONNECT);\r\n        this.socket.off(RTC_EVENTS.CLOSE_CONSUME);\r\n        this.socket.off(RTC_EVENTS.NEW_PRODUCER);\r\n        window.close();\r\n\r\n    }\r\n\r\n    getMessageInRoom = async () => {\r\n        const messages = await this.socket.request(EVENTS.SOCKET_GET_MESSAGE_IN_ROOM);\r\n        console.log(messages)\r\n        store.dispatch(setMessage(messages))\r\n    }\r\n\r\n    sendMessageChat = async (message) => {\r\n        const messages = await this.socket.request(EVENTS.SOCKET_SEND_MESSAGE, message);\r\n    }\r\n\r\n    roomInfo = async () => {\r\n        const info = await this.socket.request(EVENTS.SOCKET_GET_ROOM_INFO);\r\n        return info;\r\n    };\r\n\r\n    changePassword = async () => {\r\n        const res = await this.socket.request(EVENTS.SOCKET_CHANGE_ROOM_PASSWORD, Role.password);\r\n        Notification(\"info\", res)\r\n\r\n    }\r\n}\r\n\r\nexport { RoomClientClone }","import { Button, Input, Form } from \"antd\";\r\nimport React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Role } from \"../global/Role\";\r\nimport Container from \"../Layouts/Container\";\r\nimport { RoomClient } from \"../module/RoomClient\";\r\nimport { RoomClientClone } from \"../module/RoomClientClone\";\r\nimport { setRoomCreate } from \"../reducers/roomCreateReducer\";\r\n\r\nclass HomePage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { micEnable: false, cameraEnable: true };\r\n  }\r\n\r\n  onFinish = (form) => {\r\n    Role.micEnable = this.state.micEnable;\r\n    Role.cameraEnable = this.state.cameraEnable;\r\n    const { roomName, displayName, password } = form;\r\n    this.onCreateRoom(roomName, displayName, password);\r\n  };\r\n\r\n  onCreateRoom = (roomName, displayName, password) => {\r\n    const roomClient = new RoomClientClone(roomName, displayName, password, (roomClient) => {\r\n      this.props.setRoomCreate(true);\r\n      window.roomClient = roomClient;\r\n    });\r\n    // const roomClient = new RoomClient(\r\n    //   window.mediasoupClient,\r\n    //   window.socket,\r\n    //   roomName,\r\n    //   displayName,\r\n    //   password,\r\n    //   () => {\r\n    //     if (roomClient._isOpen) {\r\n    //       console.log(\"dâdasdadasdasdasd\")\r\n    //       window.roomClient = roomClient;\r\n    //       this.props.setRoomCreate(true);\r\n    //     }\r\n    //   }\r\n    // );\r\n  };\r\n  render() {\r\n    return (\r\n      <div style={{ display: \"flex\", width: \"100%\", height: \"100%\", alignItems: \"center\", justifyContent: \"center\" }}>\r\n        {this.props.roomCreateState ? (\r\n          <Container />\r\n        ) : (\r\n          <div>\r\n            <Form ref={(ref) => (this.formRef = ref)} name=\"control-ref\" onFinish={this.onFinish}>\r\n              <Form.Item name=\"roomName\" label=\"Tên cuộc họp\" rules={[{ required: true }]}>\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item name=\"displayName\" label=\"Tên hiển thị\" rules={[{ required: true }]}>\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item name=\"password\" label=\"Mật khẩu cuộc họp\">\r\n                <Input />\r\n              </Form.Item>\r\n              <Form.Item>\r\n                <Button\r\n                  onClick={() => {\r\n                    this.setState({ micEnable: !this.state.micEnable });\r\n                  }}\r\n                  icon={\r\n                    !this.state.micEnable ? (\r\n                      <i className=\"material-icons\">mic_off</i>\r\n                    ) : (\r\n                      <i className=\"material-icons\">mic</i>\r\n                    )\r\n                  }\r\n                ></Button>\r\n                <Button\r\n                  onClick={() => {\r\n                    this.setState({ cameraEnable: !this.state.cameraEnable });\r\n                  }}\r\n                  icon={\r\n                    !this.state.cameraEnable ? (\r\n                      <i className=\"material-icons\">videocam_off</i>\r\n                    ) : (\r\n                      <i className=\"material-icons\">videocam</i>\r\n                    )\r\n                  }\r\n                ></Button>\r\n              </Form.Item>\r\n              <Form.Item>\r\n                <Button type=\"primary\" htmlType=\"submit\">\r\n                  Tạo cuộc họp/Tham gia vào cuộc họp\r\n                </Button>\r\n              </Form.Item>\r\n            </Form>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    roomCreateState: state.roomCreateState,\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setRoomCreate: (data) => dispatch(setRoomCreate(data)),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HomePage);\r\n","import React, { Component } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport { SocketClone } from \"./module/Socket\";\r\nimport \"antd/dist/antd.css\";\r\nimport \"./styles/styles.scss\";\r\nimport { store } from \"./redux/store\";\r\nimport { Provider } from \"react-redux\";\r\nimport Container from \"./Layouts/Container\";\r\nimport Start from \"./Layouts/Start\";\r\nimport HomePage from \"./Pages/HomePage\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const socket = new SocketClone(\"https://\" + window.serverIp + \":\" + window.port);\r\n    this.socket = socket.socket;\r\n    this.socket.request = socket.request;\r\n    this.name = \"Dr.admin\";\r\n    window.name = this.name;\r\n    window.socket = this.socket;\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    // this.onCreateRoom()\r\n  };\r\n\r\n  render() {\r\n    console.log(store.getState());\r\n    return (\r\n      <Provider store={store}>\r\n        <div style={{ width: \"100%\", height: \"100vh\" }}>\r\n          {/* <Container /> */}\r\n          {/* <Start /> */}\r\n          <HomePage />\r\n        </div>\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n    <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}